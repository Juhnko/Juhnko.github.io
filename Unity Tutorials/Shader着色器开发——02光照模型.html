
    <!DOCTYPE html>
    <html>
    <head>
      <meta charset="utf-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <!-- common.css -->
      <style>* {-webkit-tap-highlight-color: rgba(0,0,0,0);}html {-webkit-text-size-adjust: none;}body {font-family: -apple-system, Helvetica, Arial, sans-serif;margin: 0;padding: 20px;color: #333;word-wrap: break-word;}h1, h2, h3, h4, h5, h6 {line-height: 1.1;}img {max-width: 100% !important;height: auto;}blockquote {margin: 0;padding: 0 15px;color: #777;border-left: 4px solid #ddd;}hr {background-color: #ddd;border: 0;height: 1px;margin: 15px 0;}code {font-family: Menlo, Consolas, 'Ubuntu Mono', Monaco, 'source-code-pro', monospace;line-height: 1.4;margin: 0;padding: 0.2em 0;font-size: 90%;background-color: rgba(0,0,0,0.04);border-radius: 3px;}pre > code {margin: 0;padding: 0;font-size: 100%;word-break: normal;background: transparent;border: 0;}ol {list-style-type: decimal;}ol ol, ul ol {list-style-type: lower-latin;}ol ol ol, ul ol ol, ul ul ol, ol ul ol {list-style-type: lower-roman;}table {border-spacing: 0;border-collapse: collapse;margin-top: 0;margin-bottom: 16px;}table th {font-weight: bold;}table th, table td {padding: 6px 13px;border: 1px solid #ddd;}table tr {border-top: 1px solid #ccc;}table tr:nth-child(even) {background-color: #f8f8f8;}input[type="checkbox"] {cursor: default;margin-right: 0.5em;font-size: 13px;}.task-list-item {list-style-type: none;}.task-list-item+.task-list-item {margin-top: 3px;}.task-list-item input {float: left;margin: 0.3em 1em 0.25em -1.6em;vertical-align: middle;}#tag-field {margin: 8px 2px 10px;}#tag-field .tag {display: inline-block;background: #cadff3;border-radius: 4px;padding: 1px 8px;color: black;font-size: 12px;margin-right: 10px;line-height: 1.4;}</style>
      <!-- ace-static.css -->
      <style>.ace_static_highlight {white-space: pre-wrap;}.ace_static_highlight .ace_gutter {width: 2em;text-align: right;padding: 0 3px 0 0;margin-right: 3px;}.ace_static_highlight.ace_show_gutter > .ace_line {padding-left: 2.6em;}.ace_static_highlight .ace_line {position: relative;}.ace_static_highlight .ace_gutter-cell {-moz-user-select: -moz-none;-khtml-user-select: none;-webkit-user-select: none;user-select: none;top: 0;bottom: 0;left: 0;position: absolute;}.ace_static_highlight .ace_gutter-cell:before {content: counter(ace_line, decimal);counter-increment: ace_line;}.ace_static_highlight {counter-reset: ace_line;}</style>
      <style>.ace-chrome .ace_gutter {background: #ebebeb;color: #333;overflow : hidden;}.ace-chrome .ace_print-margin {width: 1px;background: #e8e8e8;}.ace-chrome {background-color: #FFFFFF;color: black;}.ace-chrome .ace_cursor {color: black;}.ace-chrome .ace_invisible {color: rgb(191, 191, 191);}.ace-chrome .ace_constant.ace_buildin {color: rgb(88, 72, 246);}.ace-chrome .ace_constant.ace_language {color: rgb(88, 92, 246);}.ace-chrome .ace_constant.ace_library {color: rgb(6, 150, 14);}.ace-chrome .ace_invalid {background-color: rgb(153, 0, 0);color: white;}.ace-chrome .ace_fold {}.ace-chrome .ace_support.ace_function {color: rgb(60, 76, 114);}.ace-chrome .ace_support.ace_constant {color: rgb(6, 150, 14);}.ace-chrome .ace_support.ace_type,.ace-chrome .ace_support.ace_class.ace-chrome .ace_support.ace_other {color: rgb(109, 121, 222);}.ace-chrome .ace_variable.ace_parameter {font-style:italic;color:#FD971F;}.ace-chrome .ace_keyword.ace_operator {color: rgb(104, 118, 135);}.ace-chrome .ace_comment {color: #236e24;}.ace-chrome .ace_comment.ace_doc {color: #236e24;}.ace-chrome .ace_comment.ace_doc.ace_tag {color: #236e24;}.ace-chrome .ace_constant.ace_numeric {color: rgb(0, 0, 205);}.ace-chrome .ace_variable {color: rgb(49, 132, 149);}.ace-chrome .ace_xml-pe {color: rgb(104, 104, 91);}.ace-chrome .ace_entity.ace_name.ace_function {color: #0000A2;}.ace-chrome .ace_heading {color: rgb(12, 7, 255);}.ace-chrome .ace_list {color:rgb(185, 6, 144);}.ace-chrome .ace_marker-layer .ace_selection {background: rgb(181, 213, 255);}.ace-chrome .ace_marker-layer .ace_step {background: rgb(252, 255, 0);}.ace-chrome .ace_marker-layer .ace_stack {background: rgb(164, 229, 101);}.ace-chrome .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid rgb(192, 192, 192);}.ace-chrome .ace_marker-layer .ace_active-line {background: rgba(0, 0, 0, 0.07);}.ace-chrome .ace_gutter-active-line {background-color : #dcdcdc;}.ace-chrome .ace_marker-layer .ace_selected-word {background: rgb(250, 250, 255);border: 1px solid rgb(200, 200, 250);}.ace-chrome .ace_storage,.ace-chrome .ace_keyword,.ace-chrome .ace_meta.ace_tag {color: rgb(147, 15, 128);}.ace-chrome .ace_string.ace_regex {color: rgb(255, 0, 0)}.ace-chrome .ace_string {color: #1A1AA6;}.ace-chrome .ace_entity.ace_other.ace_attribute-name {color: #994409;}.ace-chrome .ace_indent-guide {background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y;}</style>
      <!-- export.css -->
      <style>
        body{margin:0 auto;max-width:800px;line-height:1.4}
        #nav{margin:5px 0 10px;font-size:15px}
        #titlearea{border-bottom:1px solid #ccc;font-size:17px;padding:10px 0;}
        #contentarea{font-size:15px;margin:16px 0}
        .cell{outline:0;min-height:20px;margin:5px 0;padding:5px 0;}
        .code-cell{font-family:Menlo,Consolas,'Ubuntu Mono',Monaco,'source-code-pro',monospace;font-size:12px;}
        .latex-cell{white-space:pre-wrap;}
      </style>
      <!-- User CSS -->
      <style> .text-cell {font-size: 15px;}.code-cell {font-size: 12px;}.markdown-cell {font-size: 15px;}.latex-cell {font-size: 15px;}</style>
    </head>
    <body>
      <div id="nav"><div>Next: <a href='Shader着色器开发——01基础入门.html'>Shader着色器开发——01基础入门</a>, Previous: <a href='StrangeIoc框架.html'>StrangeIoc框架</a>, Up: <a href='index.html'>Index</a></div></div>
      <div id="titlearea">
        <h2>Shader着色器开发——02光照模型</h2>
      </div>
      <div id="contentarea"><div class="cell text-cell"><h3>一、光照模型概念</h3><b></b></div><div class="cell text-cell"><b>1、什么是光照模型？</b></div><div class="cell text-cell">光照模型是一种算法/公式，使用这个公式来计算光照效果（光照到每个点上效果）。</div><div class="cell text-cell"><b>2、一些常用的方法：</b><div><ul><li>normalize() &nbsp;用来把一个向量，单位化（原来方向保持不变，长度变为1）<br></li><li>max() &nbsp;用来取得函数中最大的一个<br></li><li>dot &nbsp;用来取得<b>两个向量的点积</b></li></ul><ul><li>_WorldSpaceLightPos0 &nbsp;<b>取得平行光的位置</b><br></li><li>_LightColor0&nbsp;<b>取得平行光的颜色</b></li><li>UNITY_LIGHTMODEL_AMBIENT <b>用来获取环境光</b></li></ul><ul><li>UNITY_MATRIX_MVP &nbsp;这个矩阵用来把一个坐标从<font color="#323232" style="background-color: rgb(254, 250, 0);">模型空间</font>转换到<font color="#323232" style="background-color: rgb(254, 250, 0);">剪裁空间（屏幕空间相机锥形空间）</font><br></li><li>_World2Object &nbsp;这个矩阵用来把一个方向从<font color="#323232" style="background-color: rgb(254, 250, 0);">世界空间</font>转换到<font color="#323232" style="background-color: rgb(254, 250, 0);">模型空间</font></li></ul></div></div><div class="cell text-cell"><h3><b>二、标准光照模型</b></h3></div><div class="cell text-cell"><div>在<b>标准光照模型</b>里面，我们把进入摄像机的光分为下面四个部分:</div><div><ul><li><b>自发光（<span style="color: rgb(49, 49, 49);">self-luminous</span>）</b></li><li><b>漫反射（Diffuse）</b></li><li><b>高光反射（Specular）</b></li><li><b>环境光反射（<span style="color: rgb(49, 49, 49);">ambient light</span>）</b></li></ul></div></div><div class="cell text-cell"><b></b><div><div><b>&nbsp;01、漫反射 Diffuse</b></div><div><ul><li><b><span style="font-weight: normal;">&nbsp; &nbsp; Diffuse = 直射光颜色 * cos夹角（光和发现的夹角）（<b><span style="font-weight: normal;">cos夹角的值：</span></b>1~0）</span><span style="font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp;</span></b></li><li>&nbsp; &nbsp; Diffuse = 直射光颜色 * max(0,cos夹角(光和法线的夹角) ) &nbsp;（max取最大值负数的话，取值0）cosθ = 光方向· 法线方向</li></ul><b>&nbsp; &nbsp;<font color="#323232" style="background-color: rgb(254, 250, 0);"> &nbsp; 光和法线的夹角夹角计算方式划分：</font></b><br><ul><li><b>兰伯特光照模型</b></li><ul><li>&nbsp;Diffuse = 直射光颜色 * max(0,cos夹角(光和法线的夹角) ) &nbsp;cosθ = 光方向· 法线方向</li></ul><li><b>半兰伯特光照模型</b><br></li><ul><li>&nbsp;Diffuse = 直射光颜色 *（ cosθ *0.5 +０.５ ）<font color="#323232" style="background-color: rgb(254, 250, 0);">（1-0之间的变化）</font><br></li></ul></ul></div></div><div><b><br></b></div><div><b>02、高光反射 Specular</b></div><div>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</div><div>&nbsp;<b> &nbsp; &nbsp; &nbsp;<font color="#323232" style="background-color: rgb(254, 250, 0);"> 根据夹角不同划分：</font></b><br><ul><li><div></div></li><li><b>Blinn光照模型&nbsp;</b></li><ul><li>Specular=直射光 &nbsp;* pow( max(cosθ,0),10) &nbsp;θ:是<font color="#323232" style="background-color: rgb(254, 250, 0);">反射光方向和视野方向</font>的夹角</li></ul></ul></div><div><li><b>Blinn-Phong光照模型</b><br></li><ul><li>&nbsp;Specular=直射光 &nbsp;* pow( max(cosθ,0),10) &nbsp;θ:是法线和x的夹角。 &nbsp;<font color="#323232" style="background-color: rgb(254, 250, 0);">x 是平行光和视野方向的平分线。</font><br></li></ul></div><div><br></div><div><b>03、环境光反射&nbsp;</b><span style="caret-color: rgb(49, 49, 49); color: rgb(49, 49, 49);"><b>ambient light</b></span></div><div><ul><li><div><b><font color="#323232" style="background-color: rgb(254, 250, 0);">Tags{ "LightMode"="ForwardBase" }</font></b></div><div>&nbsp; &nbsp; 只有定义了正确的LightMode才能得到一些Unity的内置光照变量</div><div>&nbsp; &nbsp; #include "Lighting.cginc"</div><div>&nbsp; &nbsp; 包含unity的内置的文件，才可以使用unity内置的一些变量</div></li></ul></div></div><div class="cell text-cell"><h3><b>三、UnityCG.cginc中一些常用的函数</b></h3><div><ul><li><b>摄像机方向（视角方向）</b><br></li><ul><li>float3 WorldSpaceViewDir(float4 v) &nbsp;<span class="Apple-tab-span" style="white-space: pre;">	</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;根据模型空间中的顶点坐标 得到 （世界空间）从这个点到摄像机的观察方向</li><li>float3 UnityWorldSpaceViewDir(float4 v) &nbsp; &nbsp;世界空间中的顶点坐标==》世界空间从这个点到摄像机的观察方向</li><li>float3 ObjSpaceViewDir(float4 v)&nbsp;<span class="Apple-tab-span" style="white-space: pre;">		</span>&nbsp;模型空间中的顶点坐标==》模型空间从这个点到摄像机的观察方向</li></ul></ul></div><div><ul><li><b>光源方向</b><br></li><ul><li>float3 WorldSpaceLightDir(float4 v)&nbsp;<span class="Apple-tab-span" style="white-space: pre;">	</span>&nbsp; &nbsp; &nbsp; &nbsp; 模型空间中的顶点坐标==》世界空间中从这个点到光源的方向</li><li>float3 UnityWorldSpaceLightDir(float4 v)&nbsp;<span class="Apple-tab-span" style="white-space: pre;">	</span>世界空间中的顶点坐标==》世界空间中从这个点到光源的方向</li><li>float3 ObjSpaceLightDir(float4 v)&nbsp;<span class="Apple-tab-span" style="white-space: pre;">	</span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;模型空间中的顶点坐标==》模型空间中从这个点到光源的方向</li></ul></ul></div><div><ul><li><b>方向转换</b><br></li><ul><li>float3 UnityObjectToWorldNormal(float3 norm) &nbsp; &nbsp; 把法线方向 模型空间==》世界空间</li><li>float3 UnityObjectToWorldDir(float3 dir) &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 把方向 模型空间=》世界空间</li><li>float3 UnityWorldToObjectDir(float3 dir) &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 把方向 世界空间=》模型空间</li></ul></ul></div></div><div class="cell text-cell"><h3>四、漫反射和高光反射的统一实现（复习）</h3></div><div class="cell code-cell"><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">Shader</span> <span class="ace_string ace_start">"</span><span class="ace_string">LJK/10_testDiffuseSpecularShader</span><span class="ace_string ace_end">"</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_comment">//Inpector<span class="ace_cjk" style="width:NaNpx">面</span><span class="ace_cjk" style="width:NaNpx">板</span><span class="ace_cjk" style="width:NaNpx">显</span><span class="ace_cjk" style="width:NaNpx">示</span><span class="ace_cjk" style="width:NaNpx">的</span><span class="ace_cjk" style="width:NaNpx">属</span><span class="ace_cjk" style="width:NaNpx">性</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_identifier">Properties</span><span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">_Diffuse</span><span class="ace_paren ace_lparen">(</span><span class="ace_string ace_start">"</span><span class="ace_string">LJK <span class="ace_cjk" style="width:NaNpx">默</span><span class="ace_cjk" style="width:NaNpx">认</span><span class="ace_cjk" style="width:NaNpx">颜</span><span class="ace_cjk" style="width:NaNpx">色</span></span><span class="ace_string ace_end">"</span><span class="ace_punctuation ace_operator">,</span><span class="ace_identifier">Color</span><span class="ace_paren ace_rparen">)</span><span class="ace_keyword ace_operator">=</span><span class="ace_paren ace_lparen">(</span><span class="ace_constant ace_numeric">1</span><span class="ace_punctuation ace_operator">,</span><span class="ace_constant ace_numeric">1</span><span class="ace_punctuation ace_operator">,</span><span class="ace_constant ace_numeric">1</span><span class="ace_punctuation ace_operator">,</span><span class="ace_constant ace_numeric">1</span><span class="ace_paren ace_rparen">)</span>    <span class="ace_comment">//<span class="ace_cjk" style="width:NaNpx">默</span><span class="ace_cjk" style="width:NaNpx">认</span><span class="ace_cjk" style="width:NaNpx">白</span><span class="ace_cjk" style="width:NaNpx">色</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">_Specular</span><span class="ace_paren ace_lparen">(</span><span class="ace_string ace_start">"</span><span class="ace_string">Specular Color</span><span class="ace_string ace_end">"</span><span class="ace_punctuation ace_operator">,</span><span class="ace_identifier">Color</span><span class="ace_paren ace_rparen">)</span><span class="ace_keyword ace_operator">=</span><span class="ace_paren ace_lparen">(</span><span class="ace_constant ace_numeric">1</span><span class="ace_punctuation ace_operator">,</span><span class="ace_constant ace_numeric">1</span><span class="ace_punctuation ace_operator">,</span><span class="ace_constant ace_numeric">1</span><span class="ace_punctuation ace_operator">,</span><span class="ace_constant ace_numeric">1</span><span class="ace_paren ace_rparen">)</span> <span class="ace_comment">//<span class="ace_cjk" style="width:NaNpx">高</span><span class="ace_cjk" style="width:NaNpx">光</span><span class="ace_cjk" style="width:NaNpx">反</span><span class="ace_cjk" style="width:NaNpx">射</span><span class="ace_cjk" style="width:NaNpx">的</span><span class="ace_cjk" style="width:NaNpx">颜</span><span class="ace_cjk" style="width:NaNpx">色</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>        <span class="ace_identifier">_Gloss</span><span class="ace_paren ace_lparen">(</span><span class="ace_string ace_start">"</span><span class="ace_string">Gloss</span><span class="ace_string ace_end">"</span><span class="ace_punctuation ace_operator">,</span><span class="ace_identifier">Range</span><span class="ace_paren ace_lparen">(</span><span class="ace_constant ace_numeric">8</span><span class="ace_punctuation ace_operator">,</span><span class="ace_constant ace_numeric">200</span><span class="ace_paren ace_rparen">))</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_constant ace_numeric">10</span>           <span class="ace_comment">//<span class="ace_cjk" style="width:NaNpx">高</span><span class="ace_cjk" style="width:NaNpx">光</span><span class="ace_cjk" style="width:NaNpx">系</span><span class="ace_cjk" style="width:NaNpx">数</span><span class="ace_cjk" style="width:NaNpx">，</span><span class="ace_cjk" style="width:NaNpx">光</span><span class="ace_cjk" style="width:NaNpx">滑</span><span class="ace_cjk" style="width:NaNpx">度</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_comment">//<span class="ace_cjk" style="width:NaNpx">漫</span><span class="ace_cjk" style="width:NaNpx">反</span><span class="ace_cjk" style="width:NaNpx">射</span><span class="ace_cjk" style="width:NaNpx">高</span><span class="ace_cjk" style="width:NaNpx">光</span><span class="ace_cjk" style="width:NaNpx">复</span><span class="ace_cjk" style="width:NaNpx">习</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_identifier">SubShader</span><span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">Pass</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">Tags</span><span class="ace_paren ace_lparen">{</span> <span class="ace_string ace_start">"</span><span class="ace_string">LightMode</span><span class="ace_string ace_end">"</span><span class="ace_keyword ace_operator">=</span><span class="ace_string ace_start">"</span><span class="ace_string">ForwardBase</span><span class="ace_string ace_end">"</span> <span class="ace_paren ace_rparen">}</span><span class="ace_comment">//<span class="ace_cjk" style="width:NaNpx">正</span><span class="ace_cjk" style="width:NaNpx">确</span><span class="ace_cjk" style="width:NaNpx">定</span><span class="ace_cjk" style="width:NaNpx">义</span>Tags<span class="ace_cjk" style="width:NaNpx">，</span><span class="ace_cjk" style="width:NaNpx">取</span><span class="ace_cjk" style="width:NaNpx">到</span><span class="ace_cjk" style="width:NaNpx">与</span><span class="ace_cjk" style="width:NaNpx">光</span><span class="ace_cjk" style="width:NaNpx">有</span><span class="ace_cjk" style="width:NaNpx">关</span><span class="ace_cjk" style="width:NaNpx">的</span><span class="ace_cjk" style="width:NaNpx">属</span><span class="ace_cjk" style="width:NaNpx">性</span> <span class="ace_cjk" style="width:NaNpx">（</span>LightMode<span class="ace_cjk" style="width:NaNpx">）</span><span class="ace_cjk" style="width:NaNpx">！</span><span class="ace_cjk" style="width:NaNpx">！</span><span class="ace_cjk" style="width:NaNpx">！</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">CGPROGRAM</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    #<span class="ace_identifier">include</span> <span class="ace_string ace_start">"</span><span class="ace_string">Lighting.cginc</span><span class="ace_string ace_end">"</span> <span class="ace_comment">//<span class="ace_cjk" style="width:NaNpx">取</span><span class="ace_cjk" style="width:NaNpx">得</span><span class="ace_cjk" style="width:NaNpx">第</span><span class="ace_cjk" style="width:NaNpx">一</span><span class="ace_cjk" style="width:NaNpx">个</span><span class="ace_cjk" style="width:NaNpx">直</span><span class="ace_cjk" style="width:NaNpx">射</span><span class="ace_cjk" style="width:NaNpx">光</span><span class="ace_cjk" style="width:NaNpx">的</span><span class="ace_cjk" style="width:NaNpx">颜</span><span class="ace_cjk" style="width:NaNpx">色</span><span class="ace_cjk" style="width:NaNpx">，</span>_LightColor0(Unity<span class="ace_cjk" style="width:NaNpx">内</span><span class="ace_cjk" style="width:NaNpx">置</span><span class="ace_cjk" style="width:NaNpx">的</span><span class="ace_cjk" style="width:NaNpx">变</span><span class="ace_cjk" style="width:NaNpx">量</span>)</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>  <span class="ace_comment">//<span class="ace_cjk" style="width:NaNpx">取</span><span class="ace_cjk" style="width:NaNpx">得</span><span class="ace_cjk" style="width:NaNpx">第</span><span class="ace_cjk" style="width:NaNpx">一</span><span class="ace_cjk" style="width:NaNpx">个</span><span class="ace_cjk" style="width:NaNpx">直</span><span class="ace_cjk" style="width:NaNpx">射</span><span class="ace_cjk" style="width:NaNpx">光</span><span class="ace_cjk" style="width:NaNpx">的</span><span class="ace_cjk" style="width:NaNpx">位</span><span class="ace_cjk" style="width:NaNpx">置</span><span class="ace_cjk" style="width:NaNpx">，</span>_WorldSpaceLightPos0(Unity<span class="ace_cjk" style="width:NaNpx">内</span><span class="ace_cjk" style="width:NaNpx">置</span><span class="ace_cjk" style="width:NaNpx">的</span><span class="ace_cjk" style="width:NaNpx">变</span><span class="ace_cjk" style="width:NaNpx">量</span>) </span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    #<span class="ace_identifier">include</span> <span class="ace_keyword ace_operator">&lt;</span><span class="ace_identifier">UnityShaderUtilities</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">cginc</span><span class="ace_keyword ace_operator">&gt;</span><span class="ace_comment">//<span class="ace_cjk" style="width:NaNpx">引</span><span class="ace_cjk" style="width:NaNpx">入</span>Unity<span class="ace_cjk" style="width:NaNpx">内</span><span class="ace_cjk" style="width:NaNpx">置</span><span class="ace_cjk" style="width:NaNpx">的</span>CG<span class="ace_cjk" style="width:NaNpx">文</span><span class="ace_cjk" style="width:NaNpx">件</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_keyword">    #pragma</span> <span class="ace_identifier">vertex</span> <span class="ace_identifier">vert</span>    <span class="ace_comment">//<span class="ace_cjk" style="width:NaNpx">定</span><span class="ace_cjk" style="width:NaNpx">义</span><span class="ace_cjk" style="width:NaNpx">顶</span><span class="ace_cjk" style="width:NaNpx">点</span><span class="ace_cjk" style="width:NaNpx">函</span><span class="ace_cjk" style="width:NaNpx">数</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_keyword">    #pragma</span> <span class="ace_identifier">fragment</span> <span class="ace_identifier">frag</span>  <span class="ace_comment">//<span class="ace_cjk" style="width:NaNpx">定</span><span class="ace_cjk" style="width:NaNpx">义</span><span class="ace_cjk" style="width:NaNpx">片</span><span class="ace_cjk" style="width:NaNpx">元</span><span class="ace_cjk" style="width:NaNpx">函</span><span class="ace_cjk" style="width:NaNpx">数</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//<span class="ace_cjk" style="width:NaNpx">重</span><span class="ace_cjk" style="width:NaNpx">新</span><span class="ace_cjk" style="width:NaNpx">定</span><span class="ace_cjk" style="width:NaNpx">义</span><span class="ace_cjk" style="width:NaNpx">属</span><span class="ace_cjk" style="width:NaNpx">性</span><span class="ace_cjk" style="width:NaNpx">变</span><span class="ace_cjk" style="width:NaNpx">量</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">fixed4</span>  <span class="ace_identifier">_Diffuse</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">fixed4</span>  <span class="ace_identifier">_Specular</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>          <span class="ace_identifier">half</span>    <span class="ace_identifier">_Gloss</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//<span class="ace_cjk" style="width:NaNpx">定</span><span class="ace_cjk" style="width:NaNpx">义</span><span class="ace_cjk" style="width:NaNpx">两</span><span class="ace_cjk" style="width:NaNpx">个</span><span class="ace_cjk" style="width:NaNpx">结</span><span class="ace_cjk" style="width:NaNpx">构</span><span class="ace_cjk" style="width:NaNpx">体</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//01<span class="ace_cjk" style="width:NaNpx">、</span><span class="ace_cjk" style="width:NaNpx">给</span><span class="ace_cjk" style="width:NaNpx">顶</span><span class="ace_cjk" style="width:NaNpx">点</span><span class="ace_cjk" style="width:NaNpx">函</span><span class="ace_cjk" style="width:NaNpx">数</span><span class="ace_cjk" style="width:NaNpx">传</span><span class="ace_cjk" style="width:NaNpx">递</span><span class="ace_cjk" style="width:NaNpx">的</span><span class="ace_cjk" style="width:NaNpx">结</span><span class="ace_cjk" style="width:NaNpx">构</span><span class="ace_cjk" style="width:NaNpx">体</span><span class="ace_cjk" style="width:NaNpx">（</span><span class="ace_cjk" style="width:NaNpx">顶</span><span class="ace_cjk" style="width:NaNpx">点</span><span class="ace_cjk" style="width:NaNpx">函</span><span class="ace_cjk" style="width:NaNpx">数</span><span class="ace_cjk" style="width:NaNpx">的</span><span class="ace_cjk" style="width:NaNpx">形</span><span class="ace_cjk" style="width:NaNpx">参</span><span class="ace_cjk" style="width:NaNpx">（</span><span class="ace_cjk" style="width:NaNpx">传</span><span class="ace_cjk" style="width:NaNpx">入</span><span class="ace_cjk" style="width:NaNpx">参</span><span class="ace_cjk" style="width:NaNpx">数</span><span class="ace_cjk" style="width:NaNpx">）</span><span class="ace_cjk" style="width:NaNpx">类</span><span class="ace_cjk" style="width:NaNpx">型</span><span class="ace_cjk" style="width:NaNpx">）</span>--<span class="ace_cjk" style="width:NaNpx">从</span><span class="ace_cjk" style="width:NaNpx">应</span><span class="ace_cjk" style="width:NaNpx">用</span><span class="ace_cjk" style="width:NaNpx">到</span><span class="ace_cjk" style="width:NaNpx">顶</span><span class="ace_cjk" style="width:NaNpx">点</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_keyword">struct</span> <span class="ace_identifier">a2v</span><span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//001<span class="ace_cjk" style="width:NaNpx">、</span><span class="ace_cjk" style="width:NaNpx">获</span><span class="ace_cjk" style="width:NaNpx">取</span><span class="ace_cjk" style="width:NaNpx">模</span><span class="ace_cjk" style="width:NaNpx">型</span><span class="ace_cjk" style="width:NaNpx">空</span><span class="ace_cjk" style="width:NaNpx">间</span><span class="ace_cjk" style="width:NaNpx">下</span><span class="ace_cjk" style="width:NaNpx">的</span> <span class="ace_cjk" style="width:NaNpx">顶</span><span class="ace_cjk" style="width:NaNpx">点</span><span class="ace_cjk" style="width:NaNpx">位</span><span class="ace_cjk" style="width:NaNpx">置</span><span class="ace_cjk" style="width:NaNpx">，</span><span class="ace_cjk" style="width:NaNpx">完</span><span class="ace_cjk" style="width:NaNpx">成</span><span class="ace_cjk" style="width:NaNpx">顶</span><span class="ace_cjk" style="width:NaNpx">点</span><span class="ace_cjk" style="width:NaNpx">位</span><span class="ace_cjk" style="width:NaNpx">置</span><span class="ace_cjk" style="width:NaNpx">的</span><span class="ace_cjk" style="width:NaNpx">转</span><span class="ace_cjk" style="width:NaNpx">换</span><span class="ace_cjk" style="width:NaNpx">。</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">float4</span> <span class="ace_identifier">vertex</span><span class="ace_punctuation ace_operator">:</span><span class="ace_identifier">POSITION</span><span class="ace_punctuation ace_operator">;</span>  <span class="ace_comment">//<span class="ace_cjk" style="width:NaNpx">获</span><span class="ace_cjk" style="width:NaNpx">取</span><span class="ace_cjk" style="width:NaNpx">模</span><span class="ace_cjk" style="width:NaNpx">型</span><span class="ace_cjk" style="width:NaNpx">空</span><span class="ace_cjk" style="width:NaNpx">间</span><span class="ace_cjk" style="width:NaNpx">下</span><span class="ace_cjk" style="width:NaNpx">的</span><span class="ace_cjk" style="width:NaNpx">顶</span><span class="ace_cjk" style="width:NaNpx">点</span><span class="ace_cjk" style="width:NaNpx">坐</span><span class="ace_cjk" style="width:NaNpx">标</span><span class="ace_cjk" style="width:NaNpx">。</span>POSITION——"<span class="ace_cjk" style="width:NaNpx">模</span><span class="ace_cjk" style="width:NaNpx">型</span><span class="ace_cjk" style="width:NaNpx">空</span><span class="ace_cjk" style="width:NaNpx">间</span><span class="ace_cjk" style="width:NaNpx">下</span><span class="ace_cjk" style="width:NaNpx">的</span><span class="ace_cjk" style="width:NaNpx">顶</span><span class="ace_cjk" style="width:NaNpx">点</span><span class="ace_cjk" style="width:NaNpx">坐</span><span class="ace_cjk" style="width:NaNpx">标</span>"<span class="ace_cjk" style="width:NaNpx">。</span><span class="ace_cjk" style="width:NaNpx">（</span>POSITION<span class="ace_cjk" style="width:NaNpx">语</span><span class="ace_cjk" style="width:NaNpx">义</span><span class="ace_cjk" style="width:NaNpx">：</span><span class="ace_cjk" style="width:NaNpx">告</span><span class="ace_cjk" style="width:NaNpx">诉</span>unity<span class="ace_cjk" style="width:NaNpx">把</span>"<span class="ace_cjk" style="width:NaNpx">模</span><span class="ace_cjk" style="width:NaNpx">型</span><span class="ace_cjk" style="width:NaNpx">空</span><span class="ace_cjk" style="width:NaNpx">间</span><span class="ace_cjk" style="width:NaNpx">下</span><span class="ace_cjk" style="width:NaNpx">的</span><span class="ace_cjk" style="width:NaNpx">顶</span><span class="ace_cjk" style="width:NaNpx">点</span><span class="ace_cjk" style="width:NaNpx">坐</span><span class="ace_cjk" style="width:NaNpx">标</span>"<span class="ace_cjk" style="width:NaNpx">赋</span><span class="ace_cjk" style="width:NaNpx">值</span><span class="ace_cjk" style="width:NaNpx">给</span>vertex<span class="ace_cjk" style="width:NaNpx">）</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//002<span class="ace_cjk" style="width:NaNpx">、</span><span class="ace_cjk" style="width:NaNpx">获</span><span class="ace_cjk" style="width:NaNpx">取</span><span class="ace_cjk" style="width:NaNpx">模</span><span class="ace_cjk" style="width:NaNpx">型</span><span class="ace_cjk" style="width:NaNpx">空</span><span class="ace_cjk" style="width:NaNpx">间</span><span class="ace_cjk" style="width:NaNpx">下</span><span class="ace_cjk" style="width:NaNpx">的</span> <span class="ace_cjk" style="width:NaNpx">法</span><span class="ace_cjk" style="width:NaNpx">线</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">float3</span> <span class="ace_identifier">normal</span><span class="ace_punctuation ace_operator">:</span><span class="ace_identifier">NORMAL</span><span class="ace_punctuation ace_operator">;</span><span class="ace_comment">//<span class="ace_cjk" style="width:NaNpx">获</span><span class="ace_cjk" style="width:NaNpx">取</span><span class="ace_cjk" style="width:NaNpx">模</span><span class="ace_cjk" style="width:NaNpx">型</span><span class="ace_cjk" style="width:NaNpx">空</span><span class="ace_cjk" style="width:NaNpx">间</span><span class="ace_cjk" style="width:NaNpx">下</span><span class="ace_cjk" style="width:NaNpx">的</span><span class="ace_cjk" style="width:NaNpx">法</span><span class="ace_cjk" style="width:NaNpx">线</span><span class="ace_cjk" style="width:NaNpx">。</span><span class="ace_cjk" style="width:NaNpx">（</span>NORMA<span class="ace_cjk" style="width:NaNpx">语</span><span class="ace_cjk" style="width:NaNpx">义</span><span class="ace_cjk" style="width:NaNpx">：</span><span class="ace_cjk" style="width:NaNpx">告</span><span class="ace_cjk" style="width:NaNpx">诉</span>unity<span class="ace_cjk" style="width:NaNpx">把</span>"<span class="ace_cjk" style="width:NaNpx">模</span><span class="ace_cjk" style="width:NaNpx">型</span><span class="ace_cjk" style="width:NaNpx">空</span><span class="ace_cjk" style="width:NaNpx">间</span><span class="ace_cjk" style="width:NaNpx">下</span><span class="ace_cjk" style="width:NaNpx">的</span><span class="ace_cjk" style="width:NaNpx">法</span><span class="ace_cjk" style="width:NaNpx">线</span>"<span class="ace_cjk" style="width:NaNpx">赋</span><span class="ace_cjk" style="width:NaNpx">值</span><span class="ace_cjk" style="width:NaNpx">给</span>normal<span class="ace_cjk" style="width:NaNpx">）</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_paren ace_rparen">}</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//02<span class="ace_cjk" style="width:NaNpx">、</span><span class="ace_cjk" style="width:NaNpx">给</span><span class="ace_cjk" style="width:NaNpx">片</span><span class="ace_cjk" style="width:NaNpx">元</span><span class="ace_cjk" style="width:NaNpx">函</span><span class="ace_cjk" style="width:NaNpx">数</span><span class="ace_cjk" style="width:NaNpx">传</span><span class="ace_cjk" style="width:NaNpx">递</span><span class="ace_cjk" style="width:NaNpx">的</span><span class="ace_cjk" style="width:NaNpx">结</span><span class="ace_cjk" style="width:NaNpx">构</span><span class="ace_cjk" style="width:NaNpx">体</span><span class="ace_cjk" style="width:NaNpx">（</span><span class="ace_cjk" style="width:NaNpx">顶</span><span class="ace_cjk" style="width:NaNpx">点</span><span class="ace_cjk" style="width:NaNpx">函</span><span class="ace_cjk" style="width:NaNpx">数</span><span class="ace_cjk" style="width:NaNpx">的</span><span class="ace_cjk" style="width:NaNpx">返</span><span class="ace_cjk" style="width:NaNpx">回</span><span class="ace_cjk" style="width:NaNpx">类</span><span class="ace_cjk" style="width:NaNpx">型</span><span class="ace_cjk" style="width:NaNpx">）</span>——<span class="ace_cjk" style="width:NaNpx">从</span><span class="ace_cjk" style="width:NaNpx">顶</span><span class="ace_cjk" style="width:NaNpx">点</span><span class="ace_cjk" style="width:NaNpx">到</span><span class="ace_cjk" style="width:NaNpx">片</span><span class="ace_cjk" style="width:NaNpx">元</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_keyword">struct</span> <span class="ace_identifier">v2f</span><span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">float4</span> <span class="ace_identifier">position</span><span class="ace_punctuation ace_operator">:</span><span class="ace_identifier">SV_POSITION</span><span class="ace_punctuation ace_operator">;</span>    <span class="ace_comment">//<span class="ace_cjk" style="width:NaNpx">存</span><span class="ace_cjk" style="width:NaNpx">储</span><span class="ace_cjk" style="width:NaNpx">剪</span><span class="ace_cjk" style="width:NaNpx">裁</span><span class="ace_cjk" style="width:NaNpx">空</span><span class="ace_cjk" style="width:NaNpx">间</span><span class="ace_cjk" style="width:NaNpx">下</span><span class="ace_cjk" style="width:NaNpx">的</span><span class="ace_cjk" style="width:NaNpx">顶</span><span class="ace_cjk" style="width:NaNpx">点</span><span class="ace_cjk" style="width:NaNpx">坐</span><span class="ace_cjk" style="width:NaNpx">标</span>        SV_POSITION——"<span class="ace_cjk" style="width:NaNpx">剪</span><span class="ace_cjk" style="width:NaNpx">裁</span><span class="ace_cjk" style="width:NaNpx">空</span><span class="ace_cjk" style="width:NaNpx">间</span><span class="ace_cjk" style="width:NaNpx">下</span><span class="ace_cjk" style="width:NaNpx">的</span><span class="ace_cjk" style="width:NaNpx">顶</span><span class="ace_cjk" style="width:NaNpx">点</span><span class="ace_cjk" style="width:NaNpx">坐</span><span class="ace_cjk" style="width:NaNpx">标</span>"<span class="ace_cjk" style="width:NaNpx">。</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">float3</span> <span class="ace_identifier">worldNormal</span><span class="ace_punctuation ace_operator">:</span><span class="ace_identifier">TEXCOORD0</span><span class="ace_punctuation ace_operator">;</span>   <span class="ace_comment">//<span class="ace_cjk" style="width:NaNpx">存</span><span class="ace_cjk" style="width:NaNpx">储</span><span class="ace_cjk" style="width:NaNpx">世</span><span class="ace_cjk" style="width:NaNpx">界</span><span class="ace_cjk" style="width:NaNpx">法</span><span class="ace_cjk" style="width:NaNpx">线</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">float4</span> <span class="ace_identifier">worldVertex</span><span class="ace_punctuation ace_operator">:</span><span class="ace_identifier">TEXCOORD1</span><span class="ace_punctuation ace_operator">;</span>   <span class="ace_comment">//<span class="ace_cjk" style="width:NaNpx">存</span><span class="ace_cjk" style="width:NaNpx">储</span><span class="ace_cjk" style="width:NaNpx">世</span><span class="ace_cjk" style="width:NaNpx">界</span><span class="ace_cjk" style="width:NaNpx">顶</span><span class="ace_cjk" style="width:NaNpx">点</span><span class="ace_cjk" style="width:NaNpx">坐</span><span class="ace_cjk" style="width:NaNpx">标</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_paren ace_rparen">}</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//<span class="ace_cjk" style="width:NaNpx">以</span><span class="ace_cjk" style="width:NaNpx">下</span><span class="ace_cjk" style="width:NaNpx">两</span><span class="ace_cjk" style="width:NaNpx">个</span><span class="ace_cjk" style="width:NaNpx">函</span><span class="ace_cjk" style="width:NaNpx">数</span><span class="ace_cjk" style="width:NaNpx">，</span><span class="ace_cjk" style="width:NaNpx">系</span><span class="ace_cjk" style="width:NaNpx">统</span><span class="ace_cjk" style="width:NaNpx">自</span><span class="ace_cjk" style="width:NaNpx">动</span><span class="ace_cjk" style="width:NaNpx">调</span><span class="ace_cjk" style="width:NaNpx">用</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//01<span class="ace_cjk" style="width:NaNpx">、</span><span class="ace_cjk" style="width:NaNpx">顶</span><span class="ace_cjk" style="width:NaNpx">点</span><span class="ace_cjk" style="width:NaNpx">函</span><span class="ace_cjk" style="width:NaNpx">数</span>(<span class="ace_cjk" style="width:NaNpx">系</span><span class="ace_cjk" style="width:NaNpx">统</span><span class="ace_cjk" style="width:NaNpx">给</span><span class="ace_cjk" style="width:NaNpx">每</span><span class="ace_cjk" style="width:NaNpx">个</span><span class="ace_cjk" style="width:NaNpx">顶</span><span class="ace_cjk" style="width:NaNpx">点</span><span class="ace_cjk" style="width:NaNpx">调</span><span class="ace_cjk" style="width:NaNpx">用</span><span class="ace_cjk" style="width:NaNpx">，</span><span class="ace_cjk" style="width:NaNpx">返</span><span class="ace_cjk" style="width:NaNpx">回</span><span class="ace_cjk" style="width:NaNpx">结</span><span class="ace_cjk" style="width:NaNpx">构</span><span class="ace_cjk" style="width:NaNpx">体</span><span class="ace_cjk" style="width:NaNpx">）</span><span class="ace_cjk" style="width:NaNpx">（</span><span class="ace_cjk" style="width:NaNpx">这</span><span class="ace_cjk" style="width:NaNpx">个</span><span class="ace_cjk" style="width:NaNpx">结</span><span class="ace_cjk" style="width:NaNpx">构</span><span class="ace_cjk" style="width:NaNpx">体</span><span class="ace_cjk" style="width:NaNpx">是</span><span class="ace_cjk" style="width:NaNpx">给</span><span class="ace_cjk" style="width:NaNpx">片</span><span class="ace_cjk" style="width:NaNpx">元</span><span class="ace_cjk" style="width:NaNpx">函</span><span class="ace_cjk" style="width:NaNpx">数</span><span class="ace_cjk" style="width:NaNpx">传</span><span class="ace_cjk" style="width:NaNpx">递</span><span class="ace_cjk" style="width:NaNpx">的</span><span class="ace_cjk" style="width:NaNpx">结</span><span class="ace_cjk" style="width:NaNpx">构</span><span class="ace_cjk" style="width:NaNpx">体</span>)</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">v2f</span> <span class="ace_identifier">vert</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">a2v</span> <span class="ace_identifier">v</span><span class="ace_paren ace_rparen">)</span><span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">v2f</span> <span class="ace_identifier">f</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>            <span class="ace_identifier">f</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">position</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_identifier">UnityObjectToClipPos</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">v</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">vertex</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>        <span class="ace_comment">//<span class="ace_cjk" style="width:NaNpx">世</span><span class="ace_cjk" style="width:NaNpx">界</span><span class="ace_cjk" style="width:NaNpx">顶</span><span class="ace_cjk" style="width:NaNpx">点</span><span class="ace_cjk" style="width:NaNpx">，</span><span class="ace_cjk" style="width:NaNpx">从</span><span class="ace_cjk" style="width:NaNpx">模</span><span class="ace_cjk" style="width:NaNpx">型</span><span class="ace_cjk" style="width:NaNpx">空</span><span class="ace_cjk" style="width:NaNpx">间</span><span class="ace_cjk" style="width:NaNpx">站</span><span class="ace_cjk" style="width:NaNpx">换</span><span class="ace_cjk" style="width:NaNpx">到</span><span class="ace_cjk" style="width:NaNpx">世</span><span class="ace_cjk" style="width:NaNpx">间</span><span class="ace_cjk" style="width:NaNpx">空</span><span class="ace_cjk" style="width:NaNpx">间</span><span class="ace_cjk" style="width:NaNpx">转</span><span class="ace_cjk" style="width:NaNpx">换</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//f.worldNormal=mul(v.normal,(float3x3)unity_WorldToObject);</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">f</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">worldNormal</span><span class="ace_keyword ace_operator">=</span><span class="ace_identifier">UnityObjectToWorldNormal</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">v</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">normal</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>   <span class="ace_comment">//<span class="ace_cjk" style="width:NaNpx">世</span><span class="ace_cjk" style="width:NaNpx">界</span><span class="ace_cjk" style="width:NaNpx">法</span><span class="ace_cjk" style="width:NaNpx">线</span><span class="ace_cjk" style="width:NaNpx">，</span><span class="ace_cjk" style="width:NaNpx">从</span><span class="ace_cjk" style="width:NaNpx">模</span><span class="ace_cjk" style="width:NaNpx">型</span><span class="ace_cjk" style="width:NaNpx">空</span><span class="ace_cjk" style="width:NaNpx">间</span><span class="ace_cjk" style="width:NaNpx">站</span><span class="ace_cjk" style="width:NaNpx">换</span><span class="ace_cjk" style="width:NaNpx">到</span><span class="ace_cjk" style="width:NaNpx">世</span><span class="ace_cjk" style="width:NaNpx">间</span><span class="ace_cjk" style="width:NaNpx">空</span><span class="ace_cjk" style="width:NaNpx">间</span><span class="ace_cjk" style="width:NaNpx">转</span><span class="ace_cjk" style="width:NaNpx">换</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">f</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">worldVertex</span><span class="ace_keyword ace_operator">=</span><span class="ace_identifier">mul</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">v</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">vertex</span><span class="ace_punctuation ace_operator">,</span> <span class="ace_identifier">unity_WorldToObject</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>   <span class="ace_comment">//<span class="ace_cjk" style="width:NaNpx">根</span><span class="ace_cjk" style="width:NaNpx">据</span>"<span class="ace_cjk" style="width:NaNpx">世</span><span class="ace_cjk" style="width:NaNpx">界</span><span class="ace_cjk" style="width:NaNpx">顶</span><span class="ace_cjk" style="width:NaNpx">点</span>"<span class="ace_cjk" style="width:NaNpx">和</span>"<span class="ace_cjk" style="width:NaNpx">世</span><span class="ace_cjk" style="width:NaNpx">界</span><span class="ace_cjk" style="width:NaNpx">法</span><span class="ace_cjk" style="width:NaNpx">线</span>"<span class="ace_cjk" style="width:NaNpx">，</span><span class="ace_cjk" style="width:NaNpx">获</span><span class="ace_cjk" style="width:NaNpx">取</span><span class="ace_cjk" style="width:NaNpx">新</span><span class="ace_cjk" style="width:NaNpx">的</span><span class="ace_cjk" style="width:NaNpx">世</span><span class="ace_cjk" style="width:NaNpx">界</span><span class="ace_cjk" style="width:NaNpx">坐</span><span class="ace_cjk" style="width:NaNpx">标</span><span class="ace_cjk" style="width:NaNpx">顶</span><span class="ace_cjk" style="width:NaNpx">点</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_keyword">return</span> <span class="ace_identifier">f</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//02<span class="ace_cjk" style="width:NaNpx">、</span><span class="ace_cjk" style="width:NaNpx">片</span><span class="ace_cjk" style="width:NaNpx">元</span><span class="ace_cjk" style="width:NaNpx">函</span><span class="ace_cjk" style="width:NaNpx">数</span>(<span class="ace_cjk" style="width:NaNpx">系</span><span class="ace_cjk" style="width:NaNpx">统</span><span class="ace_cjk" style="width:NaNpx">给</span><span class="ace_cjk" style="width:NaNpx">屏</span><span class="ace_cjk" style="width:NaNpx">幕</span><span class="ace_cjk" style="width:NaNpx">上</span><span class="ace_cjk" style="width:NaNpx">的</span><span class="ace_cjk" style="width:NaNpx">每</span><span class="ace_cjk" style="width:NaNpx">个</span><span class="ace_cjk" style="width:NaNpx">像</span><span class="ace_cjk" style="width:NaNpx">素</span><span class="ace_cjk" style="width:NaNpx">点</span><span class="ace_cjk" style="width:NaNpx">调</span><span class="ace_cjk" style="width:NaNpx">用</span><span class="ace_cjk" style="width:NaNpx">，</span><span class="ace_cjk" style="width:NaNpx">调</span><span class="ace_cjk" style="width:NaNpx">用</span><span class="ace_cjk" style="width:NaNpx">次</span><span class="ace_cjk" style="width:NaNpx">数</span><span class="ace_cjk" style="width:NaNpx">会</span><span class="ace_cjk" style="width:NaNpx">比</span><span class="ace_cjk" style="width:NaNpx">较</span><span class="ace_cjk" style="width:NaNpx">多</span><span class="ace_cjk" style="width:NaNpx">，</span><span class="ace_cjk" style="width:NaNpx">返</span><span class="ace_cjk" style="width:NaNpx">回</span>fixed4<span class="ace_cjk" style="width:NaNpx">类</span><span class="ace_cjk" style="width:NaNpx">型</span><span class="ace_cjk" style="width:NaNpx">值</span><span class="ace_cjk" style="width:NaNpx">，</span><span class="ace_cjk" style="width:NaNpx">是</span><span class="ace_cjk" style="width:NaNpx">输</span><span class="ace_cjk" style="width:NaNpx">出</span><span class="ace_cjk" style="width:NaNpx">到</span><span class="ace_cjk" style="width:NaNpx">屏</span><span class="ace_cjk" style="width:NaNpx">幕</span><span class="ace_cjk" style="width:NaNpx">上</span><span class="ace_cjk" style="width:NaNpx">的</span><span class="ace_cjk" style="width:NaNpx">颜</span><span class="ace_cjk" style="width:NaNpx">色</span>)</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">fixed4</span> <span class="ace_identifier">frag</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">v2f</span> <span class="ace_identifier">f</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">:</span><span class="ace_identifier">SV_Target</span><span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//<span class="ace_cjk" style="width:NaNpx">法</span><span class="ace_cjk" style="width:NaNpx">线</span><span class="ace_cjk" style="width:NaNpx">的</span><span class="ace_cjk" style="width:NaNpx">方</span><span class="ace_cjk" style="width:NaNpx">向</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">fixed3</span> <span class="ace_identifier">normal_dir</span><span class="ace_keyword ace_operator">=</span><span class="ace_identifier">normalize</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">f</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">worldNormal</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//<span class="ace_cjk" style="width:NaNpx">光</span><span class="ace_cjk" style="width:NaNpx">照</span><span class="ace_cjk" style="width:NaNpx">的</span><span class="ace_cjk" style="width:NaNpx">方</span><span class="ace_cjk" style="width:NaNpx">向</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//fixed3 light_dir=normalize(_WorldSpaceLightPos0.xyz);//<span class="ace_cjk" style="width:NaNpx">取</span><span class="ace_cjk" style="width:NaNpx">得</span><span class="ace_cjk" style="width:NaNpx">直</span><span class="ace_cjk" style="width:NaNpx">射</span><span class="ace_cjk" style="width:NaNpx">光</span><span class="ace_cjk" style="width:NaNpx">的</span><span class="ace_cjk" style="width:NaNpx">位</span><span class="ace_cjk" style="width:NaNpx">置</span><span class="ace_cjk" style="width:NaNpx">（</span><span class="ace_cjk" style="width:NaNpx">对</span><span class="ace_cjk" style="width:NaNpx">于</span><span class="ace_cjk" style="width:NaNpx">每</span><span class="ace_cjk" style="width:NaNpx">个</span><span class="ace_cjk" style="width:NaNpx">顶</span><span class="ace_cjk" style="width:NaNpx">点</span><span class="ace_cjk" style="width:NaNpx">来</span><span class="ace_cjk" style="width:NaNpx">说</span><span class="ace_cjk" style="width:NaNpx">，</span><span class="ace_cjk" style="width:NaNpx">光</span><span class="ace_cjk" style="width:NaNpx">的</span><span class="ace_cjk" style="width:NaNpx">位</span><span class="ace_cjk" style="width:NaNpx">置</span><span class="ace_cjk" style="width:NaNpx">就</span><span class="ace_cjk" style="width:NaNpx">是</span><span class="ace_cjk" style="width:NaNpx">光</span><span class="ace_cjk" style="width:NaNpx">的</span><span class="ace_cjk" style="width:NaNpx">方</span><span class="ace_cjk" style="width:NaNpx">向</span><span class="ace_cjk" style="width:NaNpx">，</span><span class="ace_cjk" style="width:NaNpx">以</span><span class="ace_cjk" style="width:NaNpx">为</span><span class="ace_cjk" style="width:NaNpx">光</span><span class="ace_cjk" style="width:NaNpx">是</span><span class="ace_cjk" style="width:NaNpx">平</span><span class="ace_cjk" style="width:NaNpx">行</span><span class="ace_cjk" style="width:NaNpx">光</span><span class="ace_cjk" style="width:NaNpx">）</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">fixed3</span> <span class="ace_identifier">light_dir</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_identifier">normalize</span><span class="ace_paren ace_lparen">(</span> <span class="ace_identifier">WorldSpaceLightDir</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">f</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">worldVertex</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">xyz</span> <span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//<span class="ace_cjk" style="width:NaNpx">环</span><span class="ace_cjk" style="width:NaNpx">境</span><span class="ace_cjk" style="width:NaNpx">光</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">fixed3</span> <span class="ace_identifier">ambient</span><span class="ace_keyword ace_operator">=</span><span class="ace_identifier">UNITY_LIGHTMODEL_AMBIENT</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">rgb</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//<span class="ace_cjk" style="width:NaNpx">生</span><span class="ace_cjk" style="width:NaNpx">成</span>——<span class="ace_cjk" style="width:NaNpx">漫</span><span class="ace_cjk" style="width:NaNpx">反</span><span class="ace_cjk" style="width:NaNpx">射</span><span class="ace_cjk" style="width:NaNpx">颜</span><span class="ace_cjk" style="width:NaNpx">色</span><span class="ace_cjk" style="width:NaNpx">（</span><span class="ace_cjk" style="width:NaNpx">根</span><span class="ace_cjk" style="width:NaNpx">据</span><span class="ace_cjk" style="width:NaNpx">兰</span><span class="ace_cjk" style="width:NaNpx">伯</span><span class="ace_cjk" style="width:NaNpx">特</span><span class="ace_cjk" style="width:NaNpx">光</span><span class="ace_cjk" style="width:NaNpx">照</span><span class="ace_cjk" style="width:NaNpx">模</span><span class="ace_cjk" style="width:NaNpx">型</span><span class="ace_cjk" style="width:NaNpx">生</span><span class="ace_cjk" style="width:NaNpx">成</span><span class="ace_cjk" style="width:NaNpx">！</span><span class="ace_cjk" style="width:NaNpx">）</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//fixed3 diffuse = _LightColor0.rgb * max(0, dot(normal_dir, light_dir)*_Diffuse.rgb);</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//<span class="ace_cjk" style="width:NaNpx">生</span><span class="ace_cjk" style="width:NaNpx">成</span>——<span class="ace_cjk" style="width:NaNpx">漫</span><span class="ace_cjk" style="width:NaNpx">反</span><span class="ace_cjk" style="width:NaNpx">射</span><span class="ace_cjk" style="width:NaNpx">颜</span><span class="ace_cjk" style="width:NaNpx">色</span><span class="ace_cjk" style="width:NaNpx">（</span><span class="ace_cjk" style="width:NaNpx">根</span><span class="ace_cjk" style="width:NaNpx">据</span><span class="ace_cjk" style="width:NaNpx">半</span><span class="ace_cjk" style="width:NaNpx">兰</span><span class="ace_cjk" style="width:NaNpx">伯</span><span class="ace_cjk" style="width:NaNpx">特</span><span class="ace_cjk" style="width:NaNpx">光</span><span class="ace_cjk" style="width:NaNpx">照</span><span class="ace_cjk" style="width:NaNpx">模</span><span class="ace_cjk" style="width:NaNpx">型</span><span class="ace_cjk" style="width:NaNpx">生</span><span class="ace_cjk" style="width:NaNpx">成</span><span class="ace_cjk" style="width:NaNpx">！</span><span class="ace_cjk" style="width:NaNpx">）</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//<span class="ace_cjk" style="width:NaNpx">使</span><span class="ace_cjk" style="width:NaNpx">用</span><span class="ace_cjk" style="width:NaNpx">半</span><span class="ace_cjk" style="width:NaNpx">兰</span><span class="ace_cjk" style="width:NaNpx">伯</span><span class="ace_cjk" style="width:NaNpx">特</span><span class="ace_cjk" style="width:NaNpx">光</span><span class="ace_cjk" style="width:NaNpx">照</span><span class="ace_cjk" style="width:NaNpx">模</span><span class="ace_cjk" style="width:NaNpx">型</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_keyword">float</span> <span class="ace_identifier">half_lambert</span><span class="ace_keyword ace_operator">=</span><span class="ace_identifier">dot</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">normal_dir</span><span class="ace_punctuation ace_operator">,</span> <span class="ace_identifier">light_dir</span><span class="ace_paren ace_rparen">)</span><span class="ace_keyword ace_operator">*</span><span class="ace_constant ace_numeric">0.5+0.5</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">fixed3</span> <span class="ace_identifier">diffuse</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_identifier">_LightColor0</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">rgb</span> <span class="ace_keyword ace_operator">*</span><span class="ace_identifier">_Diffuse</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">rgb</span><span class="ace_keyword ace_operator">*</span><span class="ace_identifier">half_lambert</span><span class="ace_punctuation ace_operator">;</span><span class="ace_comment">//<span class="ace_cjk" style="width:NaNpx">取</span><span class="ace_cjk" style="width:NaNpx">得</span><span class="ace_cjk" style="width:NaNpx">漫</span><span class="ace_cjk" style="width:NaNpx">反</span><span class="ace_cjk" style="width:NaNpx">射</span><span class="ace_cjk" style="width:NaNpx">颜</span><span class="ace_cjk" style="width:NaNpx">色</span><span class="ace_cjk" style="width:NaNpx">（</span><span class="ace_cjk" style="width:NaNpx">两</span><span class="ace_cjk" style="width:NaNpx">个</span><span class="ace_cjk" style="width:NaNpx">颜</span><span class="ace_cjk" style="width:NaNpx">色</span><span class="ace_cjk" style="width:NaNpx">融</span><span class="ace_cjk" style="width:NaNpx">合</span><span class="ace_cjk" style="width:NaNpx">，</span><span class="ace_cjk" style="width:NaNpx">就</span><span class="ace_cjk" style="width:NaNpx">是</span><span class="ace_cjk" style="width:NaNpx">两</span><span class="ace_cjk" style="width:NaNpx">个</span><span class="ace_cjk" style="width:NaNpx">颜</span><span class="ace_cjk" style="width:NaNpx">色</span><span class="ace_cjk" style="width:NaNpx">相</span><span class="ace_cjk" style="width:NaNpx">乘</span><span class="ace_cjk" style="width:NaNpx">）</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//<span class="ace_cjk" style="width:NaNpx">反</span><span class="ace_cjk" style="width:NaNpx">射</span><span class="ace_cjk" style="width:NaNpx">光</span><span class="ace_cjk" style="width:NaNpx">方</span><span class="ace_cjk" style="width:NaNpx">向</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//fixed3 reflectDir=normalize(reflect(-light_dir,normal_dir));</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//<span class="ace_cjk" style="width:NaNpx">视</span><span class="ace_cjk" style="width:NaNpx">野</span><span class="ace_cjk" style="width:NaNpx">方</span><span class="ace_cjk" style="width:NaNpx">向</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//fixed3 viewDir=normalize(_WorldSpaceCameraPos.xyz-f.worldVertex);</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">fixed3</span> <span class="ace_identifier">viewDir</span><span class="ace_keyword ace_operator">=</span><span class="ace_identifier">normalize</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">UnityWorldSpaceViewDir</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">f</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">worldVertex</span><span class="ace_paren ace_rparen">))</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//<span class="ace_cjk" style="width:NaNpx">平</span><span class="ace_cjk" style="width:NaNpx">分</span><span class="ace_cjk" style="width:NaNpx">线</span><span class="ace_cjk" style="width:NaNpx">方</span><span class="ace_cjk" style="width:NaNpx">向</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">fixed3</span> <span class="ace_identifier">halfDir</span><span class="ace_keyword ace_operator">=</span><span class="ace_identifier">normalize</span><span class="ace_paren ace_lparen">((</span><span class="ace_identifier">viewDir</span><span class="ace_keyword ace_operator">+</span><span class="ace_identifier">light_dir</span><span class="ace_paren ace_rparen">)</span>/<span class="ace_constant ace_numeric">2</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//<span class="ace_cjk" style="width:NaNpx">生</span><span class="ace_cjk" style="width:NaNpx">成</span>——<span class="ace_cjk" style="width:NaNpx">高</span><span class="ace_cjk" style="width:NaNpx">光</span><span class="ace_cjk" style="width:NaNpx">（</span><span class="ace_cjk" style="width:NaNpx">根</span><span class="ace_cjk" style="width:NaNpx">据</span>Blinn-Phong<span class="ace_cjk" style="width:NaNpx">光</span><span class="ace_cjk" style="width:NaNpx">照</span><span class="ace_cjk" style="width:NaNpx">模</span><span class="ace_cjk" style="width:NaNpx">型</span><span class="ace_cjk" style="width:NaNpx">生</span><span class="ace_cjk" style="width:NaNpx">成</span><span class="ace_cjk" style="width:NaNpx">。</span><span class="ace_cjk" style="width:NaNpx">获</span><span class="ace_cjk" style="width:NaNpx">取</span><span class="ace_cjk" style="width:NaNpx">视</span><span class="ace_cjk" style="width:NaNpx">野</span><span class="ace_cjk" style="width:NaNpx">方</span><span class="ace_cjk" style="width:NaNpx">向</span><span class="ace_cjk" style="width:NaNpx">与</span><span class="ace_cjk" style="width:NaNpx">平</span><span class="ace_cjk" style="width:NaNpx">分</span><span class="ace_cjk" style="width:NaNpx">线</span><span class="ace_cjk" style="width:NaNpx">方</span><span class="ace_cjk" style="width:NaNpx">向</span><span class="ace_cjk" style="width:NaNpx">的</span><span class="ace_cjk" style="width:NaNpx">高</span><span class="ace_cjk" style="width:NaNpx">光</span><span class="ace_cjk" style="width:NaNpx">）</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">fixed3</span> <span class="ace_identifier">specular</span><span class="ace_keyword ace_operator">=</span><span class="ace_identifier">_LightColor0</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">rgb</span><span class="ace_keyword ace_operator">*</span> <span class="ace_identifier">_Specular</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">rgb</span><span class="ace_keyword ace_operator">*</span><span class="ace_identifier">pow</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">max</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">dot</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">normal_dir</span><span class="ace_punctuation ace_operator">,</span><span class="ace_identifier">halfDir</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">,</span><span class="ace_constant ace_numeric">0</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">,</span><span class="ace_identifier">_Gloss</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//<span class="ace_cjk" style="width:NaNpx">总</span><span class="ace_cjk" style="width:NaNpx">体</span><span class="ace_cjk" style="width:NaNpx">显</span><span class="ace_cjk" style="width:NaNpx">示</span><span class="ace_cjk" style="width:NaNpx">的</span><span class="ace_cjk" style="width:NaNpx">颜</span><span class="ace_cjk" style="width:NaNpx">色</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">fixed3</span> <span class="ace_identifier">tempColor</span><span class="ace_keyword ace_operator">=</span><span class="ace_identifier">diffuse</span><span class="ace_keyword ace_operator">+</span><span class="ace_identifier">ambient</span><span class="ace_keyword ace_operator">+</span><span class="ace_identifier">specular</span><span class="ace_punctuation ace_operator">;</span><span class="ace_comment">//<span class="ace_cjk" style="width:NaNpx">颜</span><span class="ace_cjk" style="width:NaNpx">色</span><span class="ace_cjk" style="width:NaNpx">叠</span><span class="ace_cjk" style="width:NaNpx">加</span><span class="ace_cjk" style="width:NaNpx">是</span><span class="ace_cjk" style="width:NaNpx">颜</span><span class="ace_cjk" style="width:NaNpx">色</span><span class="ace_cjk" style="width:NaNpx">相</span><span class="ace_cjk" style="width:NaNpx">加</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_keyword">return</span> <span class="ace_identifier">fixed4</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">tempColor</span><span class="ace_punctuation ace_operator">,</span><span class="ace_constant ace_numeric">1</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">ENDCG</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_identifier">Fallback</span> <span class="ace_string ace_start">"</span><span class="ace_string">Specular</span><span class="ace_string ace_end">"</span><span class="ace_comment">//<span class="ace_cjk" style="width:NaNpx">后</span><span class="ace_cjk" style="width:NaNpx">备</span><span class="ace_cjk" style="width:NaNpx">方</span><span class="ace_cjk" style="width:NaNpx">案</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span>
</div></div></div></div><div class="cell text-cell"></div><div class="cell text-cell"><h3>五、关于纹理贴图介绍</h3></div><div class="cell text-cell"><b>纹理坐标（UV坐标）</b></div><div class="cell text-cell"><div>&nbsp; &nbsp; &nbsp;"UV"这里是指u,v纹理贴图坐标的简称(它和空间模型的X, Y, Z轴是类似的). 它定义了图片上每个点的位置的信息. 这些点与3D模型是相互联系的, 以决定表面纹理贴图的位置.&nbsp;</div><div>&nbsp; &nbsp; &nbsp; UV就是将图像上每一个点精确对应到模型物体的表面. 在点与点之间的间隙位置由软件进行图像光滑插值处理. 这就是所谓的UV贴图.&nbsp;</div></div><div class="cell text-cell"><b>&nbsp;为什么用UV坐标而不是标准的投影坐标呢?</b><div></div><div></div><div><br></div><div>&nbsp; &nbsp; &nbsp; 通常给物体纹理贴图最标准的方法就是以planar(平面),cylindrical(圆柱), spherical(球形),cubic(方盒)坐标方式投影贴图. Planar projection(平面投影方式)是将图像沿x,y或z轴直接投影到物体. 这种方法使用于纸张, 布告, 书的封面等 - 也就是表面平整的物体.</div><div>&nbsp; &nbsp; &nbsp; 平面投影的缺点是如果表面不平整, 或者物体边缘弯曲, 就会产生如图A的不理想接缝和变形.&nbsp;</div><div>&nbsp; &nbsp; &nbsp; 避免这种情况需要创建带有alpha通道的图像, 来掩盖临近的平面投影接缝, 而这会是非常烦琐的工作. 所以不要对有较大厚度的物体和不平整的表面运用平面投影方式. 对于立方体可以在x, y方向分别进行平面投影, 但是要注意边缘接缝的融合. 或者采用无缝连续的纹理, 并使用cubic投影方式. 多数软件有图片自动缩放功能, 使图像与表面吻合. 显然, 如果你的图像与表面形状不同, 自动缩放就会改变图像的比例以吻合表面. 这通常会产生不理想的效果, 所以制作贴图前先测量你的物体尺寸.</div></div><div class="cell text-cell"><b>&nbsp;使用纹理目的：</b><div>&nbsp; &nbsp; &nbsp; &nbsp; 利用纹理颜色代替漫反射颜色。</div></div><div class="cell text-cell"><ul><li>Tiling重复属性（瓷砖平铺）</li><li>Offset偏移量<br></li></ul></div><div class="cell text-cell"><div><b>&nbsp;shader中的各种空间坐标</b><br></div><div><ul></ul>&nbsp; &nbsp; http://blog.csdn.net/lyh916/article/details/50906272</div></div><div class="cell text-cell"><b>常用的Shader收集/整理</b><br><div></div></div><div class="cell text-cell"><b>关于凹凸映射和法线映射的介绍</b></div><div class="cell text-cell">HeightMap<div>NormalMap</div><div>Occlusion</div><div>Emission</div><div>DetailMask</div></div><div class="cell text-cell"><div><b>01、使用法线映射和没有使用的对比</b></div></div><div class="cell text-cell"><b>法线映射</b><div><div>&nbsp;pixel = (normal+1)/2 &nbsp; &nbsp; &nbsp; &nbsp; normal与pixel的转换关系</div><div>&nbsp;normal = pixel*2 - 1 &nbsp; &nbsp;</div></div></div><div class="cell text-cell"><b>02、什么是切线空间？</b><br><ul></ul>&nbsp; &nbsp; http://blog.csdn.net/bonchoix/article/details/8619624</div><div class="cell code-cell"><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">Shader</span> <span class="ace_string ace_start">"</span><span class="ace_string">LJK/14_testRockAlphaShader</span><span class="ace_string ace_end">"</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_comment">//<span class="ace_cjk" style="width:NaNpx">属</span><span class="ace_cjk" style="width:NaNpx">性</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_identifier">Properties</span><span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//_Diffuse("LJK <span class="ace_cjk" style="width:NaNpx">默</span><span class="ace_cjk" style="width:NaNpx">认</span><span class="ace_cjk" style="width:NaNpx">颜</span><span class="ace_cjk" style="width:NaNpx">色</span>",Color)=(1,1,1,1)    //<span class="ace_cjk" style="width:NaNpx">默</span><span class="ace_cjk" style="width:NaNpx">认</span><span class="ace_cjk" style="width:NaNpx">白</span><span class="ace_cjk" style="width:NaNpx">色</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">_Color</span><span class="ace_paren ace_lparen">(</span><span class="ace_string ace_start">"</span><span class="ace_string"><span class="ace_cjk" style="width:NaNpx">纹</span><span class="ace_cjk" style="width:NaNpx">理</span><span class="ace_cjk" style="width:NaNpx">颜</span><span class="ace_cjk" style="width:NaNpx">色</span></span><span class="ace_string ace_end">"</span><span class="ace_punctuation ace_operator">,</span><span class="ace_identifier">Color</span><span class="ace_paren ace_rparen">)</span><span class="ace_keyword ace_operator">=</span><span class="ace_paren ace_lparen">(</span><span class="ace_constant ace_numeric">0.5</span><span class="ace_punctuation ace_operator">,</span><span class="ace_constant ace_numeric">0</span><span class="ace_punctuation ace_operator">,</span><span class="ace_constant ace_numeric">0</span><span class="ace_punctuation ace_operator">,</span><span class="ace_constant ace_numeric">1</span><span class="ace_paren ace_rparen">)</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">_MainTexture</span><span class="ace_paren ace_lparen">(</span><span class="ace_string ace_start">"</span><span class="ace_string"><span class="ace_cjk" style="width:NaNpx">自</span><span class="ace_cjk" style="width:NaNpx">定</span><span class="ace_cjk" style="width:NaNpx">义</span><span class="ace_cjk" style="width:NaNpx">漫</span><span class="ace_cjk" style="width:NaNpx">反</span><span class="ace_cjk" style="width:NaNpx">射</span><span class="ace_cjk" style="width:NaNpx">主</span><span class="ace_cjk" style="width:NaNpx">贴</span><span class="ace_cjk" style="width:NaNpx">图</span></span><span class="ace_string ace_end">"</span><span class="ace_punctuation ace_operator">,</span>2<span class="ace_identifier">D</span><span class="ace_paren ace_rparen">)</span><span class="ace_keyword ace_operator">=</span><span class="ace_string ace_start">"</span><span class="ace_string">white</span><span class="ace_string ace_end">"</span><span class="ace_paren ace_lparen">{</span><span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">_NormalMap</span><span class="ace_paren ace_lparen">(</span><span class="ace_string ace_start">"</span><span class="ace_string"><span class="ace_cjk" style="width:NaNpx">法</span><span class="ace_cjk" style="width:NaNpx">线</span><span class="ace_cjk" style="width:NaNpx">贴</span><span class="ace_cjk" style="width:NaNpx">图</span></span><span class="ace_string ace_end">"</span><span class="ace_punctuation ace_operator">,</span>2<span class="ace_identifier">D</span><span class="ace_paren ace_rparen">)</span><span class="ace_keyword ace_operator">=</span><span class="ace_string ace_start">"</span><span class="ace_string">bump</span><span class="ace_string ace_end">"</span><span class="ace_paren ace_lparen">{</span><span class="ace_paren ace_rparen">}</span>  <span class="ace_comment">//<span class="ace_cjk" style="width:NaNpx">使</span><span class="ace_cjk" style="width:NaNpx">用</span><span class="ace_cjk" style="width:NaNpx">的</span><span class="ace_cjk" style="width:NaNpx">是</span><span class="ace_cjk" style="width:NaNpx">切</span><span class="ace_cjk" style="width:NaNpx">线</span><span class="ace_cjk" style="width:NaNpx">空</span><span class="ace_cjk" style="width:NaNpx">间</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">_BumpScale</span><span class="ace_paren ace_lparen">(</span><span class="ace_string ace_start">"</span><span class="ace_string"><span class="ace_cjk" style="width:NaNpx">凹</span><span class="ace_cjk" style="width:NaNpx">凸</span><span class="ace_cjk" style="width:NaNpx">参</span><span class="ace_cjk" style="width:NaNpx">数</span></span><span class="ace_string ace_end">"</span><span class="ace_punctuation ace_operator">,</span><span class="ace_identifier">Float</span><span class="ace_paren ace_rparen">)</span><span class="ace_keyword ace_operator">=</span><span class="ace_constant ace_numeric">1</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">_GOAlpha</span><span class="ace_paren ace_lparen">(</span><span class="ace_string ace_start">"</span><span class="ace_string"><span class="ace_cjk" style="width:NaNpx">透</span><span class="ace_cjk" style="width:NaNpx">明</span><span class="ace_cjk" style="width:NaNpx">度</span></span><span class="ace_string ace_end">"</span><span class="ace_punctuation ace_operator">,</span><span class="ace_identifier">Float</span><span class="ace_paren ace_rparen">)</span><span class="ace_keyword ace_operator">=</span><span class="ace_constant ace_numeric">1</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_comment">//<span class="ace_cjk" style="width:NaNpx">漫</span><span class="ace_cjk" style="width:NaNpx">反</span><span class="ace_cjk" style="width:NaNpx">射</span><span class="ace_cjk" style="width:NaNpx">高</span><span class="ace_cjk" style="width:NaNpx">光</span><span class="ace_cjk" style="width:NaNpx">复</span><span class="ace_cjk" style="width:NaNpx">习</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_identifier">SubShader</span><span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">Tags</span><span class="ace_paren ace_lparen">{</span><span class="ace_string ace_start">"</span><span class="ace_string">Queue</span><span class="ace_string ace_end">"</span><span class="ace_keyword ace_operator">=</span><span class="ace_string ace_start">"</span><span class="ace_string">Transparent</span><span class="ace_string ace_end">"</span> <span class="ace_string ace_start">"</span><span class="ace_string">IngnoreProjector</span><span class="ace_string ace_end">"</span><span class="ace_keyword ace_operator">=</span><span class="ace_string ace_start">"</span><span class="ace_string">True</span><span class="ace_string ace_end">"</span> <span class="ace_string ace_start">"</span><span class="ace_string">RenderType</span><span class="ace_string ace_end">"</span><span class="ace_keyword ace_operator">=</span><span class="ace_string ace_start">"</span><span class="ace_string">Transparent</span><span class="ace_string ace_end">"</span><span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">Pass</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">Tags</span><span class="ace_paren ace_lparen">{</span> <span class="ace_string ace_start">"</span><span class="ace_string">LightMode</span><span class="ace_string ace_end">"</span><span class="ace_keyword ace_operator">=</span><span class="ace_string ace_start">"</span><span class="ace_string">ForwardBase</span><span class="ace_string ace_end">"</span> <span class="ace_paren ace_rparen">}</span><span class="ace_comment">//<span class="ace_cjk" style="width:NaNpx">正</span><span class="ace_cjk" style="width:NaNpx">确</span><span class="ace_cjk" style="width:NaNpx">定</span><span class="ace_cjk" style="width:NaNpx">义</span>Tags<span class="ace_cjk" style="width:NaNpx">，</span><span class="ace_cjk" style="width:NaNpx">取</span><span class="ace_cjk" style="width:NaNpx">到</span><span class="ace_cjk" style="width:NaNpx">与</span><span class="ace_cjk" style="width:NaNpx">光</span><span class="ace_cjk" style="width:NaNpx">有</span><span class="ace_cjk" style="width:NaNpx">关</span><span class="ace_cjk" style="width:NaNpx">的</span><span class="ace_cjk" style="width:NaNpx">属</span><span class="ace_cjk" style="width:NaNpx">性</span> <span class="ace_cjk" style="width:NaNpx">（</span>LightMode<span class="ace_cjk" style="width:NaNpx">）</span><span class="ace_cjk" style="width:NaNpx">！</span><span class="ace_cjk" style="width:NaNpx">！</span><span class="ace_cjk" style="width:NaNpx">！</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">ZWrite</span> <span class="ace_identifier">Off</span><span class="ace_comment">//<span class="ace_cjk" style="width:NaNpx">深</span><span class="ace_cjk" style="width:NaNpx">度</span><span class="ace_cjk" style="width:NaNpx">写</span><span class="ace_cjk" style="width:NaNpx">入</span><span class="ace_cjk" style="width:NaNpx">关</span><span class="ace_cjk" style="width:NaNpx">闭</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">Blend</span> <span class="ace_identifier">SrcAlpha</span> <span class="ace_identifier">OneMinusSrcAlpha</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">CGPROGRAM</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    #<span class="ace_identifier">include</span> <span class="ace_string ace_start">"</span><span class="ace_string">Lighting.cginc</span><span class="ace_string ace_end">"</span> <span class="ace_comment">//<span class="ace_cjk" style="width:NaNpx">取</span><span class="ace_cjk" style="width:NaNpx">得</span><span class="ace_cjk" style="width:NaNpx">第</span><span class="ace_cjk" style="width:NaNpx">一</span><span class="ace_cjk" style="width:NaNpx">个</span><span class="ace_cjk" style="width:NaNpx">直</span><span class="ace_cjk" style="width:NaNpx">射</span><span class="ace_cjk" style="width:NaNpx">光</span><span class="ace_cjk" style="width:NaNpx">的</span><span class="ace_cjk" style="width:NaNpx">颜</span><span class="ace_cjk" style="width:NaNpx">色</span><span class="ace_cjk" style="width:NaNpx">，</span>_LightColor0(Unity<span class="ace_cjk" style="width:NaNpx">内</span><span class="ace_cjk" style="width:NaNpx">置</span><span class="ace_cjk" style="width:NaNpx">的</span><span class="ace_cjk" style="width:NaNpx">变</span><span class="ace_cjk" style="width:NaNpx">量</span>)</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>  <span class="ace_comment">//<span class="ace_cjk" style="width:NaNpx">取</span><span class="ace_cjk" style="width:NaNpx">得</span><span class="ace_cjk" style="width:NaNpx">第</span><span class="ace_cjk" style="width:NaNpx">一</span><span class="ace_cjk" style="width:NaNpx">个</span><span class="ace_cjk" style="width:NaNpx">直</span><span class="ace_cjk" style="width:NaNpx">射</span><span class="ace_cjk" style="width:NaNpx">光</span><span class="ace_cjk" style="width:NaNpx">的</span><span class="ace_cjk" style="width:NaNpx">位</span><span class="ace_cjk" style="width:NaNpx">置</span><span class="ace_cjk" style="width:NaNpx">，</span>_WorldSpaceLightPos0(Unity<span class="ace_cjk" style="width:NaNpx">内</span><span class="ace_cjk" style="width:NaNpx">置</span><span class="ace_cjk" style="width:NaNpx">的</span><span class="ace_cjk" style="width:NaNpx">变</span><span class="ace_cjk" style="width:NaNpx">量</span>) </span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    #<span class="ace_identifier">include</span> <span class="ace_keyword ace_operator">&lt;</span><span class="ace_identifier">UnityShaderUtilities</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">cginc</span><span class="ace_keyword ace_operator">&gt;</span><span class="ace_comment">//<span class="ace_cjk" style="width:NaNpx">引</span><span class="ace_cjk" style="width:NaNpx">入</span>Unity<span class="ace_cjk" style="width:NaNpx">内</span><span class="ace_cjk" style="width:NaNpx">置</span><span class="ace_cjk" style="width:NaNpx">的</span>CG<span class="ace_cjk" style="width:NaNpx">文</span><span class="ace_cjk" style="width:NaNpx">件</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_keyword">    #pragma</span> <span class="ace_identifier">vertex</span> <span class="ace_identifier">vert</span>    <span class="ace_comment">//<span class="ace_cjk" style="width:NaNpx">定</span><span class="ace_cjk" style="width:NaNpx">义</span><span class="ace_cjk" style="width:NaNpx">顶</span><span class="ace_cjk" style="width:NaNpx">点</span><span class="ace_cjk" style="width:NaNpx">函</span><span class="ace_cjk" style="width:NaNpx">数</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_keyword">    #pragma</span> <span class="ace_identifier">fragment</span> <span class="ace_identifier">frag</span>  <span class="ace_comment">//<span class="ace_cjk" style="width:NaNpx">定</span><span class="ace_cjk" style="width:NaNpx">义</span><span class="ace_cjk" style="width:NaNpx">片</span><span class="ace_cjk" style="width:NaNpx">元</span><span class="ace_cjk" style="width:NaNpx">函</span><span class="ace_cjk" style="width:NaNpx">数</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//<span class="ace_cjk" style="width:NaNpx">重</span><span class="ace_cjk" style="width:NaNpx">新</span><span class="ace_cjk" style="width:NaNpx">定</span><span class="ace_cjk" style="width:NaNpx">义</span><span class="ace_cjk" style="width:NaNpx">属</span><span class="ace_cjk" style="width:NaNpx">性</span><span class="ace_cjk" style="width:NaNpx">变</span><span class="ace_cjk" style="width:NaNpx">量</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>  <span class="ace_comment">//fixed4     _Diffuse;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">fixed4</span>     <span class="ace_identifier">_Color</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">sampler2D</span>  <span class="ace_identifier">_MainTexture</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">float4</span>     <span class="ace_identifier">_MainTexture_ST</span><span class="ace_punctuation ace_operator">;</span><span class="ace_comment">//(<span class="ace_cjk" style="width:NaNpx">缩</span><span class="ace_cjk" style="width:NaNpx">放</span>/<span class="ace_cjk" style="width:NaNpx">偏</span><span class="ace_cjk" style="width:NaNpx">移</span>)(_ST<span class="ace_cjk" style="width:NaNpx">固</span><span class="ace_cjk" style="width:NaNpx">定</span><span class="ace_cjk" style="width:NaNpx">格</span><span class="ace_cjk" style="width:NaNpx">式</span><span class="ace_cjk" style="width:NaNpx">后</span><span class="ace_cjk" style="width:NaNpx">缀</span>)(offset: _ST.zw, tiling: ST.xy)</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">sampler2D</span>  <span class="ace_identifier">_NormalMap</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">float4</span>     <span class="ace_identifier">_NormalMap_ST</span><span class="ace_punctuation ace_operator">;</span><span class="ace_comment">//(<span class="ace_cjk" style="width:NaNpx">缩</span><span class="ace_cjk" style="width:NaNpx">放</span>/<span class="ace_cjk" style="width:NaNpx">偏</span><span class="ace_cjk" style="width:NaNpx">移</span>)(_ST<span class="ace_cjk" style="width:NaNpx">固</span><span class="ace_cjk" style="width:NaNpx">定</span><span class="ace_cjk" style="width:NaNpx">格</span><span class="ace_cjk" style="width:NaNpx">式</span><span class="ace_cjk" style="width:NaNpx">后</span><span class="ace_cjk" style="width:NaNpx">缀</span>)</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_keyword">float</span>      <span class="ace_identifier">_BumpScale</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_keyword">float</span>      <span class="ace_identifier">_GOAlpha</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//<span class="ace_cjk" style="width:NaNpx">定</span><span class="ace_cjk" style="width:NaNpx">义</span><span class="ace_cjk" style="width:NaNpx">两</span><span class="ace_cjk" style="width:NaNpx">个</span><span class="ace_cjk" style="width:NaNpx">结</span><span class="ace_cjk" style="width:NaNpx">构</span><span class="ace_cjk" style="width:NaNpx">体</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//01<span class="ace_cjk" style="width:NaNpx">、</span><span class="ace_cjk" style="width:NaNpx">给</span><span class="ace_cjk" style="width:NaNpx">顶</span><span class="ace_cjk" style="width:NaNpx">点</span><span class="ace_cjk" style="width:NaNpx">函</span><span class="ace_cjk" style="width:NaNpx">数</span><span class="ace_cjk" style="width:NaNpx">传</span><span class="ace_cjk" style="width:NaNpx">递</span><span class="ace_cjk" style="width:NaNpx">的</span><span class="ace_cjk" style="width:NaNpx">结</span><span class="ace_cjk" style="width:NaNpx">构</span><span class="ace_cjk" style="width:NaNpx">体</span><span class="ace_cjk" style="width:NaNpx">（</span><span class="ace_cjk" style="width:NaNpx">顶</span><span class="ace_cjk" style="width:NaNpx">点</span><span class="ace_cjk" style="width:NaNpx">函</span><span class="ace_cjk" style="width:NaNpx">数</span><span class="ace_cjk" style="width:NaNpx">的</span><span class="ace_cjk" style="width:NaNpx">形</span><span class="ace_cjk" style="width:NaNpx">参</span><span class="ace_cjk" style="width:NaNpx">（</span><span class="ace_cjk" style="width:NaNpx">传</span><span class="ace_cjk" style="width:NaNpx">入</span><span class="ace_cjk" style="width:NaNpx">参</span><span class="ace_cjk" style="width:NaNpx">数</span><span class="ace_cjk" style="width:NaNpx">）</span><span class="ace_cjk" style="width:NaNpx">类</span><span class="ace_cjk" style="width:NaNpx">型</span><span class="ace_cjk" style="width:NaNpx">）</span>--<span class="ace_cjk" style="width:NaNpx">从</span><span class="ace_cjk" style="width:NaNpx">应</span><span class="ace_cjk" style="width:NaNpx">用</span><span class="ace_cjk" style="width:NaNpx">到</span><span class="ace_cjk" style="width:NaNpx">顶</span><span class="ace_cjk" style="width:NaNpx">点</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_keyword">struct</span> <span class="ace_identifier">a2v</span><span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//001<span class="ace_cjk" style="width:NaNpx">、</span><span class="ace_cjk" style="width:NaNpx">获</span><span class="ace_cjk" style="width:NaNpx">取</span><span class="ace_cjk" style="width:NaNpx">模</span><span class="ace_cjk" style="width:NaNpx">型</span><span class="ace_cjk" style="width:NaNpx">空</span><span class="ace_cjk" style="width:NaNpx">间</span><span class="ace_cjk" style="width:NaNpx">下</span><span class="ace_cjk" style="width:NaNpx">的</span> <span class="ace_cjk" style="width:NaNpx">顶</span><span class="ace_cjk" style="width:NaNpx">点</span><span class="ace_cjk" style="width:NaNpx">位</span><span class="ace_cjk" style="width:NaNpx">置</span><span class="ace_cjk" style="width:NaNpx">，</span><span class="ace_cjk" style="width:NaNpx">完</span><span class="ace_cjk" style="width:NaNpx">成</span><span class="ace_cjk" style="width:NaNpx">顶</span><span class="ace_cjk" style="width:NaNpx">点</span><span class="ace_cjk" style="width:NaNpx">位</span><span class="ace_cjk" style="width:NaNpx">置</span><span class="ace_cjk" style="width:NaNpx">的</span><span class="ace_cjk" style="width:NaNpx">转</span><span class="ace_cjk" style="width:NaNpx">换</span><span class="ace_cjk" style="width:NaNpx">。</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">float4</span> <span class="ace_identifier">vertex</span><span class="ace_punctuation ace_operator">:</span><span class="ace_identifier">POSITION</span><span class="ace_punctuation ace_operator">;</span>  <span class="ace_comment">//<span class="ace_cjk" style="width:NaNpx">获</span><span class="ace_cjk" style="width:NaNpx">取</span><span class="ace_cjk" style="width:NaNpx">模</span><span class="ace_cjk" style="width:NaNpx">型</span><span class="ace_cjk" style="width:NaNpx">空</span><span class="ace_cjk" style="width:NaNpx">间</span><span class="ace_cjk" style="width:NaNpx">下</span><span class="ace_cjk" style="width:NaNpx">的</span><span class="ace_cjk" style="width:NaNpx">顶</span><span class="ace_cjk" style="width:NaNpx">点</span><span class="ace_cjk" style="width:NaNpx">坐</span><span class="ace_cjk" style="width:NaNpx">标</span><span class="ace_cjk" style="width:NaNpx">。</span>POSITION——"<span class="ace_cjk" style="width:NaNpx">模</span><span class="ace_cjk" style="width:NaNpx">型</span><span class="ace_cjk" style="width:NaNpx">空</span><span class="ace_cjk" style="width:NaNpx">间</span><span class="ace_cjk" style="width:NaNpx">下</span><span class="ace_cjk" style="width:NaNpx">的</span><span class="ace_cjk" style="width:NaNpx">顶</span><span class="ace_cjk" style="width:NaNpx">点</span><span class="ace_cjk" style="width:NaNpx">坐</span><span class="ace_cjk" style="width:NaNpx">标</span>"<span class="ace_cjk" style="width:NaNpx">。</span><span class="ace_cjk" style="width:NaNpx">（</span>POSITION<span class="ace_cjk" style="width:NaNpx">语</span><span class="ace_cjk" style="width:NaNpx">义</span><span class="ace_cjk" style="width:NaNpx">：</span><span class="ace_cjk" style="width:NaNpx">告</span><span class="ace_cjk" style="width:NaNpx">诉</span>unity<span class="ace_cjk" style="width:NaNpx">把</span>"<span class="ace_cjk" style="width:NaNpx">模</span><span class="ace_cjk" style="width:NaNpx">型</span><span class="ace_cjk" style="width:NaNpx">空</span><span class="ace_cjk" style="width:NaNpx">间</span><span class="ace_cjk" style="width:NaNpx">下</span><span class="ace_cjk" style="width:NaNpx">的</span><span class="ace_cjk" style="width:NaNpx">顶</span><span class="ace_cjk" style="width:NaNpx">点</span><span class="ace_cjk" style="width:NaNpx">坐</span><span class="ace_cjk" style="width:NaNpx">标</span>"<span class="ace_cjk" style="width:NaNpx">赋</span><span class="ace_cjk" style="width:NaNpx">值</span><span class="ace_cjk" style="width:NaNpx">给</span>vertex<span class="ace_cjk" style="width:NaNpx">）</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//002<span class="ace_cjk" style="width:NaNpx">、</span><span class="ace_cjk" style="width:NaNpx">获</span><span class="ace_cjk" style="width:NaNpx">取</span><span class="ace_cjk" style="width:NaNpx">模</span><span class="ace_cjk" style="width:NaNpx">型</span><span class="ace_cjk" style="width:NaNpx">空</span><span class="ace_cjk" style="width:NaNpx">间</span><span class="ace_cjk" style="width:NaNpx">下</span><span class="ace_cjk" style="width:NaNpx">的</span> <span class="ace_cjk" style="width:NaNpx">法</span><span class="ace_cjk" style="width:NaNpx">线</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">float3</span> <span class="ace_identifier">normal</span><span class="ace_punctuation ace_operator">:</span><span class="ace_identifier">NORMAL</span><span class="ace_punctuation ace_operator">;</span><span class="ace_comment">//<span class="ace_cjk" style="width:NaNpx">获</span><span class="ace_cjk" style="width:NaNpx">取</span><span class="ace_cjk" style="width:NaNpx">模</span><span class="ace_cjk" style="width:NaNpx">型</span><span class="ace_cjk" style="width:NaNpx">空</span><span class="ace_cjk" style="width:NaNpx">间</span><span class="ace_cjk" style="width:NaNpx">下</span><span class="ace_cjk" style="width:NaNpx">的</span><span class="ace_cjk" style="width:NaNpx">法</span><span class="ace_cjk" style="width:NaNpx">线</span><span class="ace_cjk" style="width:NaNpx">。</span><span class="ace_cjk" style="width:NaNpx">（</span>NORMA<span class="ace_cjk" style="width:NaNpx">语</span><span class="ace_cjk" style="width:NaNpx">义</span><span class="ace_cjk" style="width:NaNpx">：</span><span class="ace_cjk" style="width:NaNpx">告</span><span class="ace_cjk" style="width:NaNpx">诉</span>unity<span class="ace_cjk" style="width:NaNpx">把</span>"<span class="ace_cjk" style="width:NaNpx">模</span><span class="ace_cjk" style="width:NaNpx">型</span><span class="ace_cjk" style="width:NaNpx">空</span><span class="ace_cjk" style="width:NaNpx">间</span><span class="ace_cjk" style="width:NaNpx">下</span><span class="ace_cjk" style="width:NaNpx">的</span><span class="ace_cjk" style="width:NaNpx">法</span><span class="ace_cjk" style="width:NaNpx">线</span>"<span class="ace_cjk" style="width:NaNpx">赋</span><span class="ace_cjk" style="width:NaNpx">值</span><span class="ace_cjk" style="width:NaNpx">给</span>normal<span class="ace_cjk" style="width:NaNpx">）</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//003<span class="ace_cjk" style="width:NaNpx">、</span><span class="ace_cjk" style="width:NaNpx">获</span><span class="ace_cjk" style="width:NaNpx">取</span><span class="ace_cjk" style="width:NaNpx">纹</span><span class="ace_cjk" style="width:NaNpx">理</span><span class="ace_cjk" style="width:NaNpx">坐</span><span class="ace_cjk" style="width:NaNpx">标</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">float4</span> <span class="ace_identifier">texcoord</span><span class="ace_punctuation ace_operator">:</span><span class="ace_identifier">TEXCOORD0</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//004<span class="ace_cjk" style="width:NaNpx">、</span><span class="ace_cjk" style="width:NaNpx">确</span><span class="ace_cjk" style="width:NaNpx">定</span><span class="ace_cjk" style="width:NaNpx">切</span><span class="ace_cjk" style="width:NaNpx">线</span><span class="ace_cjk" style="width:NaNpx">空</span><span class="ace_cjk" style="width:NaNpx">间</span><span class="ace_cjk" style="width:NaNpx">中</span><span class="ace_cjk" style="width:NaNpx">坐</span><span class="ace_cjk" style="width:NaNpx">标</span><span class="ace_cjk" style="width:NaNpx">轴</span><span class="ace_cjk" style="width:NaNpx">的</span><span class="ace_cjk" style="width:NaNpx">方</span><span class="ace_cjk" style="width:NaNpx">向</span><span class="ace_cjk" style="width:NaNpx">的</span><span class="ace_cjk" style="width:NaNpx">（</span><span class="ace_cjk" style="width:NaNpx">定</span><span class="ace_cjk" style="width:NaNpx">义</span><span class="ace_cjk" style="width:NaNpx">之</span><span class="ace_cjk" style="width:NaNpx">后</span><span class="ace_cjk" style="width:NaNpx">，</span>TANGENT_SPACE_ROTATION<span class="ace_cjk" style="width:NaNpx">可</span><span class="ace_cjk" style="width:NaNpx">以</span><span class="ace_cjk" style="width:NaNpx">用</span><span class="ace_cjk" style="width:NaNpx">）</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">float4</span> <span class="ace_identifier">tangent</span><span class="ace_punctuation ace_operator">:</span><span class="ace_identifier">TANGENT</span><span class="ace_punctuation ace_operator">;</span>         <span class="ace_comment">//tangent.w<span class="ace_cjk" style="width:NaNpx">是</span><span class="ace_cjk" style="width:NaNpx">用</span><span class="ace_cjk" style="width:NaNpx">来</span><span class="ace_cjk" style="width:NaNpx">确</span><span class="ace_cjk" style="width:NaNpx">定</span><span class="ace_cjk" style="width:NaNpx">切</span><span class="ace_cjk" style="width:NaNpx">线</span><span class="ace_cjk" style="width:NaNpx">空</span><span class="ace_cjk" style="width:NaNpx">间</span><span class="ace_cjk" style="width:NaNpx">中</span><span class="ace_cjk" style="width:NaNpx">坐</span><span class="ace_cjk" style="width:NaNpx">标</span><span class="ace_cjk" style="width:NaNpx">轴</span><span class="ace_cjk" style="width:NaNpx">的</span><span class="ace_cjk" style="width:NaNpx">方</span><span class="ace_cjk" style="width:NaNpx">向</span><span class="ace_cjk" style="width:NaNpx">的</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_paren ace_rparen">}</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//02<span class="ace_cjk" style="width:NaNpx">、</span><span class="ace_cjk" style="width:NaNpx">给</span><span class="ace_cjk" style="width:NaNpx">片</span><span class="ace_cjk" style="width:NaNpx">元</span><span class="ace_cjk" style="width:NaNpx">函</span><span class="ace_cjk" style="width:NaNpx">数</span><span class="ace_cjk" style="width:NaNpx">传</span><span class="ace_cjk" style="width:NaNpx">递</span><span class="ace_cjk" style="width:NaNpx">的</span><span class="ace_cjk" style="width:NaNpx">结</span><span class="ace_cjk" style="width:NaNpx">构</span><span class="ace_cjk" style="width:NaNpx">体</span><span class="ace_cjk" style="width:NaNpx">（</span><span class="ace_cjk" style="width:NaNpx">顶</span><span class="ace_cjk" style="width:NaNpx">点</span><span class="ace_cjk" style="width:NaNpx">函</span><span class="ace_cjk" style="width:NaNpx">数</span><span class="ace_cjk" style="width:NaNpx">的</span><span class="ace_cjk" style="width:NaNpx">返</span><span class="ace_cjk" style="width:NaNpx">回</span><span class="ace_cjk" style="width:NaNpx">类</span><span class="ace_cjk" style="width:NaNpx">型</span><span class="ace_cjk" style="width:NaNpx">）</span>——<span class="ace_cjk" style="width:NaNpx">从</span><span class="ace_cjk" style="width:NaNpx">顶</span><span class="ace_cjk" style="width:NaNpx">点</span><span class="ace_cjk" style="width:NaNpx">到</span><span class="ace_cjk" style="width:NaNpx">片</span><span class="ace_cjk" style="width:NaNpx">元</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_keyword">struct</span> <span class="ace_identifier">v2f</span><span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">float4</span> <span class="ace_identifier">position</span><span class="ace_punctuation ace_operator">:</span><span class="ace_identifier">SV_POSITION</span><span class="ace_punctuation ace_operator">;</span>    <span class="ace_comment">//<span class="ace_cjk" style="width:NaNpx">存</span><span class="ace_cjk" style="width:NaNpx">储</span><span class="ace_cjk" style="width:NaNpx">剪</span><span class="ace_cjk" style="width:NaNpx">裁</span><span class="ace_cjk" style="width:NaNpx">空</span><span class="ace_cjk" style="width:NaNpx">间</span><span class="ace_cjk" style="width:NaNpx">下</span><span class="ace_cjk" style="width:NaNpx">的</span><span class="ace_cjk" style="width:NaNpx">顶</span><span class="ace_cjk" style="width:NaNpx">点</span><span class="ace_cjk" style="width:NaNpx">坐</span><span class="ace_cjk" style="width:NaNpx">标</span>        SV_POSITION——"<span class="ace_cjk" style="width:NaNpx">剪</span><span class="ace_cjk" style="width:NaNpx">裁</span><span class="ace_cjk" style="width:NaNpx">空</span><span class="ace_cjk" style="width:NaNpx">间</span><span class="ace_cjk" style="width:NaNpx">下</span><span class="ace_cjk" style="width:NaNpx">的</span><span class="ace_cjk" style="width:NaNpx">顶</span><span class="ace_cjk" style="width:NaNpx">点</span><span class="ace_cjk" style="width:NaNpx">坐</span><span class="ace_cjk" style="width:NaNpx">标</span>"<span class="ace_cjk" style="width:NaNpx">。</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">float3</span> <span class="ace_identifier">light_Dir</span><span class="ace_punctuation ace_operator">:</span><span class="ace_identifier">TEXCOORD0</span><span class="ace_punctuation ace_operator">;</span>     <span class="ace_comment">//<span class="ace_cjk" style="width:NaNpx">切</span><span class="ace_cjk" style="width:NaNpx">线</span><span class="ace_cjk" style="width:NaNpx">空</span><span class="ace_cjk" style="width:NaNpx">间</span><span class="ace_cjk" style="width:NaNpx">下</span><span class="ace_cjk" style="width:NaNpx">平</span><span class="ace_cjk" style="width:NaNpx">行</span><span class="ace_cjk" style="width:NaNpx">光</span><span class="ace_cjk" style="width:NaNpx">的</span><span class="ace_cjk" style="width:NaNpx">方</span><span class="ace_cjk" style="width:NaNpx">向</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">float4</span> <span class="ace_identifier">uv</span><span class="ace_punctuation ace_operator">:</span><span class="ace_identifier">TEXCOORD2</span><span class="ace_punctuation ace_operator">;</span>            <span class="ace_comment">//<span class="ace_cjk" style="width:NaNpx">存</span><span class="ace_cjk" style="width:NaNpx">储</span>uv<span class="ace_cjk" style="width:NaNpx">坐</span><span class="ace_cjk" style="width:NaNpx">标</span>(xy<span class="ace_cjk" style="width:NaNpx">用</span><span class="ace_cjk" style="width:NaNpx">来</span><span class="ace_cjk" style="width:NaNpx">存</span><span class="ace_cjk" style="width:NaNpx">储</span>MainTexture<span class="ace_cjk" style="width:NaNpx">的</span><span class="ace_cjk" style="width:NaNpx">纹</span><span class="ace_cjk" style="width:NaNpx">理</span><span class="ace_cjk" style="width:NaNpx">坐</span><span class="ace_cjk" style="width:NaNpx">标</span><span class="ace_cjk" style="width:NaNpx">，</span>zw<span class="ace_cjk" style="width:NaNpx">用</span><span class="ace_cjk" style="width:NaNpx">来</span><span class="ace_cjk" style="width:NaNpx">存</span><span class="ace_cjk" style="width:NaNpx">储</span>NormalMap<span class="ace_cjk" style="width:NaNpx">的</span><span class="ace_cjk" style="width:NaNpx">纹</span><span class="ace_cjk" style="width:NaNpx">理</span><span class="ace_cjk" style="width:NaNpx">坐</span><span class="ace_cjk" style="width:NaNpx">标</span>)</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_paren ace_rparen">}</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//<span class="ace_cjk" style="width:NaNpx">以</span><span class="ace_cjk" style="width:NaNpx">下</span><span class="ace_cjk" style="width:NaNpx">两</span><span class="ace_cjk" style="width:NaNpx">个</span><span class="ace_cjk" style="width:NaNpx">函</span><span class="ace_cjk" style="width:NaNpx">数</span><span class="ace_cjk" style="width:NaNpx">，</span><span class="ace_cjk" style="width:NaNpx">系</span><span class="ace_cjk" style="width:NaNpx">统</span><span class="ace_cjk" style="width:NaNpx">自</span><span class="ace_cjk" style="width:NaNpx">动</span><span class="ace_cjk" style="width:NaNpx">调</span><span class="ace_cjk" style="width:NaNpx">用</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//01<span class="ace_cjk" style="width:NaNpx">、</span><span class="ace_cjk" style="width:NaNpx">顶</span><span class="ace_cjk" style="width:NaNpx">点</span><span class="ace_cjk" style="width:NaNpx">函</span><span class="ace_cjk" style="width:NaNpx">数</span>(<span class="ace_cjk" style="width:NaNpx">系</span><span class="ace_cjk" style="width:NaNpx">统</span><span class="ace_cjk" style="width:NaNpx">给</span><span class="ace_cjk" style="width:NaNpx">每</span><span class="ace_cjk" style="width:NaNpx">个</span><span class="ace_cjk" style="width:NaNpx">顶</span><span class="ace_cjk" style="width:NaNpx">点</span><span class="ace_cjk" style="width:NaNpx">调</span><span class="ace_cjk" style="width:NaNpx">用</span><span class="ace_cjk" style="width:NaNpx">，</span><span class="ace_cjk" style="width:NaNpx">返</span><span class="ace_cjk" style="width:NaNpx">回</span><span class="ace_cjk" style="width:NaNpx">结</span><span class="ace_cjk" style="width:NaNpx">构</span><span class="ace_cjk" style="width:NaNpx">体</span><span class="ace_cjk" style="width:NaNpx">）</span><span class="ace_cjk" style="width:NaNpx">（</span><span class="ace_cjk" style="width:NaNpx">这</span><span class="ace_cjk" style="width:NaNpx">个</span><span class="ace_cjk" style="width:NaNpx">结</span><span class="ace_cjk" style="width:NaNpx">构</span><span class="ace_cjk" style="width:NaNpx">体</span><span class="ace_cjk" style="width:NaNpx">是</span><span class="ace_cjk" style="width:NaNpx">给</span><span class="ace_cjk" style="width:NaNpx">片</span><span class="ace_cjk" style="width:NaNpx">元</span><span class="ace_cjk" style="width:NaNpx">函</span><span class="ace_cjk" style="width:NaNpx">数</span><span class="ace_cjk" style="width:NaNpx">传</span><span class="ace_cjk" style="width:NaNpx">递</span><span class="ace_cjk" style="width:NaNpx">的</span><span class="ace_cjk" style="width:NaNpx">结</span><span class="ace_cjk" style="width:NaNpx">构</span><span class="ace_cjk" style="width:NaNpx">体</span>)</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">v2f</span> <span class="ace_identifier">vert</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">a2v</span> <span class="ace_identifier">v</span><span class="ace_paren ace_rparen">)</span><span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">v2f</span> <span class="ace_identifier">f</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">f</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">position</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_identifier">UnityObjectToClipPos</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">v</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">vertex</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>        <span class="ace_comment">//<span class="ace_cjk" style="width:NaNpx">世</span><span class="ace_cjk" style="width:NaNpx">界</span><span class="ace_cjk" style="width:NaNpx">顶</span><span class="ace_cjk" style="width:NaNpx">点</span><span class="ace_cjk" style="width:NaNpx">，</span><span class="ace_cjk" style="width:NaNpx">从</span><span class="ace_cjk" style="width:NaNpx">模</span><span class="ace_cjk" style="width:NaNpx">型</span><span class="ace_cjk" style="width:NaNpx">空</span><span class="ace_cjk" style="width:NaNpx">间</span><span class="ace_cjk" style="width:NaNpx">站</span><span class="ace_cjk" style="width:NaNpx">换</span><span class="ace_cjk" style="width:NaNpx">到</span><span class="ace_cjk" style="width:NaNpx">世</span><span class="ace_cjk" style="width:NaNpx">间</span><span class="ace_cjk" style="width:NaNpx">空</span><span class="ace_cjk" style="width:NaNpx">间</span><span class="ace_cjk" style="width:NaNpx">转</span><span class="ace_cjk" style="width:NaNpx">换</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">f</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">uv</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">xy</span><span class="ace_keyword ace_operator">=</span> <span class="ace_identifier">v</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">texcoord</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">xy</span><span class="ace_keyword ace_operator">*</span><span class="ace_identifier">_MainTexture_ST</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">xy</span> <span class="ace_keyword ace_operator">+</span> <span class="ace_identifier">_MainTexture_ST</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">zw</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">f</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">uv</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">zw</span><span class="ace_keyword ace_operator">=</span> <span class="ace_identifier">v</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">texcoord</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">xy</span><span class="ace_keyword ace_operator">*</span><span class="ace_identifier">_NormalMap_ST</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">xy</span><span class="ace_keyword ace_operator">+</span><span class="ace_identifier">_NormalMap_ST</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">zw</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">TANGENT_SPACE_ROTATION</span><span class="ace_punctuation ace_operator">;</span><span class="ace_comment">//<span class="ace_cjk" style="width:NaNpx">调</span><span class="ace_cjk" style="width:NaNpx">用</span><span class="ace_cjk" style="width:NaNpx">这</span><span class="ace_cjk" style="width:NaNpx">个</span><span class="ace_cjk" style="width:NaNpx">宏</span><span class="ace_cjk" style="width:NaNpx">之</span><span class="ace_cjk" style="width:NaNpx">后</span><span class="ace_cjk" style="width:NaNpx">，</span><span class="ace_cjk" style="width:NaNpx">会</span><span class="ace_cjk" style="width:NaNpx">得</span><span class="ace_cjk" style="width:NaNpx">到</span><span class="ace_cjk" style="width:NaNpx">一</span><span class="ace_cjk" style="width:NaNpx">个</span><span class="ace_cjk" style="width:NaNpx">矩</span><span class="ace_cjk" style="width:NaNpx">阵</span><span class="ace_cjk" style="width:NaNpx">，</span>rotation<span class="ace_cjk" style="width:NaNpx">这</span><span class="ace_cjk" style="width:NaNpx">个</span><span class="ace_cjk" style="width:NaNpx">矩</span><span class="ace_cjk" style="width:NaNpx">阵</span><span class="ace_cjk" style="width:NaNpx">用</span><span class="ace_cjk" style="width:NaNpx">来</span><span class="ace_cjk" style="width:NaNpx">把</span><span class="ace_cjk" style="width:NaNpx">模</span><span class="ace_cjk" style="width:NaNpx">型</span><span class="ace_cjk" style="width:NaNpx">空</span><span class="ace_cjk" style="width:NaNpx">间</span><span class="ace_cjk" style="width:NaNpx">下</span><span class="ace_cjk" style="width:NaNpx">的</span><span class="ace_cjk" style="width:NaNpx">方</span><span class="ace_cjk" style="width:NaNpx">向</span><span class="ace_cjk" style="width:NaNpx">转</span><span class="ace_cjk" style="width:NaNpx">换</span><span class="ace_cjk" style="width:NaNpx">成</span><span class="ace_cjk" style="width:NaNpx">切</span><span class="ace_cjk" style="width:NaNpx">线</span><span class="ace_cjk" style="width:NaNpx">空</span><span class="ace_cjk" style="width:NaNpx">间</span><span class="ace_cjk" style="width:NaNpx">下</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//ObjSpaceLightDir(v.vertex);//<span class="ace_cjk" style="width:NaNpx">得</span><span class="ace_cjk" style="width:NaNpx">到</span><span class="ace_cjk" style="width:NaNpx">模</span><span class="ace_cjk" style="width:NaNpx">型</span><span class="ace_cjk" style="width:NaNpx">空</span><span class="ace_cjk" style="width:NaNpx">间</span><span class="ace_cjk" style="width:NaNpx">下</span><span class="ace_cjk" style="width:NaNpx">的</span><span class="ace_cjk" style="width:NaNpx">平</span><span class="ace_cjk" style="width:NaNpx">行</span><span class="ace_cjk" style="width:NaNpx">光</span><span class="ace_cjk" style="width:NaNpx">方</span><span class="ace_cjk" style="width:NaNpx">向</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">f</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">light_Dir</span><span class="ace_keyword ace_operator">=</span><span class="ace_identifier">mul</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">rotation</span><span class="ace_punctuation ace_operator">,</span><span class="ace_identifier">ObjSpaceLightDir</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">v</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">vertex</span><span class="ace_paren ace_rparen">))</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_keyword">return</span> <span class="ace_identifier">f</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//<span class="ace_cjk" style="width:NaNpx">把</span><span class="ace_cjk" style="width:NaNpx">所</span><span class="ace_cjk" style="width:NaNpx">有</span><span class="ace_cjk" style="width:NaNpx">根</span><span class="ace_cjk" style="width:NaNpx">法</span><span class="ace_cjk" style="width:NaNpx">线</span><span class="ace_cjk" style="width:NaNpx">方</span><span class="ace_cjk" style="width:NaNpx">向</span><span class="ace_cjk" style="width:NaNpx">有</span><span class="ace_cjk" style="width:NaNpx">关</span><span class="ace_cjk" style="width:NaNpx">的</span><span class="ace_cjk" style="width:NaNpx">运</span><span class="ace_cjk" style="width:NaNpx">算</span><span class="ace_cjk" style="width:NaNpx">都</span><span class="ace_cjk" style="width:NaNpx">放</span><span class="ace_cjk" style="width:NaNpx">在</span><span class="ace_cjk" style="width:NaNpx">切</span><span class="ace_cjk" style="width:NaNpx">线</span><span class="ace_cjk" style="width:NaNpx">空</span><span class="ace_cjk" style="width:NaNpx">间</span><span class="ace_cjk" style="width:NaNpx">下</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//<span class="ace_cjk" style="width:NaNpx">从</span><span class="ace_cjk" style="width:NaNpx">法</span><span class="ace_cjk" style="width:NaNpx">线</span><span class="ace_cjk" style="width:NaNpx">贴</span><span class="ace_cjk" style="width:NaNpx">图</span><span class="ace_cjk" style="width:NaNpx">里</span><span class="ace_cjk" style="width:NaNpx">面</span><span class="ace_cjk" style="width:NaNpx">取</span><span class="ace_cjk" style="width:NaNpx">得</span><span class="ace_cjk" style="width:NaNpx">的</span><span class="ace_cjk" style="width:NaNpx">法</span><span class="ace_cjk" style="width:NaNpx">线</span><span class="ace_cjk" style="width:NaNpx">方</span><span class="ace_cjk" style="width:NaNpx">向</span><span class="ace_cjk" style="width:NaNpx">是</span><span class="ace_cjk" style="width:NaNpx">在</span><span class="ace_cjk" style="width:NaNpx">切</span><span class="ace_cjk" style="width:NaNpx">线</span><span class="ace_cjk" style="width:NaNpx">空</span><span class="ace_cjk" style="width:NaNpx">间</span><span class="ace_cjk" style="width:NaNpx">下</span><span class="ace_cjk" style="width:NaNpx">的</span>  ---"<span class="ace_cjk" style="width:NaNpx">切</span><span class="ace_cjk" style="width:NaNpx">线</span><span class="ace_cjk" style="width:NaNpx">和</span><span class="ace_cjk" style="width:NaNpx">法</span><span class="ace_cjk" style="width:NaNpx">线</span><span class="ace_cjk" style="width:NaNpx">是</span><span class="ace_cjk" style="width:NaNpx">垂</span><span class="ace_cjk" style="width:NaNpx">直</span><span class="ace_cjk" style="width:NaNpx">的</span>"---</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//02<span class="ace_cjk" style="width:NaNpx">、</span><span class="ace_cjk" style="width:NaNpx">片</span><span class="ace_cjk" style="width:NaNpx">元</span><span class="ace_cjk" style="width:NaNpx">函</span><span class="ace_cjk" style="width:NaNpx">数</span>(<span class="ace_cjk" style="width:NaNpx">系</span><span class="ace_cjk" style="width:NaNpx">统</span><span class="ace_cjk" style="width:NaNpx">给</span><span class="ace_cjk" style="width:NaNpx">屏</span><span class="ace_cjk" style="width:NaNpx">幕</span><span class="ace_cjk" style="width:NaNpx">上</span><span class="ace_cjk" style="width:NaNpx">的</span><span class="ace_cjk" style="width:NaNpx">每</span><span class="ace_cjk" style="width:NaNpx">个</span><span class="ace_cjk" style="width:NaNpx">像</span><span class="ace_cjk" style="width:NaNpx">素</span><span class="ace_cjk" style="width:NaNpx">点</span><span class="ace_cjk" style="width:NaNpx">调</span><span class="ace_cjk" style="width:NaNpx">用</span><span class="ace_cjk" style="width:NaNpx">，</span><span class="ace_cjk" style="width:NaNpx">调</span><span class="ace_cjk" style="width:NaNpx">用</span><span class="ace_cjk" style="width:NaNpx">次</span><span class="ace_cjk" style="width:NaNpx">数</span><span class="ace_cjk" style="width:NaNpx">会</span><span class="ace_cjk" style="width:NaNpx">比</span><span class="ace_cjk" style="width:NaNpx">较</span><span class="ace_cjk" style="width:NaNpx">多</span><span class="ace_cjk" style="width:NaNpx">，</span><span class="ace_cjk" style="width:NaNpx">返</span><span class="ace_cjk" style="width:NaNpx">回</span>fixed4<span class="ace_cjk" style="width:NaNpx">类</span><span class="ace_cjk" style="width:NaNpx">型</span><span class="ace_cjk" style="width:NaNpx">值</span><span class="ace_cjk" style="width:NaNpx">，</span><span class="ace_cjk" style="width:NaNpx">是</span><span class="ace_cjk" style="width:NaNpx">输</span><span class="ace_cjk" style="width:NaNpx">出</span><span class="ace_cjk" style="width:NaNpx">到</span><span class="ace_cjk" style="width:NaNpx">屏</span><span class="ace_cjk" style="width:NaNpx">幕</span><span class="ace_cjk" style="width:NaNpx">上</span><span class="ace_cjk" style="width:NaNpx">的</span><span class="ace_cjk" style="width:NaNpx">颜</span><span class="ace_cjk" style="width:NaNpx">色</span>)</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">fixed4</span> <span class="ace_identifier">frag</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">v2f</span> <span class="ace_identifier">f</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">:</span><span class="ace_identifier">SV_Target</span><span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//<span class="ace_cjk" style="width:NaNpx">法</span><span class="ace_cjk" style="width:NaNpx">线</span><span class="ace_cjk" style="width:NaNpx">的</span><span class="ace_cjk" style="width:NaNpx">方</span><span class="ace_cjk" style="width:NaNpx">向</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//fixed3 normal_dir=normalize(f.worldNormal);</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//<span class="ace_cjk" style="width:NaNpx">根</span><span class="ace_cjk" style="width:NaNpx">据</span><span class="ace_cjk" style="width:NaNpx">颜</span><span class="ace_cjk" style="width:NaNpx">色</span><span class="ace_cjk" style="width:NaNpx">值</span><span class="ace_cjk" style="width:NaNpx">获</span><span class="ace_cjk" style="width:NaNpx">取</span><span class="ace_cjk" style="width:NaNpx">法</span><span class="ace_cjk" style="width:NaNpx">线</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">fixed4</span> <span class="ace_identifier">normalColor</span><span class="ace_keyword ace_operator">=</span><span class="ace_identifier">tex2D</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">_NormalMap</span><span class="ace_punctuation ace_operator">,</span><span class="ace_identifier">f</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">uv</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">zw</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span><span class="ace_comment">//<span class="ace_cjk" style="width:NaNpx">得</span><span class="ace_cjk" style="width:NaNpx">到</span><span class="ace_cjk" style="width:NaNpx">像</span><span class="ace_cjk" style="width:NaNpx">素</span><span class="ace_cjk" style="width:NaNpx">值</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//<span class="ace_cjk" style="width:NaNpx">获</span><span class="ace_cjk" style="width:NaNpx">取</span><span class="ace_cjk" style="width:NaNpx">法</span><span class="ace_cjk" style="width:NaNpx">线</span><span class="ace_cjk" style="width:NaNpx">的</span><span class="ace_cjk" style="width:NaNpx">方</span><span class="ace_cjk" style="width:NaNpx">向</span>(<span class="ace_cjk" style="width:NaNpx">切</span><span class="ace_cjk" style="width:NaNpx">线</span><span class="ace_cjk" style="width:NaNpx">空</span><span class="ace_cjk" style="width:NaNpx">间</span><span class="ace_cjk" style="width:NaNpx">下</span>)</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">fixed3</span> <span class="ace_identifier">tangentNormalDir</span><span class="ace_keyword ace_operator">=</span><span class="ace_identifier">UnpackNormal</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">normalColor</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span><span class="ace_comment">//<span class="ace_cjk" style="width:NaNpx">正</span><span class="ace_cjk" style="width:NaNpx">确</span><span class="ace_cjk" style="width:NaNpx">读</span><span class="ace_cjk" style="width:NaNpx">取</span><span class="ace_cjk" style="width:NaNpx">法</span><span class="ace_cjk" style="width:NaNpx">线</span><span class="ace_cjk" style="width:NaNpx">的</span><span class="ace_cjk" style="width:NaNpx">方</span><span class="ace_cjk" style="width:NaNpx">式</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">tangentNormalDir</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">xy</span><span class="ace_keyword ace_operator">=</span><span class="ace_identifier">tangentNormalDir</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">xy</span><span class="ace_keyword ace_operator">*</span><span class="ace_identifier">_BumpScale</span><span class="ace_punctuation ace_operator">;</span><span class="ace_comment">//<span class="ace_cjk" style="width:NaNpx">控</span><span class="ace_cjk" style="width:NaNpx">制</span><span class="ace_cjk" style="width:NaNpx">法</span><span class="ace_cjk" style="width:NaNpx">线</span>xy<span class="ace_cjk" style="width:NaNpx">力</span><span class="ace_cjk" style="width:NaNpx">度</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//<span class="ace_cjk" style="width:NaNpx">获</span><span class="ace_cjk" style="width:NaNpx">取</span><span class="ace_cjk" style="width:NaNpx">光</span><span class="ace_cjk" style="width:NaNpx">照</span><span class="ace_cjk" style="width:NaNpx">的</span><span class="ace_cjk" style="width:NaNpx">方</span><span class="ace_cjk" style="width:NaNpx">向</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">fixed3</span> <span class="ace_identifier">lightDir</span> <span class="ace_keyword ace_operator">=</span><span class="ace_identifier">normalize</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">f</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">light_Dir</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//<span class="ace_cjk" style="width:NaNpx">环</span><span class="ace_cjk" style="width:NaNpx">境</span><span class="ace_cjk" style="width:NaNpx">光</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">fixed3</span> <span class="ace_identifier">ambient</span><span class="ace_keyword ace_operator">=</span><span class="ace_identifier">UNITY_LIGHTMODEL_AMBIENT</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">rgb</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//<span class="ace_cjk" style="width:NaNpx">生</span><span class="ace_cjk" style="width:NaNpx">成</span>——<span class="ace_cjk" style="width:NaNpx">漫</span><span class="ace_cjk" style="width:NaNpx">反</span><span class="ace_cjk" style="width:NaNpx">射</span><span class="ace_cjk" style="width:NaNpx">颜</span><span class="ace_cjk" style="width:NaNpx">色</span><span class="ace_cjk" style="width:NaNpx">（</span><span class="ace_cjk" style="width:NaNpx">根</span><span class="ace_cjk" style="width:NaNpx">据</span><span class="ace_cjk" style="width:NaNpx">半</span><span class="ace_cjk" style="width:NaNpx">兰</span><span class="ace_cjk" style="width:NaNpx">伯</span><span class="ace_cjk" style="width:NaNpx">特</span><span class="ace_cjk" style="width:NaNpx">光</span><span class="ace_cjk" style="width:NaNpx">照</span><span class="ace_cjk" style="width:NaNpx">模</span><span class="ace_cjk" style="width:NaNpx">型</span><span class="ace_cjk" style="width:NaNpx">生</span><span class="ace_cjk" style="width:NaNpx">成</span><span class="ace_cjk" style="width:NaNpx">！</span><span class="ace_cjk" style="width:NaNpx">）</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//<span class="ace_cjk" style="width:NaNpx">使</span><span class="ace_cjk" style="width:NaNpx">用</span><span class="ace_cjk" style="width:NaNpx">半</span><span class="ace_cjk" style="width:NaNpx">兰</span><span class="ace_cjk" style="width:NaNpx">伯</span><span class="ace_cjk" style="width:NaNpx">特</span><span class="ace_cjk" style="width:NaNpx">光</span><span class="ace_cjk" style="width:NaNpx">照</span><span class="ace_cjk" style="width:NaNpx">模</span><span class="ace_cjk" style="width:NaNpx">型</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_keyword">float</span> <span class="ace_identifier">half_lambert</span><span class="ace_keyword ace_operator">=</span><span class="ace_identifier">dot</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">tangentNormalDir</span><span class="ace_punctuation ace_operator">,</span> <span class="ace_identifier">lightDir</span><span class="ace_paren ace_rparen">)</span><span class="ace_keyword ace_operator">*</span><span class="ace_constant ace_numeric">0.5+0.5</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//<span class="ace_cjk" style="width:NaNpx">取</span><span class="ace_cjk" style="width:NaNpx">得</span><span class="ace_cjk" style="width:NaNpx">纹</span><span class="ace_cjk" style="width:NaNpx">理</span><span class="ace_cjk" style="width:NaNpx">坐</span><span class="ace_cjk" style="width:NaNpx">标</span><span class="ace_cjk" style="width:NaNpx">对</span><span class="ace_cjk" style="width:NaNpx">应</span><span class="ace_cjk" style="width:NaNpx">的</span><span class="ace_cjk" style="width:NaNpx">图</span><span class="ace_cjk" style="width:NaNpx">片</span><span class="ace_cjk" style="width:NaNpx">颜</span><span class="ace_cjk" style="width:NaNpx">色</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">fixed4</span> <span class="ace_identifier">texColor</span><span class="ace_keyword ace_operator">=</span><span class="ace_identifier">tex2D</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">_MainTexture</span><span class="ace_punctuation ace_operator">,</span><span class="ace_identifier">f</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">uv</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">xy</span><span class="ace_paren ace_rparen">)</span><span class="ace_keyword ace_operator">*</span><span class="ace_identifier">_Color</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">fixed3</span> <span class="ace_identifier">diffuse</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_identifier">_LightColor0</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">rgb</span> <span class="ace_keyword ace_operator">*</span><span class="ace_identifier">texColor</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">rgb</span><span class="ace_keyword ace_operator">*</span><span class="ace_identifier">half_lambert</span><span class="ace_punctuation ace_operator">;</span><span class="ace_comment">//<span class="ace_cjk" style="width:NaNpx">取</span><span class="ace_cjk" style="width:NaNpx">得</span><span class="ace_cjk" style="width:NaNpx">漫</span><span class="ace_cjk" style="width:NaNpx">反</span><span class="ace_cjk" style="width:NaNpx">射</span><span class="ace_cjk" style="width:NaNpx">颜</span><span class="ace_cjk" style="width:NaNpx">色</span><span class="ace_cjk" style="width:NaNpx">（</span><span class="ace_cjk" style="width:NaNpx">两</span><span class="ace_cjk" style="width:NaNpx">个</span><span class="ace_cjk" style="width:NaNpx">颜</span><span class="ace_cjk" style="width:NaNpx">色</span><span class="ace_cjk" style="width:NaNpx">融</span><span class="ace_cjk" style="width:NaNpx">合</span><span class="ace_cjk" style="width:NaNpx">，</span><span class="ace_cjk" style="width:NaNpx">就</span><span class="ace_cjk" style="width:NaNpx">是</span><span class="ace_cjk" style="width:NaNpx">两</span><span class="ace_cjk" style="width:NaNpx">个</span><span class="ace_cjk" style="width:NaNpx">颜</span><span class="ace_cjk" style="width:NaNpx">色</span><span class="ace_cjk" style="width:NaNpx">相</span><span class="ace_cjk" style="width:NaNpx">乘</span><span class="ace_cjk" style="width:NaNpx">）</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//<span class="ace_cjk" style="width:NaNpx">总</span><span class="ace_cjk" style="width:NaNpx">体</span><span class="ace_cjk" style="width:NaNpx">显</span><span class="ace_cjk" style="width:NaNpx">示</span><span class="ace_cjk" style="width:NaNpx">的</span><span class="ace_cjk" style="width:NaNpx">颜</span><span class="ace_cjk" style="width:NaNpx">色</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">fixed3</span> <span class="ace_identifier">tempColor</span><span class="ace_keyword ace_operator">=</span><span class="ace_identifier">diffuse</span><span class="ace_keyword ace_operator">+</span><span class="ace_identifier">ambient</span><span class="ace_keyword ace_operator">*</span><span class="ace_identifier">texColor</span><span class="ace_punctuation ace_operator">;</span><span class="ace_comment">//<span class="ace_cjk" style="width:NaNpx">颜</span><span class="ace_cjk" style="width:NaNpx">色</span><span class="ace_cjk" style="width:NaNpx">叠</span><span class="ace_cjk" style="width:NaNpx">加</span><span class="ace_cjk" style="width:NaNpx">是</span><span class="ace_cjk" style="width:NaNpx">颜</span><span class="ace_cjk" style="width:NaNpx">色</span><span class="ace_cjk" style="width:NaNpx">相</span><span class="ace_cjk" style="width:NaNpx">加</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">// return fixed4(tempColor,_GOAlpha);</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//return fixed4(tempColor,texColor.a);</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_keyword">return</span> <span class="ace_identifier">fixed4</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">tempColor</span><span class="ace_punctuation ace_operator">,</span><span class="ace_identifier">_GOAlpha</span><span class="ace_keyword ace_operator">*</span><span class="ace_identifier">texColor</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">a</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">ENDCG</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_identifier">Fallback</span> <span class="ace_string ace_start">"</span><span class="ace_string">Specular</span><span class="ace_string ace_end">"</span><span class="ace_comment">//<span class="ace_cjk" style="width:NaNpx">后</span><span class="ace_cjk" style="width:NaNpx">备</span><span class="ace_cjk" style="width:NaNpx">方</span><span class="ace_cjk" style="width:NaNpx">案</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span>
</div></div></div></div><div class="cell text-cell"><b></b><br><b></b><div></div><b></b></div></div>
      <script>document.body.onkeyup = function(e) {
if (e.keyCode === 39) window.location.href = 'Shader着色器开发——01基础入门.html';
if (e.keyCode === 37) window.location.href = 'StrangeIoc框架.html';
}</script>
    </body>
    </html>
  