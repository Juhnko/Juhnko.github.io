
    <!DOCTYPE html>
    <html>
    <head>
      <meta charset="utf-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <!-- common.css -->
      <style>* {-webkit-tap-highlight-color: rgba(0,0,0,0);}html {-webkit-text-size-adjust: none;}body {font-family: -apple-system, Helvetica, Arial, sans-serif;margin: 0;padding: 20px;color: #333;word-wrap: break-word;}h1, h2, h3, h4, h5, h6 {line-height: 1.1;}img {max-width: 100% !important;height: auto;}blockquote {margin: 0;padding: 0 15px;color: #777;border-left: 4px solid #ddd;}hr {background-color: #ddd;border: 0;height: 1px;margin: 15px 0;}code {font-family: Menlo, Consolas, 'Ubuntu Mono', Monaco, 'source-code-pro', monospace;line-height: 1.4;margin: 0;padding: 0.2em 0;font-size: 90%;background-color: rgba(0,0,0,0.04);border-radius: 3px;}pre > code {margin: 0;padding: 0;font-size: 100%;word-break: normal;background: transparent;border: 0;}ol {list-style-type: decimal;}ol ol, ul ol {list-style-type: lower-latin;}ol ol ol, ul ol ol, ul ul ol, ol ul ol {list-style-type: lower-roman;}table {border-spacing: 0;border-collapse: collapse;margin-top: 0;margin-bottom: 16px;}table th {font-weight: bold;}table th, table td {padding: 6px 13px;border: 1px solid #ddd;}table tr {border-top: 1px solid #ccc;}table tr:nth-child(even) {background-color: #f8f8f8;}input[type="checkbox"] {cursor: default;margin-right: 0.5em;font-size: 13px;}.task-list-item {list-style-type: none;}.task-list-item+.task-list-item {margin-top: 3px;}.task-list-item input {float: left;margin: 0.3em 1em 0.25em -1.6em;vertical-align: middle;}#tag-field {margin: 8px 2px 10px;}#tag-field .tag {display: inline-block;background: #cadff3;border-radius: 4px;padding: 1px 8px;color: black;font-size: 12px;margin-right: 10px;line-height: 1.4;}</style>
      <!-- ace-static.css -->
      <style>.ace_static_highlight {white-space: pre-wrap;}.ace_static_highlight .ace_gutter {width: 2em;text-align: right;padding: 0 3px 0 0;margin-right: 3px;}.ace_static_highlight.ace_show_gutter > .ace_line {padding-left: 2.6em;}.ace_static_highlight .ace_line {position: relative;}.ace_static_highlight .ace_gutter-cell {-moz-user-select: -moz-none;-khtml-user-select: none;-webkit-user-select: none;user-select: none;top: 0;bottom: 0;left: 0;position: absolute;}.ace_static_highlight .ace_gutter-cell:before {content: counter(ace_line, decimal);counter-increment: ace_line;}.ace_static_highlight {counter-reset: ace_line;}</style>
      <style>.ace-chrome .ace_gutter {background: #ebebeb;color: #333;overflow : hidden;}.ace-chrome .ace_print-margin {width: 1px;background: #e8e8e8;}.ace-chrome {background-color: #FFFFFF;color: black;}.ace-chrome .ace_cursor {color: black;}.ace-chrome .ace_invisible {color: rgb(191, 191, 191);}.ace-chrome .ace_constant.ace_buildin {color: rgb(88, 72, 246);}.ace-chrome .ace_constant.ace_language {color: rgb(88, 92, 246);}.ace-chrome .ace_constant.ace_library {color: rgb(6, 150, 14);}.ace-chrome .ace_invalid {background-color: rgb(153, 0, 0);color: white;}.ace-chrome .ace_fold {}.ace-chrome .ace_support.ace_function {color: rgb(60, 76, 114);}.ace-chrome .ace_support.ace_constant {color: rgb(6, 150, 14);}.ace-chrome .ace_support.ace_type,.ace-chrome .ace_support.ace_class.ace-chrome .ace_support.ace_other {color: rgb(109, 121, 222);}.ace-chrome .ace_variable.ace_parameter {font-style:italic;color:#FD971F;}.ace-chrome .ace_keyword.ace_operator {color: rgb(104, 118, 135);}.ace-chrome .ace_comment {color: #236e24;}.ace-chrome .ace_comment.ace_doc {color: #236e24;}.ace-chrome .ace_comment.ace_doc.ace_tag {color: #236e24;}.ace-chrome .ace_constant.ace_numeric {color: rgb(0, 0, 205);}.ace-chrome .ace_variable {color: rgb(49, 132, 149);}.ace-chrome .ace_xml-pe {color: rgb(104, 104, 91);}.ace-chrome .ace_entity.ace_name.ace_function {color: #0000A2;}.ace-chrome .ace_heading {color: rgb(12, 7, 255);}.ace-chrome .ace_list {color:rgb(185, 6, 144);}.ace-chrome .ace_marker-layer .ace_selection {background: rgb(181, 213, 255);}.ace-chrome .ace_marker-layer .ace_step {background: rgb(252, 255, 0);}.ace-chrome .ace_marker-layer .ace_stack {background: rgb(164, 229, 101);}.ace-chrome .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid rgb(192, 192, 192);}.ace-chrome .ace_marker-layer .ace_active-line {background: rgba(0, 0, 0, 0.07);}.ace-chrome .ace_gutter-active-line {background-color : #dcdcdc;}.ace-chrome .ace_marker-layer .ace_selected-word {background: rgb(250, 250, 255);border: 1px solid rgb(200, 200, 250);}.ace-chrome .ace_storage,.ace-chrome .ace_keyword,.ace-chrome .ace_meta.ace_tag {color: rgb(147, 15, 128);}.ace-chrome .ace_string.ace_regex {color: rgb(255, 0, 0)}.ace-chrome .ace_string {color: #1A1AA6;}.ace-chrome .ace_entity.ace_other.ace_attribute-name {color: #994409;}.ace-chrome .ace_indent-guide {background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y;}</style>
      <!-- export.css -->
      <style>
        body{margin:0 auto;max-width:800px;line-height:1.4}
        #nav{margin:5px 0 10px;font-size:15px}
        #titlearea{border-bottom:1px solid #ccc;font-size:17px;padding:10px 0;}
        #contentarea{font-size:15px;margin:16px 0}
        .cell{outline:0;min-height:20px;margin:5px 0;padding:5px 0;}
        .code-cell{font-family:Menlo,Consolas,'Ubuntu Mono',Monaco,'source-code-pro',monospace;font-size:12px;}
        .latex-cell{white-space:pre-wrap;}
      </style>
      <!-- User CSS -->
      <style> .text-cell {font-size: 15px;}.code-cell {font-size: 12px;}.markdown-cell {font-size: 15px;}.latex-cell {font-size: 15px;}</style>
    </head>
    <body>
      <div id="nav"><div>Next: <a href='C#高级进阶教程_12_异步和多线程（委托的异步使用）.html'>C#高级进阶教程_12_异步和多线程（委托的异步使用）</a>, Up: <a href='index.html'>Index</a></div></div>
      <div id="titlearea">
        <h2>NHibernate基础入门应用</h2>
      </div>
      <div id="contentarea"><div class="cell text-cell"><h3><b>对象/关系数据库的映射</b>。（object/relational mapping，ORM） &nbsp;——类和表的映射（操作数据库就像操作对象一样）</h3></div><div class="cell text-cell"><b>1、基本介绍</b></div><div class="cell text-cell"><div>NHibernate是一个面向.NET环境的对象/关系数据库映射工具。</div><div><b><font color="#323232" style="background-color: rgb(254, 250, 0);">对象/关系数据库映射</font></b>（object / relational mapping，<b>ORM</b>）这个术语表示一种技术，用来把<b>对象模型</b>表示的对象映射到基于SQL的关系<b>模型数据结构</b>中去。</div></div><div class="cell text-cell"><div>NHibernate不仅仅管理.NET类到数据库表的映射（包括.NET 数据类型到SQL数据类型的映射），还提供数据查询和获取数据的方法，可以大幅度减少开发时人工使用SQL和ADO.NET处理数据的时间。</div></div><div class="cell text-cell"><div>NHibernate的目标主要是用于与数据持久化相关的编程任务，能够使开发人员从原来枯燥的SQL语句的编写中解放出来，解放出来的精力可以让开发人员投入到业务逻辑的实现上。对于以数据为中心的程序，开发人员往往是在数据库中使用存储过程来实现商业逻辑，这种情况下NHibernate可能不是最好的解决方案，但对于那些基于.NET，并且能够实现OO业务模型和商业逻辑的中间层应用，NHibernate是最有用的。NHibernate可以帮助用户消除或者包装那些针对特定厂商的SQL代码，并且帮用户把结果集从表格式的表示形式转换成一系列的对象。</div></div><div class="cell text-cell"><div>Hibernate是一个目前应用的最广泛的开放源代码的对象关系映射框架，它对Java的JDBC（类似于ADO.Net）进行了非常轻量级的对象封装，使得程序员可以随心所欲的使用对象编程思维来操纵数据库。</div></div><div class="cell text-cell"><div>NHibernate 是一个基于.Net 的针对关系型数据库的对象持久化类库。</div></div><div class="cell text-cell"><div>NHibernate 从数据库底层来持久化你的.Net 对象到关系型数据库。NHibernate 为你处理这些，远胜于你不得不写SQL去从数据库存取对象。你的代码仅仅和对象关联，NHibernat 自动产生SQL语句，并确保对象提交到正确的表和字段中去。</div></div><div class="cell text-cell"><b>2、<span style="font-family: arial, 宋体, sans-serif; font-size: 14px; orphans: 2; text-indent: 28px; widows: 2; background-color: rgb(255, 255, 255);">NHibernate中的</span>基本概念</b></div><div class="cell text-cell"><div>NHibernate体系结构如图1所示。</div><div>它体现了NHibernate如何<b>使用数据库和配置文件数据</b>来为应用程序提供持久化服务（和持久化的对象）。</div><div><br></div><div><b><font color="#323232" style="background-color: rgb(254, 250, 0);">SessionFactory(NHibernate.IsessionFactory)：</font></b></div><div>它是Session的工厂，是ConnectionProvider的客户。可以持有一个可选的（第二级）数据缓存，可以在进程级别或集群级别保存的可以在事物中重用的数据。</div><div>会话(NHibernate.ISession):单线程，生命期较短的对象，代表应用程序和持久化层之间的一次对话。封装了一个ADO.NET连接，也是Transaction的工厂。保存有必需的（第一级）持久化对象的缓存，用于遍历对象图，或者通过标识符查找对象。</div><div><br></div><div><b><font color="#323232" style="background-color: rgb(254, 250, 0);">持久化对象(Persistent)及其集合(Collections):</font></b></div><div>生命期较短的单线程的对象，包含了持久化状态和商业功能。这些可能是普通的对象，唯一特别的是现在从属于且仅从属于一个Session。一旦Session被关闭，它们都将从Session中取消联系，可以在任何程序层自由使用（比如，直接作为传送到表现层的DTO,数据传输对象）。</div><div><br></div><div><b><font color="#323232" style="background-color: rgb(254, 250, 0);">临时对象(Transient Object)及其集合(Collection):</font></b></div><div>目前没有从属于一个Session的持久化类的实例。这些可能是刚刚被程序实例化，还没有来得及被持久化，或者是被一个已经关闭的Session实例化。</div><div><br></div><div><b><font color="#323232" style="background-color: rgb(254, 250, 0);">事务Transaction (NHibernate.ITransaction)：</font></b></div><div>（可选）单线程，生命期较短的对象，应用程序用其来表示一批工作的原子操作，它是底层的ADO.NET事务的抽象。一个Session在某些情况下可能跨越多个Transaction事务。</div><div><br></div><div><b><font color="#323232" style="background-color: rgb(254, 250, 0);">ConnectionProvider（NHibernate.Connection.ConnectionProvider）：</font></b></div><div>（可选）ADO.NET连接的工厂。从底层的IDbConnection抽象而来。对应用程序不可见，但可以被开发者扩展/实现。</div><div><br></div><div><b><font color="#323232" style="background-color: rgb(254, 250, 0);">TransactionFactory（net.sf.hibernate.TransactionFactory）：</font></b></div><div>（可选）事务实例的工厂。对应用程序不可见，但可以被开发者扩展/实现。</div></div><div class="cell text-cell"><div><b>3、持久化类案例</b></div></div><div class="cell text-cell"><div>持久化类是应用程序用来解决商业问题的类（比如，在电子交易程序中的Customer和Order）。</div><div><br></div><div><b><font color="#323232" style="background-color: rgb(254, 250, 0);">持久化类是暂时存在的，实例会被持久性保存于数据库中。</font></b></div><div>如果这些类符合简单的规则，NHibernate能够工作得最好，这些规则就是<font color="#323232" style="background-color: rgb(254, 250, 0);"><b>Plain Old CLR Object（POCO，简单传统CLR对象）</b></font>编程模型。</div></div><div class="cell text-cell"><div><b>POCO简单示例（用一个类描述一只猫）如下：</b></div></div><div class="cell code-cell"><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">public</span> <span class="ace_keyword">class</span> <span class="ace_identifier">Cat</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_keyword">private</span> <span class="ace_keyword">long</span> <span class="ace_identifier">_id</span><span class="ace_punctuation ace_operator">;</span> <span class="ace_comment">// <span class="ace_cjk" style="width:NaNpx">标</span><span class="ace_cjk" style="width:NaNpx">识</span><span class="ace_cjk" style="width:NaNpx">符</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_keyword">private</span> <span class="ace_keyword">string</span> <span class="ace_identifier">_name</span><span class="ace_punctuation ace_operator">;</span> <span class="ace_comment">// <span class="ace_cjk" style="width:NaNpx">名</span><span class="ace_cjk" style="width:NaNpx">字</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_keyword">private</span> <span class="ace_identifier">DateTime</span> <span class="ace_identifier">_birthdate</span><span class="ace_punctuation ace_operator">;</span> <span class="ace_comment">// <span class="ace_cjk" style="width:NaNpx">出</span><span class="ace_cjk" style="width:NaNpx">生</span><span class="ace_cjk" style="width:NaNpx">日</span><span class="ace_cjk" style="width:NaNpx">期</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_keyword">private</span> <span class="ace_identifier">Cat</span> <span class="ace_identifier">_mate</span><span class="ace_punctuation ace_operator">;</span> <span class="ace_comment">// <span class="ace_cjk" style="width:NaNpx">猫</span><span class="ace_cjk" style="width:NaNpx">的</span><span class="ace_cjk" style="width:NaNpx">配</span><span class="ace_cjk" style="width:NaNpx">对</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_keyword">private</span> <span class="ace_identifier">Set</span> <span class="ace_identifier">_kittens</span><span class="ace_punctuation ace_operator">;</span> <span class="ace_comment">// <span class="ace_cjk" style="width:NaNpx">猫</span><span class="ace_cjk" style="width:NaNpx">仔</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_keyword">private</span> <span class="ace_identifier">Color</span> <span class="ace_identifier">_color</span><span class="ace_punctuation ace_operator">;</span> <span class="ace_comment">// <span class="ace_cjk" style="width:NaNpx">颜</span><span class="ace_cjk" style="width:NaNpx">色</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_keyword">private</span> <span class="ace_keyword">char</span> <span class="ace_identifier">_sex</span><span class="ace_punctuation ace_operator">;</span> <span class="ace_comment">// <span class="ace_cjk" style="width:NaNpx">性</span><span class="ace_cjk" style="width:NaNpx">别</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_keyword">private</span> <span class="ace_keyword">float</span> <span class="ace_identifier">_weight</span><span class="ace_punctuation ace_operator">;</span> <span class="ace_comment">// <span class="ace_cjk" style="width:NaNpx">体</span><span class="ace_cjk" style="width:NaNpx">重</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_keyword">public</span> <span class="ace_keyword">long</span> <span class="ace_identifier">Id</span> <span class="ace_comment">// <span class="ace_cjk" style="width:NaNpx">标</span><span class="ace_cjk" style="width:NaNpx">识</span><span class="ace_cjk" style="width:NaNpx">符</span><span class="ace_cjk" style="width:NaNpx">属</span><span class="ace_cjk" style="width:NaNpx">性</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>  <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">get</span> <span class="ace_paren ace_lparen">{</span><span class="ace_keyword">return</span> <span class="ace_identifier">_id</span><span class="ace_punctuation ace_operator">;</span> <span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">set</span> <span class="ace_paren ace_lparen">{</span> <span class="ace_identifier">_id</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_identifier">value</span><span class="ace_punctuation ace_operator">;</span> <span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>  <span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>  <span class="ace_keyword">public</span> <span class="ace_keyword">string</span> <span class="ace_identifier">Name</span> <span class="ace_comment">// <span class="ace_cjk" style="width:NaNpx">名</span><span class="ace_cjk" style="width:NaNpx">字</span><span class="ace_cjk" style="width:NaNpx">属</span><span class="ace_cjk" style="width:NaNpx">性</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>  <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">get</span> <span class="ace_paren ace_lparen">{</span> <span class="ace_keyword">return</span> <span class="ace_identifier">_name</span><span class="ace_punctuation ace_operator">;</span> <span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">set</span> <span class="ace_paren ace_lparen">{</span> <span class="ace_identifier">_name</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_identifier">value</span><span class="ace_punctuation ace_operator">;</span> <span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>  <span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>  <span class="ace_keyword">public</span> <span class="ace_identifier">DateTime</span> <span class="ace_identifier">Birthdate</span> <span class="ace_comment">// <span class="ace_cjk" style="width:NaNpx">出</span><span class="ace_cjk" style="width:NaNpx">生</span><span class="ace_cjk" style="width:NaNpx">日</span><span class="ace_cjk" style="width:NaNpx">期</span><span class="ace_cjk" style="width:NaNpx">属</span><span class="ace_cjk" style="width:NaNpx">性</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>  <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">get</span> <span class="ace_paren ace_lparen">{</span> <span class="ace_keyword">return</span> <span class="ace_identifier">_birthdate</span><span class="ace_punctuation ace_operator">;</span> <span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">set</span> <span class="ace_paren ace_lparen">{</span> <span class="ace_identifier">_birthdate</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_identifier">value</span><span class="ace_punctuation ace_operator">;</span> <span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>  <span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>  <span class="ace_keyword">public</span> <span class="ace_identifier">Cat</span> <span class="ace_identifier">Mate</span> <span class="ace_comment">// <span class="ace_cjk" style="width:NaNpx">猫</span><span class="ace_cjk" style="width:NaNpx">的</span><span class="ace_cjk" style="width:NaNpx">配</span><span class="ace_cjk" style="width:NaNpx">对</span><span class="ace_cjk" style="width:NaNpx">属</span><span class="ace_cjk" style="width:NaNpx">性</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>  <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">get</span> <span class="ace_paren ace_lparen">{</span> <span class="ace_keyword">return</span> <span class="ace_identifier">_mate</span><span class="ace_punctuation ace_operator">;</span> <span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">set</span> <span class="ace_paren ace_lparen">{</span> <span class="ace_identifier">_mate</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_identifier">value</span><span class="ace_punctuation ace_operator">;</span> <span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>  <span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>  <span class="ace_keyword">public</span> <span class="ace_identifier">Set</span> <span class="ace_identifier">Kittens</span> <span class="ace_comment">// <span class="ace_cjk" style="width:NaNpx">猫</span><span class="ace_cjk" style="width:NaNpx">仔</span><span class="ace_cjk" style="width:NaNpx">属</span><span class="ace_cjk" style="width:NaNpx">性</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>  <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">get</span> <span class="ace_paren ace_lparen">{</span> <span class="ace_keyword">return</span> <span class="ace_identifier">_kittens</span><span class="ace_punctuation ace_operator">;</span> <span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">set</span> <span class="ace_paren ace_lparen">{</span> <span class="ace_identifier">_kittens</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_identifier">value</span><span class="ace_punctuation ace_operator">;</span> <span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>  <span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>  <span class="ace_keyword">public</span> <span class="ace_identifier">Color</span> <span class="ace_identifier">Color</span> <span class="ace_comment">// <span class="ace_cjk" style="width:NaNpx">颜</span><span class="ace_cjk" style="width:NaNpx">色</span><span class="ace_cjk" style="width:NaNpx">属</span><span class="ace_cjk" style="width:NaNpx">性</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>  <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">get</span> <span class="ace_paren ace_lparen">{</span> <span class="ace_keyword">return</span> <span class="ace_identifier">_color</span><span class="ace_punctuation ace_operator">;</span> <span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">set</span> <span class="ace_paren ace_lparen">{</span> <span class="ace_identifier">_color</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_identifier">value</span><span class="ace_punctuation ace_operator">;</span> <span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>  <span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>  <span class="ace_keyword">public</span> <span class="ace_keyword">char</span> <span class="ace_identifier">Sex</span> <span class="ace_comment">// <span class="ace_cjk" style="width:NaNpx">性</span><span class="ace_cjk" style="width:NaNpx">别</span><span class="ace_cjk" style="width:NaNpx">属</span><span class="ace_cjk" style="width:NaNpx">性</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>  <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">get</span> <span class="ace_paren ace_lparen">{</span> <span class="ace_keyword">return</span> <span class="ace_identifier">_sex</span><span class="ace_punctuation ace_operator">;</span> <span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">set</span> <span class="ace_paren ace_lparen">{</span> <span class="ace_identifier">_sex</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_identifier">value</span><span class="ace_punctuation ace_operator">;</span> <span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>  <span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>  <span class="ace_keyword">public</span> <span class="ace_keyword">float</span> <span class="ace_identifier">Weight</span> <span class="ace_comment">// <span class="ace_cjk" style="width:NaNpx">体</span><span class="ace_cjk" style="width:NaNpx">重</span><span class="ace_cjk" style="width:NaNpx">属</span><span class="ace_cjk" style="width:NaNpx">性</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>  <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">get</span> <span class="ace_paren ace_lparen">{</span> <span class="ace_keyword">return</span> <span class="ace_identifier">_weight</span><span class="ace_punctuation ace_operator">;</span> <span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">set</span> <span class="ace_paren ace_lparen">{</span> <span class="ace_identifier">_weight</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_identifier">value</span><span class="ace_punctuation ace_operator">;</span> <span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>  <span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span>
</div></div></div></div><div class="cell text-cell"><div><b>4、规则</b></div></div><div class="cell text-cell"><div>&nbsp; &nbsp; &nbsp; <b><font color="#323232" style="background-color: rgb(254, 250, 0);">为持久化字段声明访问器（getters和setters）。</font></b></div><div><br></div><div>&nbsp; &nbsp; &nbsp; Cat为它的所有可持久化字段声明了getters和setters访问器。<b>用访问器来替代直接访问字段</b>是个好习惯。也可以通过字段（field）来使用NHibernate。属性不一定需要声明为public的。NHibernate可以对default、protected、internal或private的属性执行持久化.</div><div><br></div><div>&nbsp; &nbsp; &nbsp; 实现一个默认的构造方法（constructor）：Cat有一个显式的无参数默认构造方法。所有的持久化类都必须具有一个默认的构造方法（可以不是public的），这样NHibernate就可以使用Constructor.Invoke()来实例化它们.</div><div>&nbsp; &nbsp; &nbsp; 提供一个标识属性（identifier property）（可选）.</div><div>&nbsp; &nbsp; &nbsp; 建议使用不是sealed的类（可选）.</div></div><div class="cell text-cell"><div><b>5、映射</b></div></div><div class="cell text-cell"><div>&nbsp; &nbsp; &nbsp; <b><font color="#323232" style="background-color: rgb(254, 250, 0);">&nbsp; 对象和关系数据库之间的映射是用一个XML文档（XML document）来定义的</font></b>。这个映射文档被设计为易读的，并且可以手工修改。</div><div>&nbsp; &nbsp; &nbsp; &nbsp; 映射语言是以.NET为中心的，意味着映射是<b>按照持久化类的定义来创建的，而非表的定义</b>。</div><div>&nbsp; &nbsp; &nbsp; &nbsp; 在Hibernate中XML映射文档可以手动定义，也有一些工具来辅助生成，包括Xdoclet、Middlegen和AndroMDA，但是在NHibernate文档中并没有上述的辅助工具，不过可以采MyGeneration这样的代码生成工具来生成XML配置文档。</div><div>&nbsp; &nbsp; &nbsp; &nbsp; <b><font color="#323232" style="background-color: rgb(254, 250, 0);">虽然NHibernate目前不是非常的成熟，还没有达到实用化的水平，它经常在负荷有些大的时候崩溃</font></b>，但是它脱胎于在Java社区有着巨大影响力的<b>Hibernate</b>，而且NHibernate在实际应用方面确实体现出了它的优势，基于上述原因NHibernate一定会被越来越多的开发人员所接受，而且一定会被标准化。</div></div><div class="cell text-cell"><b>6、代码案例</b><div></div></div><div class="cell text-cell"><b>01、配置NHibernate，运行在根目录上（始终复制）</b></div><div class="cell code-cell"><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_punctuation ace_xml-decl ace_xml">&lt;?</span><span class="ace_keyword ace_xml-decl ace_xml">xml</span><span class="ace_text ace_whitespace ace_xml"> </span><span class="ace_entity ace_other ace_attribute-name ace_decl-attribute-name ace_xml">version</span><span class="ace_keyword ace_operator ace_decl-attribute-equals ace_xml">=</span><span class="ace_string ace_xml">"1.0"</span><span class="ace_text ace_whitespace ace_xml"> </span><span class="ace_entity ace_other ace_attribute-name ace_decl-attribute-name ace_xml">encoding</span><span class="ace_keyword ace_operator ace_decl-attribute-equals ace_xml">=</span><span class="ace_string ace_xml">"utf-8"</span><span class="ace_punctuation ace_xml-decl ace_xml">?&gt;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment ace_xml">&lt;!--</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment ace_xml">This template was written to work with NHibernate.Test.</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment ace_xml">Copy the template to your NHibernate.Test project folder and rename it in hibernate.cfg.xml and change it</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment ace_xml">for your own use before compile tests in VisualStudio.</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment ace_xml">--&gt;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment ace_xml">&lt;!-- This is the System.Data.dll provider for SQL Server --&gt;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_meta ace_tag ace_punctuation ace_tag-open ace_xml">&lt;</span><span class="ace_meta ace_tag ace_tag-name ace_xml">hibernate-configuration</span><span class="ace_text ace_tag-whitespace ace_xml">  </span><span class="ace_entity ace_other ace_attribute-name ace_xml">xmlns</span><span class="ace_keyword ace_operator ace_attribute-equals ace_xml">=</span><span class="ace_string ace_attribute-value ace_xml">"urn:nhibernate-configuration-2.2"</span><span class="ace_text ace_tag-whitespace ace_xml"> </span><span class="ace_meta ace_tag ace_punctuation ace_tag-close ace_xml">&gt;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_text ace_xml">    </span><span class="ace_meta ace_tag ace_punctuation ace_tag-open ace_xml">&lt;</span><span class="ace_meta ace_tag ace_tag-name ace_xml">session-factory</span><span class="ace_meta ace_tag ace_punctuation ace_tag-close ace_xml">&gt;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_text ace_xml">    </span><span class="ace_meta ace_tag ace_punctuation ace_tag-open ace_xml">&lt;</span><span class="ace_meta ace_tag ace_tag-name ace_xml">property</span><span class="ace_text ace_tag-whitespace ace_xml"> </span><span class="ace_entity ace_other ace_attribute-name ace_xml">name</span><span class="ace_keyword ace_operator ace_attribute-equals ace_xml">=</span><span class="ace_string ace_attribute-value ace_xml">"connection.driver_class"</span><span class="ace_meta ace_tag ace_punctuation ace_tag-close ace_xml">&gt;</span><span class="ace_text ace_xml">NHibernate.Driver.MySqlDataDriver</span><span class="ace_meta ace_tag ace_punctuation ace_end-tag-open ace_xml">&lt;/</span><span class="ace_meta ace_tag ace_tag-name ace_xml">property</span><span class="ace_meta ace_tag ace_punctuation ace_tag-close ace_xml">&gt;</span><span class="ace_comment ace_xml">&lt;!--<span class="ace_cjk" style="width:NaNpx">使</span><span class="ace_cjk" style="width:NaNpx">用</span><span class="ace_cjk" style="width:NaNpx">什</span><span class="ace_cjk" style="width:NaNpx">么</span><span class="ace_cjk" style="width:NaNpx">数</span><span class="ace_cjk" style="width:NaNpx">据</span><span class="ace_cjk" style="width:NaNpx">库</span>--&gt;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_text ace_xml">    </span><span class="ace_meta ace_tag ace_punctuation ace_tag-open ace_xml">&lt;</span><span class="ace_meta ace_tag ace_tag-name ace_xml">property</span><span class="ace_text ace_tag-whitespace ace_xml"> </span><span class="ace_entity ace_other ace_attribute-name ace_xml">name</span><span class="ace_keyword ace_operator ace_attribute-equals ace_xml">=</span><span class="ace_string ace_attribute-value ace_xml">"connection.connection_string"</span><span class="ace_meta ace_tag ace_punctuation ace_tag-close ace_xml">&gt;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_text ace_xml">    </span><span class="ace_comment ace_xml">&lt;!--Server=(local);initial catalog=nhibernate;Integrated Security=SSPI--&gt;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_text ace_xml">    Server=localhost;Database=mygamedb;User Id=root;Password=liang521;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_text ace_xml">    </span><span class="ace_meta ace_tag ace_punctuation ace_end-tag-open ace_xml">&lt;/</span><span class="ace_meta ace_tag ace_tag-name ace_xml">property</span><span class="ace_meta ace_tag ace_punctuation ace_tag-close ace_xml">&gt;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_text ace_xml">    </span><span class="ace_meta ace_tag ace_punctuation ace_tag-open ace_xml">&lt;</span><span class="ace_meta ace_tag ace_tag-name ace_xml">property</span><span class="ace_text ace_tag-whitespace ace_xml"> </span><span class="ace_entity ace_other ace_attribute-name ace_xml">name</span><span class="ace_keyword ace_operator ace_attribute-equals ace_xml">=</span><span class="ace_string ace_attribute-value ace_xml">"dialect"</span><span class="ace_meta ace_tag ace_punctuation ace_tag-close ace_xml">&gt;</span><span class="ace_text ace_xml">NHibernate.Dialect.MySQL5Dialect</span><span class="ace_meta ace_tag ace_punctuation ace_end-tag-open ace_xml">&lt;/</span><span class="ace_meta ace_tag ace_tag-name ace_xml">property</span><span class="ace_meta ace_tag ace_punctuation ace_tag-close ace_xml">&gt;</span><span class="ace_comment ace_xml">&lt;!--<span class="ace_cjk" style="width:NaNpx">使</span><span class="ace_cjk" style="width:NaNpx">用</span><span class="ace_cjk" style="width:NaNpx">数</span><span class="ace_cjk" style="width:NaNpx">据</span><span class="ace_cjk" style="width:NaNpx">库</span><span class="ace_cjk" style="width:NaNpx">的</span><span class="ace_cjk" style="width:NaNpx">版</span><span class="ace_cjk" style="width:NaNpx">本</span>--&gt;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_text ace_xml">    </span><span class="ace_meta ace_tag ace_punctuation ace_end-tag-open ace_xml">&lt;/</span><span class="ace_meta ace_tag ace_tag-name ace_xml">session-factory</span><span class="ace_meta ace_tag ace_punctuation ace_tag-close ace_xml">&gt;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_meta ace_tag ace_punctuation ace_end-tag-open ace_xml">&lt;/</span><span class="ace_meta ace_tag ace_tag-name ace_xml">hibernate-configuration</span><span class="ace_meta ace_tag ace_punctuation ace_tag-close ace_xml">&gt;</span>
</div></div></div></div><div class="cell text-cell"><div><b>02、Common下的NHibernate的辅助类：NHibernateHelper</b></div></div><div class="cell code-cell"><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">namespace</span> <span class="ace_identifier">LJK_NHibernateLinkMySQLDemo_20210202</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">Common</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_keyword">public</span> <span class="ace_keyword">static</span> <span class="ace_keyword">class</span> <span class="ace_identifier">NHibernateHelper</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_keyword">private</span> <span class="ace_keyword">static</span> <span class="ace_identifier">ISessionFactory</span> <span class="ace_identifier">_sessionFactory</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_keyword">private</span> <span class="ace_keyword">static</span> <span class="ace_identifier">ISessionFactory</span> <span class="ace_identifier">SessionFactory</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">get</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_keyword">if</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">_sessionFactory</span> <span class="ace_keyword ace_operator">==</span> <span class="ace_constant ace_language">null</span><span class="ace_paren ace_rparen">)</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_keyword">var</span> <span class="ace_identifier">configuration</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_keyword">new</span> <span class="ace_identifier">Configuration</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span><span class="ace_comment">//<span class="ace_cjk" style="width:NaNpx">创</span><span class="ace_cjk" style="width:NaNpx">建</span><span class="ace_cjk" style="width:NaNpx">配</span><span class="ace_cjk" style="width:NaNpx">置</span><span class="ace_cjk" style="width:NaNpx">对</span><span class="ace_cjk" style="width:NaNpx">象</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">configuration</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">Configure</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span><span class="ace_comment">//<span class="ace_cjk" style="width:NaNpx">解</span><span class="ace_cjk" style="width:NaNpx">析</span><span class="ace_cjk" style="width:NaNpx">数</span><span class="ace_cjk" style="width:NaNpx">据</span><span class="ace_cjk" style="width:NaNpx">库</span><span class="ace_cjk" style="width:NaNpx">连</span><span class="ace_cjk" style="width:NaNpx">接</span><span class="ace_cjk" style="width:NaNpx">配</span><span class="ace_cjk" style="width:NaNpx">置</span><span class="ace_cjk" style="width:NaNpx">（</span><span class="ace_cjk" style="width:NaNpx">在</span><span class="ace_cjk" style="width:NaNpx">默</span><span class="ace_cjk" style="width:NaNpx">认</span><span class="ace_cjk" style="width:NaNpx">路</span><span class="ace_cjk" style="width:NaNpx">径</span><span class="ace_cjk" style="width:NaNpx">中</span><span class="ace_cjk" style="width:NaNpx">解</span><span class="ace_cjk" style="width:NaNpx">析</span><span class="ace_cjk" style="width:NaNpx">）</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">configuration</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">AddAssembly</span><span class="ace_paren ace_lparen">(</span><span class="ace_string ace_start">"</span><span class="ace_string">LJK_NHibernateLinkMySQLDemo_20210202</span><span class="ace_string ace_end">"</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">_sessionFactory</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_identifier">configuration</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">BuildSessionFactory</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_keyword">return</span> <span class="ace_identifier">_sessionFactory</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_keyword">public</span> <span class="ace_keyword">static</span> <span class="ace_identifier">ISession</span> <span class="ace_identifier">OpenSession</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_keyword">return</span> <span class="ace_identifier">SessionFactory</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">OpenSession</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span><span class="ace_comment">//<span class="ace_cjk" style="width:NaNpx">通</span><span class="ace_cjk" style="width:NaNpx">过</span>sessionFactory<span class="ace_cjk" style="width:NaNpx">得</span><span class="ace_cjk" style="width:NaNpx">到</span><span class="ace_cjk" style="width:NaNpx">一</span><span class="ace_cjk" style="width:NaNpx">个</span>session<span class="ace_cjk" style="width:NaNpx">。</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span>
</div></div></div></div><div class="cell text-cell"><div><b>03、Mappings下的Xml映射文件（实体类与表的映射）（嵌入资源）</b></div></div><div class="cell code-cell"><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_punctuation ace_xml-decl ace_xml">&lt;?</span><span class="ace_keyword ace_xml-decl ace_xml">xml</span><span class="ace_text ace_whitespace ace_xml"> </span><span class="ace_entity ace_other ace_attribute-name ace_decl-attribute-name ace_xml">version</span><span class="ace_keyword ace_operator ace_decl-attribute-equals ace_xml">=</span><span class="ace_string ace_xml">"1.0"</span><span class="ace_text ace_whitespace ace_xml"> </span><span class="ace_entity ace_other ace_attribute-name ace_decl-attribute-name ace_xml">encoding</span><span class="ace_keyword ace_operator ace_decl-attribute-equals ace_xml">=</span><span class="ace_string ace_xml">"utf-8"</span><span class="ace_text ace_whitespace ace_xml"> </span><span class="ace_punctuation ace_xml-decl ace_xml">?&gt;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment ace_xml">&lt;!--assembly:<span class="ace_cjk" style="width:NaNpx">程</span><span class="ace_cjk" style="width:NaNpx">序</span><span class="ace_cjk" style="width:NaNpx">集</span><span class="ace_cjk" style="width:NaNpx">，</span>namespace:<span class="ace_cjk" style="width:NaNpx">命</span><span class="ace_cjk" style="width:NaNpx">名</span><span class="ace_cjk" style="width:NaNpx">空</span><span class="ace_cjk" style="width:NaNpx">间</span>--&gt;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_meta ace_tag ace_punctuation ace_tag-open ace_xml">&lt;</span><span class="ace_meta ace_tag ace_tag-name ace_xml">hibernate-mapping</span><span class="ace_text ace_tag-whitespace ace_xml">  </span><span class="ace_entity ace_other ace_attribute-name ace_xml">xmlns</span><span class="ace_keyword ace_operator ace_attribute-equals ace_xml">=</span><span class="ace_string ace_attribute-value ace_xml">"urn:nhibernate-mapping-2.2"</span><span class="ace_text ace_tag-whitespace ace_xml"> </span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_text ace_tag-whitespace ace_xml">    </span><span class="ace_entity ace_other ace_attribute-name ace_xml">assembly</span><span class="ace_keyword ace_operator ace_attribute-equals ace_xml">=</span><span class="ace_string ace_attribute-value ace_xml">"LJK_NHibernateLinkMySQLDemo_20210202"</span><span class="ace_text ace_tag-whitespace ace_xml">        </span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_text ace_tag-whitespace ace_xml">    </span><span class="ace_entity ace_other ace_attribute-name ace_xml">namespace</span><span class="ace_keyword ace_operator ace_attribute-equals ace_xml">=</span><span class="ace_string ace_attribute-value ace_xml">"LJK_NHibernateLinkMySQLDemo_20210202.Model"</span><span class="ace_meta ace_tag ace_punctuation ace_tag-close ace_xml">&gt;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_text ace_xml">   </span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_text ace_xml">    </span><span class="ace_comment ace_xml">&lt;!--<span class="ace_cjk" style="width:NaNpx">基</span><span class="ace_cjk" style="width:NaNpx">础</span><span class="ace_cjk" style="width:NaNpx">配</span><span class="ace_cjk" style="width:NaNpx">置</span>--&gt;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_text ace_xml">    </span><span class="ace_meta ace_tag ace_punctuation ace_tag-open ace_xml">&lt;</span><span class="ace_meta ace_tag ace_tag-name ace_xml">class</span><span class="ace_text ace_tag-whitespace ace_xml"> </span><span class="ace_entity ace_other ace_attribute-name ace_xml">name</span><span class="ace_keyword ace_operator ace_attribute-equals ace_xml">=</span><span class="ace_string ace_attribute-value ace_xml">"User"</span><span class="ace_text ace_tag-whitespace ace_xml"> </span><span class="ace_entity ace_other ace_attribute-name ace_xml">table</span><span class="ace_keyword ace_operator ace_attribute-equals ace_xml">=</span><span class="ace_string ace_attribute-value ace_xml">"users"</span><span class="ace_meta ace_tag ace_punctuation ace_tag-close ace_xml">&gt;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_text ace_xml">    </span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_text ace_xml">    </span><span class="ace_comment ace_xml">&lt;!--<span class="ace_cjk" style="width:NaNpx">配</span><span class="ace_cjk" style="width:NaNpx">置</span><span class="ace_cjk" style="width:NaNpx">主</span><span class="ace_cjk" style="width:NaNpx">键</span>--&gt;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_text ace_xml">    </span><span class="ace_meta ace_tag ace_punctuation ace_tag-open ace_xml">&lt;</span><span class="ace_meta ace_tag ace_tag-name ace_xml">id</span><span class="ace_text ace_tag-whitespace ace_xml"> </span><span class="ace_entity ace_other ace_attribute-name ace_xml">name</span><span class="ace_keyword ace_operator ace_attribute-equals ace_xml">=</span><span class="ace_string ace_attribute-value ace_xml">"Id"</span><span class="ace_text ace_tag-whitespace ace_xml"> </span><span class="ace_entity ace_other ace_attribute-name ace_xml">type</span><span class="ace_keyword ace_operator ace_attribute-equals ace_xml">=</span><span class="ace_string ace_attribute-value ace_xml">"Int32"</span><span class="ace_text ace_tag-whitespace ace_xml"> </span><span class="ace_entity ace_other ace_attribute-name ace_xml">unsaved-value</span><span class="ace_keyword ace_operator ace_attribute-equals ace_xml">=</span><span class="ace_string ace_attribute-value ace_xml">"null"</span><span class="ace_meta ace_tag ace_punctuation ace_tag-close ace_xml">&gt;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_text ace_xml">    </span><span class="ace_comment ace_xml">&lt;!--<span class="ace_cjk" style="width:NaNpx">指</span><span class="ace_cjk" style="width:NaNpx">定</span><span class="ace_cjk" style="width:NaNpx">表</span><span class="ace_cjk" style="width:NaNpx">里</span><span class="ace_cjk" style="width:NaNpx">面</span><span class="ace_cjk" style="width:NaNpx">的</span><span class="ace_cjk" style="width:NaNpx">列</span><span class="ace_cjk" style="width:NaNpx">名</span><span class="ace_cjk" style="width:NaNpx">和</span><span class="ace_cjk" style="width:NaNpx">类</span><span class="ace_cjk" style="width:NaNpx">型</span>--&gt;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_text ace_xml">    </span><span class="ace_meta ace_tag ace_punctuation ace_tag-open ace_xml">&lt;</span><span class="ace_meta ace_tag ace_tag-name ace_xml">column</span><span class="ace_text ace_tag-whitespace ace_xml"> </span><span class="ace_entity ace_other ace_attribute-name ace_xml">name</span><span class="ace_keyword ace_operator ace_attribute-equals ace_xml">=</span><span class="ace_string ace_attribute-value ace_xml">"Id"</span><span class="ace_text ace_tag-whitespace ace_xml"> </span><span class="ace_entity ace_other ace_attribute-name ace_xml">sql-type</span><span class="ace_keyword ace_operator ace_attribute-equals ace_xml">=</span><span class="ace_string ace_attribute-value ace_xml">"int"</span><span class="ace_text ace_tag-whitespace ace_xml"> </span><span class="ace_entity ace_other ace_attribute-name ace_xml">not-null</span><span class="ace_keyword ace_operator ace_attribute-equals ace_xml">=</span><span class="ace_string ace_attribute-value ace_xml">"true"</span><span class="ace_text ace_tag-whitespace ace_xml"> </span><span class="ace_entity ace_other ace_attribute-name ace_xml">unique</span><span class="ace_keyword ace_operator ace_attribute-equals ace_xml">=</span><span class="ace_string ace_attribute-value ace_xml">"true"</span><span class="ace_meta ace_tag ace_punctuation ace_tag-close ace_xml">/&gt;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_text ace_xml">    </span><span class="ace_meta ace_tag ace_punctuation ace_tag-open ace_xml">&lt;</span><span class="ace_meta ace_tag ace_tag-name ace_xml">generator</span><span class="ace_text ace_tag-whitespace ace_xml"> </span><span class="ace_entity ace_other ace_attribute-name ace_xml">class</span><span class="ace_keyword ace_operator ace_attribute-equals ace_xml">=</span><span class="ace_string ace_attribute-value ace_xml">"assigned"</span><span class="ace_meta ace_tag ace_punctuation ace_tag-close ace_xml">&gt;</span><span class="ace_text ace_xml"> </span><span class="ace_meta ace_tag ace_punctuation ace_end-tag-open ace_xml">&lt;/</span><span class="ace_meta ace_tag ace_tag-name ace_xml">generator</span><span class="ace_meta ace_tag ace_punctuation ace_tag-close ace_xml">&gt;</span><span class="ace_text ace_xml">  </span><span class="ace_comment ace_xml">&lt;!--<span class="ace_cjk" style="width:NaNpx">自</span><span class="ace_cjk" style="width:NaNpx">增</span><span class="ace_cjk" style="width:NaNpx">长</span> "<span class="ace_cjk" style="width:NaNpx">也</span><span class="ace_cjk" style="width:NaNpx">有</span><span class="ace_cjk" style="width:NaNpx">配</span><span class="ace_cjk" style="width:NaNpx">置</span>assigned" --&gt;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_text ace_xml">    </span><span class="ace_comment ace_xml">&lt;!--native<span class="ace_cjk" style="width:NaNpx">、</span>assigned<span class="ace_cjk" style="width:NaNpx">、</span>uuid<span class="ace_cjk" style="width:NaNpx">的</span><span class="ace_cjk" style="width:NaNpx">区</span><span class="ace_cjk" style="width:NaNpx">别</span><span class="ace_cjk" style="width:NaNpx">？</span>--&gt;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_text ace_xml">    </span><span class="ace_comment ace_xml">&lt;!--</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_comment ace_xml">    <span class="ace_cjk" style="width:NaNpx">第</span><span class="ace_cjk" style="width:NaNpx">一</span><span class="ace_cjk" style="width:NaNpx">种</span><span class="ace_cjk" style="width:NaNpx">：</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_comment ace_xml">    native<span class="ace_cjk" style="width:NaNpx">为</span>id<span class="ace_cjk" style="width:NaNpx">自</span><span class="ace_cjk" style="width:NaNpx">动</span><span class="ace_cjk" style="width:NaNpx">生</span><span class="ace_cjk" style="width:NaNpx">成</span><span class="ace_cjk" style="width:NaNpx">策</span><span class="ace_cjk" style="width:NaNpx">略</span><span class="ace_cjk" style="width:NaNpx">，</span><span class="ace_cjk" style="width:NaNpx">生</span><span class="ace_cjk" style="width:NaNpx">成</span><span class="ace_cjk" style="width:NaNpx">的</span><span class="ace_cjk" style="width:NaNpx">是</span><span class="ace_cjk" style="width:NaNpx">数</span><span class="ace_cjk" style="width:NaNpx">字</span>id<span class="ace_cjk" style="width:NaNpx">，</span><span class="ace_cjk" style="width:NaNpx">添</span><span class="ace_cjk" style="width:NaNpx">加</span><span class="ace_cjk" style="width:NaNpx">数</span><span class="ace_cjk" style="width:NaNpx">据</span><span class="ace_cjk" style="width:NaNpx">到</span>MySQL<span class="ace_cjk" style="width:NaNpx">数</span><span class="ace_cjk" style="width:NaNpx">据</span><span class="ace_cjk" style="width:NaNpx">库</span><span class="ace_cjk" style="width:NaNpx">时</span><span class="ace_cjk" style="width:NaNpx">不</span><span class="ace_cjk" style="width:NaNpx">需</span><span class="ace_cjk" style="width:NaNpx">要</span><span class="ace_cjk" style="width:NaNpx">设</span><span class="ace_cjk" style="width:NaNpx">置</span>id<span class="ace_cjk" style="width:NaNpx">的</span><span class="ace_cjk" style="width:NaNpx">值</span>,hibernate<span class="ace_cjk" style="width:NaNpx">框</span><span class="ace_cjk" style="width:NaNpx">架</span><span class="ace_cjk" style="width:NaNpx">会</span><span class="ace_cjk" style="width:NaNpx">帮</span><span class="ace_cjk" style="width:NaNpx">你</span><span class="ace_cjk" style="width:NaNpx">生</span><span class="ace_cjk" style="width:NaNpx">成</span><span class="ace_cjk" style="width:NaNpx">，</span><span class="ace_cjk" style="width:NaNpx">但</span><span class="ace_cjk" style="width:NaNpx">是</span><span class="ace_cjk" style="width:NaNpx">会</span><span class="ace_cjk" style="width:NaNpx">给</span><span class="ace_cjk" style="width:NaNpx">框</span><span class="ace_cjk" style="width:NaNpx">架</span><span class="ace_cjk" style="width:NaNpx">执</span><span class="ace_cjk" style="width:NaNpx">行</span><span class="ace_cjk" style="width:NaNpx">时</span><span class="ace_cjk" style="width:NaNpx">间</span><span class="ace_cjk" style="width:NaNpx">造</span><span class="ace_cjk" style="width:NaNpx">成</span><span class="ace_cjk" style="width:NaNpx">压</span><span class="ace_cjk" style="width:NaNpx">力</span><span class="ace_cjk" style="width:NaNpx">。</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_comment ace_xml">    <span class="ace_cjk" style="width:NaNpx">第</span><span class="ace_cjk" style="width:NaNpx">二</span><span class="ace_cjk" style="width:NaNpx">种</span><span class="ace_cjk" style="width:NaNpx">：</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_comment ace_xml">    assigned<span class="ace_cjk" style="width:NaNpx">（</span><span class="ace_cjk" style="width:NaNpx">手</span><span class="ace_cjk" style="width:NaNpx">动</span><span class="ace_cjk" style="width:NaNpx">委</span><span class="ace_cjk" style="width:NaNpx">派</span><span class="ace_cjk" style="width:NaNpx">）</span><span class="ace_cjk" style="width:NaNpx">主</span><span class="ace_cjk" style="width:NaNpx">键</span><span class="ace_cjk" style="width:NaNpx">策</span><span class="ace_cjk" style="width:NaNpx">略</span><span class="ace_cjk" style="width:NaNpx">需</span><span class="ace_cjk" style="width:NaNpx">要</span><span class="ace_cjk" style="width:NaNpx">在</span><span class="ace_cjk" style="width:NaNpx">添</span><span class="ace_cjk" style="width:NaNpx">加</span><span class="ace_cjk" style="width:NaNpx">数</span><span class="ace_cjk" style="width:NaNpx">据</span><span class="ace_cjk" style="width:NaNpx">时</span><span class="ace_cjk" style="width:NaNpx">自</span><span class="ace_cjk" style="width:NaNpx">己</span><span class="ace_cjk" style="width:NaNpx">设</span><span class="ace_cjk" style="width:NaNpx">置</span>id<span class="ace_cjk" style="width:NaNpx">，</span><span class="ace_cjk" style="width:NaNpx">因</span><span class="ace_cjk" style="width:NaNpx">为</span><span class="ace_cjk" style="width:NaNpx">它</span><span class="ace_cjk" style="width:NaNpx">不</span><span class="ace_cjk" style="width:NaNpx">能</span><span class="ace_cjk" style="width:NaNpx">自</span><span class="ace_cjk" style="width:NaNpx">动</span><span class="ace_cjk" style="width:NaNpx">生</span><span class="ace_cjk" style="width:NaNpx">成</span>id<span class="ace_cjk" style="width:NaNpx">，</span><span class="ace_cjk" style="width:NaNpx">不</span><span class="ace_cjk" style="width:NaNpx">麻</span><span class="ace_cjk" style="width:NaNpx">烦</span><span class="ace_cjk" style="width:NaNpx">别</span><span class="ace_cjk" style="width:NaNpx">人</span><span class="ace_cjk" style="width:NaNpx">，</span><span class="ace_cjk" style="width:NaNpx">自</span><span class="ace_cjk" style="width:NaNpx">己</span><span class="ace_cjk" style="width:NaNpx">动</span><span class="ace_cjk" style="width:NaNpx">手</span><span class="ace_cjk" style="width:NaNpx">。</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_comment ace_xml">    <span class="ace_cjk" style="width:NaNpx">第</span><span class="ace_cjk" style="width:NaNpx">三</span><span class="ace_cjk" style="width:NaNpx">种</span><span class="ace_cjk" style="width:NaNpx">：</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_comment ace_xml">    uuid.hex<span class="ace_cjk" style="width:NaNpx">程</span><span class="ace_cjk" style="width:NaNpx">序</span><span class="ace_cjk" style="width:NaNpx">会</span><span class="ace_cjk" style="width:NaNpx">自</span><span class="ace_cjk" style="width:NaNpx">动</span><span class="ace_cjk" style="width:NaNpx">生</span><span class="ace_cjk" style="width:NaNpx">成</span>16<span class="ace_cjk" style="width:NaNpx">进</span><span class="ace_cjk" style="width:NaNpx">制</span>uuid<span class="ace_cjk" style="width:NaNpx">主</span><span class="ace_cjk" style="width:NaNpx">键</span><span class="ace_cjk" style="width:NaNpx">，</span><span class="ace_cjk" style="width:NaNpx">添</span><span class="ace_cjk" style="width:NaNpx">加</span><span class="ace_cjk" style="width:NaNpx">数</span><span class="ace_cjk" style="width:NaNpx">据</span><span class="ace_cjk" style="width:NaNpx">到</span>MySQL<span class="ace_cjk" style="width:NaNpx">数</span><span class="ace_cjk" style="width:NaNpx">据</span><span class="ace_cjk" style="width:NaNpx">库</span><span class="ace_cjk" style="width:NaNpx">时</span><span class="ace_cjk" style="width:NaNpx">不</span><span class="ace_cjk" style="width:NaNpx">需</span><span class="ace_cjk" style="width:NaNpx">要</span><span class="ace_cjk" style="width:NaNpx">设</span><span class="ace_cjk" style="width:NaNpx">置</span>id<span class="ace_cjk" style="width:NaNpx">的</span><span class="ace_cjk" style="width:NaNpx">值</span><span class="ace_cjk" style="width:NaNpx">，</span><span class="ace_cjk" style="width:NaNpx">如</span><span class="ace_cjk" style="width:NaNpx">果</span><span class="ace_cjk" style="width:NaNpx">将</span>id<span class="ace_cjk" style="width:NaNpx">设</span><span class="ace_cjk" style="width:NaNpx">置</span><span class="ace_cjk" style="width:NaNpx">为</span><span class="ace_cjk" style="width:NaNpx">这</span><span class="ace_cjk" style="width:NaNpx">种</span><span class="ace_cjk" style="width:NaNpx">策</span><span class="ace_cjk" style="width:NaNpx">略</span><span class="ace_cjk" style="width:NaNpx">，</span><span class="ace_cjk" style="width:NaNpx">那</span><span class="ace_cjk" style="width:NaNpx">么</span><span class="ace_cjk" style="width:NaNpx">实</span><span class="ace_cjk" style="width:NaNpx">体</span><span class="ace_cjk" style="width:NaNpx">类</span>id<span class="ace_cjk" style="width:NaNpx">属</span><span class="ace_cjk" style="width:NaNpx">性</span><span class="ace_cjk" style="width:NaNpx">必</span><span class="ace_cjk" style="width:NaNpx">须</span><span class="ace_cjk" style="width:NaNpx">要</span><span class="ace_cjk" style="width:NaNpx">定</span><span class="ace_cjk" style="width:NaNpx">义</span><span class="ace_cjk" style="width:NaNpx">成</span><span class="ace_cjk" style="width:NaNpx">字</span><span class="ace_cjk" style="width:NaNpx">符</span><span class="ace_cjk" style="width:NaNpx">串</span>string<span class="ace_cjk" style="width:NaNpx">类</span><span class="ace_cjk" style="width:NaNpx">型</span><span class="ace_cjk" style="width:NaNpx">，</span><span class="ace_cjk" style="width:NaNpx">不</span><span class="ace_cjk" style="width:NaNpx">然</span><span class="ace_cjk" style="width:NaNpx">会</span><span class="ace_cjk" style="width:NaNpx">报</span><span class="ace_cjk" style="width:NaNpx">错</span><span class="ace_cjk" style="width:NaNpx">。</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_comment ace_xml">    --&gt;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_text ace_xml">    </span><span class="ace_meta ace_tag ace_punctuation ace_end-tag-open ace_xml">&lt;/</span><span class="ace_meta ace_tag ace_tag-name ace_xml">id</span><span class="ace_meta ace_tag ace_punctuation ace_tag-close ace_xml">&gt;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_text ace_xml">    </span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_text ace_xml">    </span><span class="ace_comment ace_xml">&lt;!--<span class="ace_cjk" style="width:NaNpx">其</span><span class="ace_cjk" style="width:NaNpx">他</span><span class="ace_cjk" style="width:NaNpx">列</span>--&gt;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_text ace_xml">    </span><span class="ace_meta ace_tag ace_punctuation ace_tag-open ace_xml">&lt;</span><span class="ace_meta ace_tag ace_tag-name ace_xml">property</span><span class="ace_text ace_tag-whitespace ace_xml"> </span><span class="ace_entity ace_other ace_attribute-name ace_xml">name</span><span class="ace_keyword ace_operator ace_attribute-equals ace_xml">=</span><span class="ace_string ace_attribute-value ace_xml">"Username"</span><span class="ace_text ace_tag-whitespace ace_xml"> </span><span class="ace_entity ace_other ace_attribute-name ace_xml">type</span><span class="ace_keyword ace_operator ace_attribute-equals ace_xml">=</span><span class="ace_string ace_attribute-value ace_xml">"String"</span><span class="ace_meta ace_tag ace_punctuation ace_tag-close ace_xml">&gt;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_text ace_xml">    </span><span class="ace_meta ace_tag ace_punctuation ace_tag-open ace_xml">&lt;</span><span class="ace_meta ace_tag ace_tag-name ace_xml">column</span><span class="ace_text ace_tag-whitespace ace_xml"> </span><span class="ace_entity ace_other ace_attribute-name ace_xml">name</span><span class="ace_keyword ace_operator ace_attribute-equals ace_xml">=</span><span class="ace_string ace_attribute-value ace_xml">"Username"</span><span class="ace_text ace_tag-whitespace ace_xml"> </span><span class="ace_entity ace_other ace_attribute-name ace_xml">sql-type</span><span class="ace_keyword ace_operator ace_attribute-equals ace_xml">=</span><span class="ace_string ace_attribute-value ace_xml">"varchar"</span><span class="ace_text ace_tag-whitespace ace_xml">  </span><span class="ace_entity ace_other ace_attribute-name ace_xml">not-null</span><span class="ace_keyword ace_operator ace_attribute-equals ace_xml">=</span><span class="ace_string ace_attribute-value ace_xml">"false"</span><span class="ace_meta ace_tag ace_punctuation ace_tag-close ace_xml">/&gt;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_text ace_xml">    </span><span class="ace_meta ace_tag ace_punctuation ace_end-tag-open ace_xml">&lt;/</span><span class="ace_meta ace_tag ace_tag-name ace_xml">property</span><span class="ace_meta ace_tag ace_punctuation ace_tag-close ace_xml">&gt;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_text ace_xml">    </span><span class="ace_meta ace_tag ace_punctuation ace_tag-open ace_xml">&lt;</span><span class="ace_meta ace_tag ace_tag-name ace_xml">property</span><span class="ace_text ace_tag-whitespace ace_xml"> </span><span class="ace_entity ace_other ace_attribute-name ace_xml">name</span><span class="ace_keyword ace_operator ace_attribute-equals ace_xml">=</span><span class="ace_string ace_attribute-value ace_xml">"Password"</span><span class="ace_text ace_tag-whitespace ace_xml"> </span><span class="ace_entity ace_other ace_attribute-name ace_xml">type</span><span class="ace_keyword ace_operator ace_attribute-equals ace_xml">=</span><span class="ace_string ace_attribute-value ace_xml">"String"</span><span class="ace_meta ace_tag ace_punctuation ace_tag-close ace_xml">&gt;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_text ace_xml">    </span><span class="ace_meta ace_tag ace_punctuation ace_tag-open ace_xml">&lt;</span><span class="ace_meta ace_tag ace_tag-name ace_xml">column</span><span class="ace_text ace_tag-whitespace ace_xml"> </span><span class="ace_entity ace_other ace_attribute-name ace_xml">name</span><span class="ace_keyword ace_operator ace_attribute-equals ace_xml">=</span><span class="ace_string ace_attribute-value ace_xml">"Password"</span><span class="ace_text ace_tag-whitespace ace_xml"> </span><span class="ace_entity ace_other ace_attribute-name ace_xml">sql-type</span><span class="ace_keyword ace_operator ace_attribute-equals ace_xml">=</span><span class="ace_string ace_attribute-value ace_xml">"varchar"</span><span class="ace_text ace_tag-whitespace ace_xml">  </span><span class="ace_entity ace_other ace_attribute-name ace_xml">not-null</span><span class="ace_keyword ace_operator ace_attribute-equals ace_xml">=</span><span class="ace_string ace_attribute-value ace_xml">"false"</span><span class="ace_meta ace_tag ace_punctuation ace_tag-close ace_xml">/&gt;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_text ace_xml">    </span><span class="ace_meta ace_tag ace_punctuation ace_end-tag-open ace_xml">&lt;/</span><span class="ace_meta ace_tag ace_tag-name ace_xml">property</span><span class="ace_meta ace_tag ace_punctuation ace_tag-close ace_xml">&gt;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_text ace_xml">    </span><span class="ace_meta ace_tag ace_punctuation ace_tag-open ace_xml">&lt;</span><span class="ace_meta ace_tag ace_tag-name ace_xml">property</span><span class="ace_text ace_tag-whitespace ace_xml"> </span><span class="ace_entity ace_other ace_attribute-name ace_xml">name</span><span class="ace_keyword ace_operator ace_attribute-equals ace_xml">=</span><span class="ace_string ace_attribute-value ace_xml">"RegisterDate"</span><span class="ace_text ace_tag-whitespace ace_xml"> </span><span class="ace_entity ace_other ace_attribute-name ace_xml">type</span><span class="ace_keyword ace_operator ace_attribute-equals ace_xml">=</span><span class="ace_string ace_attribute-value ace_xml">"DateTime"</span><span class="ace_meta ace_tag ace_punctuation ace_tag-close ace_xml">&gt;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_text ace_xml">    </span><span class="ace_meta ace_tag ace_punctuation ace_tag-open ace_xml">&lt;</span><span class="ace_meta ace_tag ace_tag-name ace_xml">column</span><span class="ace_text ace_tag-whitespace ace_xml"> </span><span class="ace_entity ace_other ace_attribute-name ace_xml">name</span><span class="ace_keyword ace_operator ace_attribute-equals ace_xml">=</span><span class="ace_string ace_attribute-value ace_xml">"RegisterDate"</span><span class="ace_text ace_tag-whitespace ace_xml"> </span><span class="ace_entity ace_other ace_attribute-name ace_xml">sql-type</span><span class="ace_keyword ace_operator ace_attribute-equals ace_xml">=</span><span class="ace_string ace_attribute-value ace_xml">"date"</span><span class="ace_text ace_tag-whitespace ace_xml">  </span><span class="ace_entity ace_other ace_attribute-name ace_xml">not-null</span><span class="ace_keyword ace_operator ace_attribute-equals ace_xml">=</span><span class="ace_string ace_attribute-value ace_xml">"false"</span><span class="ace_meta ace_tag ace_punctuation ace_tag-close ace_xml">/&gt;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_text ace_xml">    </span><span class="ace_meta ace_tag ace_punctuation ace_end-tag-open ace_xml">&lt;/</span><span class="ace_meta ace_tag ace_tag-name ace_xml">property</span><span class="ace_meta ace_tag ace_punctuation ace_tag-close ace_xml">&gt;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_text ace_xml">    </span><span class="ace_meta ace_tag ace_punctuation ace_end-tag-open ace_xml">&lt;/</span><span class="ace_meta ace_tag ace_tag-name ace_xml">class</span><span class="ace_meta ace_tag ace_punctuation ace_tag-close ace_xml">&gt;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_meta ace_tag ace_punctuation ace_end-tag-open ace_xml">&lt;/</span><span class="ace_meta ace_tag ace_tag-name ace_xml">hibernate-mapping</span><span class="ace_meta ace_tag ace_punctuation ace_tag-close ace_xml">&gt;</span>
</div></div></div></div><div class="cell text-cell"><div><b>Model文件下User实体类</b></div></div><div class="cell code-cell"><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">using</span> <span class="ace_identifier">System</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">namespace</span> <span class="ace_identifier">LJK_NHibernateLinkMySQLDemo_20210202</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">Model</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_keyword">public</span> <span class="ace_keyword">class</span> <span class="ace_identifier">User</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_keyword">public</span> <span class="ace_keyword">virtual</span>  <span class="ace_keyword">int</span> <span class="ace_identifier">Id</span> <span class="ace_paren ace_lparen">{</span> <span class="ace_identifier">get</span><span class="ace_punctuation ace_operator">;</span> <span class="ace_identifier">set</span><span class="ace_punctuation ace_operator">;</span> <span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_keyword">public</span> <span class="ace_keyword">virtual</span> <span class="ace_keyword">string</span> <span class="ace_identifier">Username</span> <span class="ace_paren ace_lparen">{</span> <span class="ace_identifier">get</span><span class="ace_punctuation ace_operator">;</span> <span class="ace_identifier">set</span><span class="ace_punctuation ace_operator">;</span> <span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_keyword">public</span> <span class="ace_keyword">virtual</span> <span class="ace_keyword">string</span> <span class="ace_identifier">Password</span> <span class="ace_paren ace_lparen">{</span> <span class="ace_identifier">get</span><span class="ace_punctuation ace_operator">;</span> <span class="ace_identifier">set</span><span class="ace_punctuation ace_operator">;</span> <span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_keyword">public</span> <span class="ace_keyword">virtual</span> <span class="ace_identifier">DateTime</span> <span class="ace_identifier">RegisterDate</span> <span class="ace_paren ace_lparen">{</span> <span class="ace_identifier">get</span><span class="ace_punctuation ace_operator">;</span> <span class="ace_identifier">set</span><span class="ace_punctuation ace_operator">;</span> <span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span>
</div></div></div></div><div class="cell text-cell"><div><b>Manager文件下的IUserManger接口</b></div></div><div class="cell code-cell"><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">using</span> <span class="ace_identifier">System</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">Collections</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">using</span> <span class="ace_identifier">System</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">Collections</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">Generic</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">using</span> <span class="ace_identifier">LJK_NHibernateLinkMySQLDemo_20210202</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">Model</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">namespace</span> <span class="ace_identifier">LJK_NHibernateLinkMySQLDemo_20210202</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">Manager</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_comment">//<span class="ace_cjk" style="width:NaNpx">定</span><span class="ace_cjk" style="width:NaNpx">义</span><span class="ace_cjk" style="width:NaNpx">接</span><span class="ace_cjk" style="width:NaNpx">口</span><span class="ace_cjk" style="width:NaNpx">的</span><span class="ace_cjk" style="width:NaNpx">好</span><span class="ace_cjk" style="width:NaNpx">处</span><span class="ace_cjk" style="width:NaNpx">？</span><span class="ace_cjk" style="width:NaNpx">可</span><span class="ace_cjk" style="width:NaNpx">以</span><span class="ace_cjk" style="width:NaNpx">以</span><span class="ace_cjk" style="width:NaNpx">后</span><span class="ace_cjk" style="width:NaNpx">更</span><span class="ace_cjk" style="width:NaNpx">换</span><span class="ace_cjk" style="width:NaNpx">中</span><span class="ace_cjk" style="width:NaNpx">间</span><span class="ace_cjk" style="width:NaNpx">件</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_keyword">public</span> <span class="ace_keyword">interface</span> <span class="ace_identifier">IUserManager</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_keyword">void</span> <span class="ace_identifier">Add</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">User</span> <span class="ace_identifier">user</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_keyword">void</span> <span class="ace_identifier">Update</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">User</span> <span class="ace_identifier">user</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_keyword">void</span> <span class="ace_identifier">Remove</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">User</span> <span class="ace_identifier">user</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">User</span> <span class="ace_identifier">GetById</span><span class="ace_paren ace_lparen">(</span><span class="ace_keyword">int</span> <span class="ace_identifier">id</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">User</span> <span class="ace_identifier">GetByUserName</span><span class="ace_paren ace_lparen">(</span><span class="ace_keyword">string</span> <span class="ace_identifier">username</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">ICollection</span><span class="ace_keyword ace_operator">&lt;</span><span class="ace_identifier">User</span><span class="ace_keyword ace_operator">&gt;</span> <span class="ace_identifier">GetAllUsers</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_keyword">bool</span> <span class="ace_identifier">VerifyUser</span><span class="ace_paren ace_lparen">(</span><span class="ace_keyword">string</span> <span class="ace_identifier">username</span><span class="ace_punctuation ace_operator">,</span> <span class="ace_keyword">string</span> <span class="ace_identifier">password</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span>
</div></div></div></div><div class="cell text-cell"><div><b>Manager文件下NHibernate连接数据库</b>（对于不同的实体，可以一对一地写一个<entity>Repository，专注负责相对应的实体操作。）</entity></div></div><div class="cell code-cell"><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">using</span> <span class="ace_identifier">System</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">Collections</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">Generic</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">using</span> <span class="ace_identifier">LJK_NHibernateLinkMySQLDemo_20210202</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">Common</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">using</span> <span class="ace_identifier">LJK_NHibernateLinkMySQLDemo_20210202</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">Model</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">using</span> <span class="ace_identifier">NHibernate</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">using</span> <span class="ace_identifier">NHibernate</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">Criterion</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">namespace</span> <span class="ace_identifier">LJK_NHibernateLinkMySQLDemo_20210202</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">Manager</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_keyword">public</span> <span class="ace_keyword">class</span> <span class="ace_identifier">UserManager</span> <span class="ace_punctuation ace_operator">:</span> <span class="ace_identifier">IUserManager</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_keyword">private</span> <span class="ace_keyword">static</span> <span class="ace_identifier">UserManager</span> <span class="ace_identifier">_instance</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_keyword">public</span> <span class="ace_keyword">static</span> <span class="ace_identifier">UserManager</span> <span class="ace_identifier">Instance</span> <span class="ace_keyword ace_operator">=&gt;</span> <span class="ace_identifier">_instance</span> <span class="ace_punctuation ace_operator">??</span> <span class="ace_paren ace_lparen">(</span><span class="ace_identifier">_instance</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_keyword">new</span> <span class="ace_identifier">UserManager</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">))</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_keyword">public</span> <span class="ace_keyword">void</span> <span class="ace_identifier">Add</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">User</span> <span class="ace_identifier">user</span><span class="ace_paren ace_rparen">)</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">// ISession session = NHibernateHelper.OpenSession();</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">// session.Save(user);</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">// session.Close();</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_keyword">using</span> <span class="ace_paren ace_lparen">(</span><span class="ace_identifier">ISession</span> <span class="ace_identifier">session</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_identifier">NHibernateHelper</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">OpenSession</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">))</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_keyword">using</span> <span class="ace_paren ace_lparen">(</span><span class="ace_identifier">ITransaction</span> <span class="ace_identifier">transaction</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_identifier">session</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">BeginTransaction</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">))</span> <span class="ace_comment">//<span class="ace_cjk" style="width:NaNpx">需</span><span class="ace_cjk" style="width:NaNpx">要</span><span class="ace_cjk" style="width:NaNpx">释</span><span class="ace_cjk" style="width:NaNpx">放</span><span class="ace_cjk" style="width:NaNpx">，</span><span class="ace_cjk" style="width:NaNpx">最</span><span class="ace_cjk" style="width:NaNpx">好</span><span class="ace_cjk" style="width:NaNpx">使</span><span class="ace_cjk" style="width:NaNpx">用</span>using<span class="ace_cjk" style="width:NaNpx">，</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//<span class="ace_cjk" style="width:NaNpx">只</span><span class="ace_cjk" style="width:NaNpx">有</span><span class="ace_cjk" style="width:NaNpx">大</span><span class="ace_cjk" style="width:NaNpx">括</span><span class="ace_cjk" style="width:NaNpx">号</span><span class="ace_cjk" style="width:NaNpx">里</span><span class="ace_cjk" style="width:NaNpx">面</span><span class="ace_cjk" style="width:NaNpx">执</span><span class="ace_cjk" style="width:NaNpx">行</span><span class="ace_cjk" style="width:NaNpx">完</span><span class="ace_cjk" style="width:NaNpx">了</span><span class="ace_cjk" style="width:NaNpx">，</span>transaction<span class="ace_cjk" style="width:NaNpx">才</span><span class="ace_cjk" style="width:NaNpx">会</span><span class="ace_cjk" style="width:NaNpx">释</span><span class="ace_cjk" style="width:NaNpx">放</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">session</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">Save</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">user</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">transaction</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">Commit</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//<span class="ace_cjk" style="width:NaNpx">更</span><span class="ace_cjk" style="width:NaNpx">新</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_keyword">public</span> <span class="ace_keyword">void</span> <span class="ace_identifier">Update</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">User</span> <span class="ace_identifier">user</span><span class="ace_paren ace_rparen">)</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_keyword">using</span> <span class="ace_paren ace_lparen">(</span><span class="ace_identifier">ISession</span> <span class="ace_identifier">session</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_identifier">NHibernateHelper</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">OpenSession</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">))</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_keyword">using</span> <span class="ace_paren ace_lparen">(</span><span class="ace_identifier">ITransaction</span> <span class="ace_identifier">transaction</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_identifier">session</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">BeginTransaction</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">))</span> <span class="ace_comment">//<span class="ace_cjk" style="width:NaNpx">需</span><span class="ace_cjk" style="width:NaNpx">要</span><span class="ace_cjk" style="width:NaNpx">释</span><span class="ace_cjk" style="width:NaNpx">放</span><span class="ace_cjk" style="width:NaNpx">，</span><span class="ace_cjk" style="width:NaNpx">最</span><span class="ace_cjk" style="width:NaNpx">好</span><span class="ace_cjk" style="width:NaNpx">使</span><span class="ace_cjk" style="width:NaNpx">用</span>using<span class="ace_cjk" style="width:NaNpx">，</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//<span class="ace_cjk" style="width:NaNpx">只</span><span class="ace_cjk" style="width:NaNpx">有</span><span class="ace_cjk" style="width:NaNpx">大</span><span class="ace_cjk" style="width:NaNpx">括</span><span class="ace_cjk" style="width:NaNpx">号</span><span class="ace_cjk" style="width:NaNpx">里</span><span class="ace_cjk" style="width:NaNpx">面</span><span class="ace_cjk" style="width:NaNpx">执</span><span class="ace_cjk" style="width:NaNpx">行</span><span class="ace_cjk" style="width:NaNpx">完</span><span class="ace_cjk" style="width:NaNpx">了</span><span class="ace_cjk" style="width:NaNpx">，</span>transaction<span class="ace_cjk" style="width:NaNpx">才</span><span class="ace_cjk" style="width:NaNpx">会</span><span class="ace_cjk" style="width:NaNpx">释</span><span class="ace_cjk" style="width:NaNpx">放</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">session</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">Update</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">user</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">transaction</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">Commit</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_keyword">public</span> <span class="ace_keyword">void</span> <span class="ace_identifier">Remove</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">User</span> <span class="ace_identifier">user</span><span class="ace_paren ace_rparen">)</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_keyword">using</span> <span class="ace_paren ace_lparen">(</span><span class="ace_identifier">ISession</span> <span class="ace_identifier">session</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_identifier">NHibernateHelper</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">OpenSession</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">))</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_keyword">using</span> <span class="ace_paren ace_lparen">(</span><span class="ace_identifier">ITransaction</span> <span class="ace_identifier">transaction</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_identifier">session</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">BeginTransaction</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">))</span> <span class="ace_comment">//<span class="ace_cjk" style="width:NaNpx">需</span><span class="ace_cjk" style="width:NaNpx">要</span><span class="ace_cjk" style="width:NaNpx">释</span><span class="ace_cjk" style="width:NaNpx">放</span><span class="ace_cjk" style="width:NaNpx">，</span><span class="ace_cjk" style="width:NaNpx">最</span><span class="ace_cjk" style="width:NaNpx">好</span><span class="ace_cjk" style="width:NaNpx">使</span><span class="ace_cjk" style="width:NaNpx">用</span>using<span class="ace_cjk" style="width:NaNpx">，</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//<span class="ace_cjk" style="width:NaNpx">只</span><span class="ace_cjk" style="width:NaNpx">有</span><span class="ace_cjk" style="width:NaNpx">大</span><span class="ace_cjk" style="width:NaNpx">括</span><span class="ace_cjk" style="width:NaNpx">号</span><span class="ace_cjk" style="width:NaNpx">里</span><span class="ace_cjk" style="width:NaNpx">面</span><span class="ace_cjk" style="width:NaNpx">执</span><span class="ace_cjk" style="width:NaNpx">行</span><span class="ace_cjk" style="width:NaNpx">完</span><span class="ace_cjk" style="width:NaNpx">了</span><span class="ace_cjk" style="width:NaNpx">，</span>transaction<span class="ace_cjk" style="width:NaNpx">才</span><span class="ace_cjk" style="width:NaNpx">会</span><span class="ace_cjk" style="width:NaNpx">释</span><span class="ace_cjk" style="width:NaNpx">放</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">session</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">Delete</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">user</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">transaction</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">Commit</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_keyword">public</span> <span class="ace_identifier">User</span> <span class="ace_identifier">GetById</span><span class="ace_paren ace_lparen">(</span><span class="ace_keyword">int</span> <span class="ace_identifier">id</span><span class="ace_paren ace_rparen">)</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_keyword">using</span> <span class="ace_paren ace_lparen">(</span><span class="ace_identifier">ISession</span> <span class="ace_identifier">session</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_identifier">NHibernateHelper</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">OpenSession</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">))</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">User</span> <span class="ace_identifier">user</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_identifier">session</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">Get</span><span class="ace_keyword ace_operator">&lt;</span><span class="ace_identifier">User</span><span class="ace_keyword ace_operator">&gt;</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">id</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_keyword">return</span> <span class="ace_identifier">user</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//<span class="ace_cjk" style="width:NaNpx">使</span><span class="ace_cjk" style="width:NaNpx">用</span>CreateCriteria<span class="ace_cjk" style="width:NaNpx">查</span><span class="ace_cjk" style="width:NaNpx">询</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_keyword">public</span> <span class="ace_identifier">User</span> <span class="ace_identifier">GetByUserName</span><span class="ace_paren ace_lparen">(</span><span class="ace_keyword">string</span> <span class="ace_identifier">username</span><span class="ace_paren ace_rparen">)</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_keyword">using</span> <span class="ace_paren ace_lparen">(</span><span class="ace_identifier">ISession</span> <span class="ace_identifier">session</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_identifier">NHibernateHelper</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">OpenSession</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">))</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">// ICriteria criteria = session.CreateCriteria(typeof(User));//criteria<span class="ace_cjk" style="width:NaNpx">标</span><span class="ace_cjk" style="width:NaNpx">准</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">// criteria.Add(Restrictions.Eq("Username", username));//Restrictions<span class="ace_cjk" style="width:NaNpx">限</span><span class="ace_cjk" style="width:NaNpx">制</span><span class="ace_cjk" style="width:NaNpx">条</span><span class="ace_cjk" style="width:NaNpx">件</span><span class="ace_cjk" style="width:NaNpx">，</span><span class="ace_cjk" style="width:NaNpx">查</span><span class="ace_cjk" style="width:NaNpx">询</span><span class="ace_cjk" style="width:NaNpx">条</span><span class="ace_cjk" style="width:NaNpx">件</span><span class="ace_cjk" style="width:NaNpx">封</span><span class="ace_cjk" style="width:NaNpx">装</span><span class="ace_cjk" style="width:NaNpx">成</span><span class="ace_cjk" style="width:NaNpx">了</span><span class="ace_cjk" style="width:NaNpx">对</span><span class="ace_cjk" style="width:NaNpx">象</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">// return criteria.UniqueResult&lt;User&gt;();//Unique<span class="ace_cjk" style="width:NaNpx">独</span><span class="ace_cjk" style="width:NaNpx">一</span><span class="ace_cjk" style="width:NaNpx">无</span><span class="ace_cjk" style="width:NaNpx">二</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">ICriteria</span> <span class="ace_identifier">criteria</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_identifier">session</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">CreateCriteria</span><span class="ace_paren ace_lparen">(</span><span class="ace_keyword">typeof</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">User</span><span class="ace_paren ace_rparen">))</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">Add</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">Restrictions</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">Eq</span><span class="ace_paren ace_lparen">(</span><span class="ace_string ace_start">"</span><span class="ace_string">Username</span><span class="ace_string ace_end">"</span><span class="ace_punctuation ace_operator">,</span> <span class="ace_identifier">username</span><span class="ace_paren ace_rparen">))</span><span class="ace_punctuation ace_operator">;</span><span class="ace_comment">//Username<span class="ace_cjk" style="width:NaNpx">属</span><span class="ace_cjk" style="width:NaNpx">性</span><span class="ace_cjk" style="width:NaNpx">名</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">User</span> <span class="ace_identifier">user</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_identifier">criteria</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">UniqueResult</span><span class="ace_keyword ace_operator">&lt;</span><span class="ace_identifier">User</span><span class="ace_keyword ace_operator">&gt;</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_keyword">return</span> <span class="ace_identifier">user</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_keyword">public</span> <span class="ace_identifier">ICollection</span><span class="ace_keyword ace_operator">&lt;</span><span class="ace_identifier">User</span><span class="ace_keyword ace_operator">&gt;</span> <span class="ace_identifier">GetAllUsers</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_keyword">using</span> <span class="ace_paren ace_lparen">(</span><span class="ace_identifier">ISession</span> <span class="ace_identifier">session</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_identifier">NHibernateHelper</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">OpenSession</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">))</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">IList</span><span class="ace_keyword ace_operator">&lt;</span><span class="ace_identifier">User</span><span class="ace_keyword ace_operator">&gt;</span> <span class="ace_identifier">users</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_identifier">session</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">CreateCriteria</span><span class="ace_paren ace_lparen">(</span><span class="ace_keyword">typeof</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">User</span><span class="ace_paren ace_rparen">))</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">List</span><span class="ace_keyword ace_operator">&lt;</span><span class="ace_identifier">User</span><span class="ace_keyword ace_operator">&gt;</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_keyword">return</span> <span class="ace_identifier">users</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_keyword">public</span> <span class="ace_keyword">bool</span> <span class="ace_identifier">VerifyUser</span><span class="ace_paren ace_lparen">(</span><span class="ace_keyword">string</span> <span class="ace_identifier">username</span><span class="ace_punctuation ace_operator">,</span> <span class="ace_keyword">string</span> <span class="ace_identifier">password</span><span class="ace_paren ace_rparen">)</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_keyword">using</span> <span class="ace_paren ace_lparen">(</span><span class="ace_identifier">ISession</span> <span class="ace_identifier">session</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_identifier">NHibernateHelper</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">OpenSession</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">))</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">// <span class="ace_cjk" style="width:NaNpx">方</span><span class="ace_cjk" style="width:NaNpx">式</span><span class="ace_cjk" style="width:NaNpx">一</span><span class="ace_cjk" style="width:NaNpx">：</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">ICriteria</span> <span class="ace_identifier">criteria</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_identifier">session</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">CreateCriteria</span><span class="ace_paren ace_lparen">(</span><span class="ace_keyword">typeof</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">User</span><span class="ace_paren ace_rparen">))</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">Add</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">Restrictions</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">Eq</span><span class="ace_paren ace_lparen">(</span><span class="ace_string ace_start">"</span><span class="ace_string">Username</span><span class="ace_string ace_end">"</span><span class="ace_punctuation ace_operator">,</span> <span class="ace_identifier">username</span><span class="ace_paren ace_rparen">))</span><span class="ace_punctuation ace_operator">;</span><span class="ace_comment">//Username<span class="ace_cjk" style="width:NaNpx">属</span><span class="ace_cjk" style="width:NaNpx">性</span><span class="ace_cjk" style="width:NaNpx">名</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">User</span> <span class="ace_identifier">user</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_identifier">criteria</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">UniqueResult</span><span class="ace_keyword ace_operator">&lt;</span><span class="ace_identifier">User</span><span class="ace_keyword ace_operator">&gt;</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_keyword">return</span> <span class="ace_identifier">user</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">Password</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">Equals</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">password</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//<span class="ace_cjk" style="width:NaNpx">方</span><span class="ace_cjk" style="width:NaNpx">式</span><span class="ace_cjk" style="width:NaNpx">二</span><span class="ace_cjk" style="width:NaNpx">：</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">// User user = session</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//     .CreateCriteria(typeof(User))</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//     .Add(Restrictions.Eq("Username", username))</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//     .Add(Restrictions.Eq("Password", password))</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//     .UniqueResult&lt;User&gt;();</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">// if (user==null)</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">// {</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//     return false;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">// }</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">// return true;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span>
</div></div></div></div><div class="cell text-cell"><b>应用场景案例</b></div><div class="cell code-cell"><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">using</span> <span class="ace_identifier">System</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">using</span> <span class="ace_identifier">System</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">Collections</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">Generic</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">using</span> <span class="ace_identifier">System</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">Linq</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">using</span> <span class="ace_identifier">LJK_NHibernateLinkMySQLDemo_20210202</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">Manager</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">using</span> <span class="ace_identifier">LJK_NHibernateLinkMySQLDemo_20210202</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">Model</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">using</span> <span class="ace_identifier">NHibernate</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">using</span> <span class="ace_identifier">NHibernate</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">Cfg</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">namespace</span> <span class="ace_identifier">LJK_NHibernateLinkMySQLDemo_20210202</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_keyword">internal</span> <span class="ace_keyword">class</span> <span class="ace_identifier">Program</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_keyword">public</span> <span class="ace_keyword">static</span> <span class="ace_keyword">void</span> <span class="ace_identifier">Main</span><span class="ace_paren ace_lparen">(</span><span class="ace_keyword">string</span><span class="ace_paren ace_lparen">[</span><span class="ace_paren ace_rparen">]</span> <span class="ace_identifier">args</span><span class="ace_paren ace_rparen">)</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//         Configuration configuration = new Configuration();</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//         configuration.Configure(); //<span class="ace_cjk" style="width:NaNpx">解</span><span class="ace_cjk" style="width:NaNpx">析</span>nHibernate.cfg.xml<span class="ace_cjk" style="width:NaNpx">数</span><span class="ace_cjk" style="width:NaNpx">据</span><span class="ace_cjk" style="width:NaNpx">库</span><span class="ace_cjk" style="width:NaNpx">的</span><span class="ace_cjk" style="width:NaNpx">连</span><span class="ace_cjk" style="width:NaNpx">接</span><span class="ace_cjk" style="width:NaNpx">文</span><span class="ace_cjk" style="width:NaNpx">件</span>,<span class="ace_cjk" style="width:NaNpx">默</span><span class="ace_cjk" style="width:NaNpx">认</span><span class="ace_cjk" style="width:NaNpx">路</span><span class="ace_cjk" style="width:NaNpx">径</span><span class="ace_cjk" style="width:NaNpx">默</span><span class="ace_cjk" style="width:NaNpx">认</span><span class="ace_cjk" style="width:NaNpx">名</span><span class="ace_cjk" style="width:NaNpx">字</span><span class="ace_cjk" style="width:NaNpx">解</span><span class="ace_cjk" style="width:NaNpx">析</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//         configuration.AddAssembly("LJK_NHibernateLinkMySQLDemo_20210202"); //<span class="ace_cjk" style="width:NaNpx">解</span><span class="ace_cjk" style="width:NaNpx">析</span><span class="ace_cjk" style="width:NaNpx">映</span><span class="ace_cjk" style="width:NaNpx">射</span><span class="ace_cjk" style="width:NaNpx">文</span><span class="ace_cjk" style="width:NaNpx">件</span>User.hbm.xml...</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//         ISessionFactory sessionFactory = null;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//         ISession session = null;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//         ITransaction transaction = null;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//         try</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//         {</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//             sessionFactory = configuration.BuildSessionFactory(); //<span class="ace_cjk" style="width:NaNpx">创</span><span class="ace_cjk" style="width:NaNpx">建</span>session<span class="ace_cjk" style="width:NaNpx">工</span><span class="ace_cjk" style="width:NaNpx">厂</span><span class="ace_cjk" style="width:NaNpx">，</span><span class="ace_cjk" style="width:NaNpx">用</span><span class="ace_cjk" style="width:NaNpx">于</span><span class="ace_cjk" style="width:NaNpx">与</span><span class="ace_cjk" style="width:NaNpx">数</span><span class="ace_cjk" style="width:NaNpx">据</span><span class="ace_cjk" style="width:NaNpx">库</span><span class="ace_cjk" style="width:NaNpx">的</span><span class="ace_cjk" style="width:NaNpx">连</span><span class="ace_cjk" style="width:NaNpx">接</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//             if (sessionFactory != null)</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//             {</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//                 session = sessionFactory.OpenSession(); //<span class="ace_cjk" style="width:NaNpx">打</span><span class="ace_cjk" style="width:NaNpx">开</span><span class="ace_cjk" style="width:NaNpx">一</span><span class="ace_cjk" style="width:NaNpx">个</span><span class="ace_cjk" style="width:NaNpx">与</span><span class="ace_cjk" style="width:NaNpx">数</span><span class="ace_cjk" style="width:NaNpx">据</span><span class="ace_cjk" style="width:NaNpx">库</span><span class="ace_cjk" style="width:NaNpx">的</span><span class="ace_cjk" style="width:NaNpx">会</span><span class="ace_cjk" style="width:NaNpx">话</span><span class="ace_cjk" style="width:NaNpx">（</span><span class="ace_cjk" style="width:NaNpx">连</span><span class="ace_cjk" style="width:NaNpx">接</span><span class="ace_cjk" style="width:NaNpx">）</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//                 User user = new User()</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//                 {</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//                     Username = "KOKO",</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//                     Password = "5566",</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//                     RegisterDate = DateTime.Now</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//                 };</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//                 //<span class="ace_cjk" style="width:NaNpx">插</span><span class="ace_cjk" style="width:NaNpx">入</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//                 //session.Save(user);</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//                 </span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//                 //<span class="ace_cjk" style="width:NaNpx">删</span><span class="ace_cjk" style="width:NaNpx">除</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//                 //session.Delete(user);</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//                 </span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//                 //<span class="ace_cjk" style="width:NaNpx">查</span><span class="ace_cjk" style="width:NaNpx">询</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//                 // IQueryable&lt;User&gt; users = session.Query&lt;User&gt;();</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//                 // foreach (var u in users)</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//                 // {</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//                 //     Console.WriteLine(u.Id);</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//                 // }</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//                 //<span class="ace_cjk" style="width:NaNpx">事</span><span class="ace_cjk" style="width:NaNpx">务</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//                 //MySQL <span class="ace_cjk" style="width:NaNpx">事</span><span class="ace_cjk" style="width:NaNpx">务</span><span class="ace_cjk" style="width:NaNpx">主</span><span class="ace_cjk" style="width:NaNpx">要</span><span class="ace_cjk" style="width:NaNpx">用</span><span class="ace_cjk" style="width:NaNpx">于</span><span class="ace_cjk" style="width:NaNpx">处</span><span class="ace_cjk" style="width:NaNpx">理</span><span class="ace_cjk" style="width:NaNpx">操</span><span class="ace_cjk" style="width:NaNpx">作</span><span class="ace_cjk" style="width:NaNpx">量</span><span class="ace_cjk" style="width:NaNpx">大</span><span class="ace_cjk" style="width:NaNpx">，</span><span class="ace_cjk" style="width:NaNpx">复</span><span class="ace_cjk" style="width:NaNpx">杂</span><span class="ace_cjk" style="width:NaNpx">度</span><span class="ace_cjk" style="width:NaNpx">高</span><span class="ace_cjk" style="width:NaNpx">的</span><span class="ace_cjk" style="width:NaNpx">数</span><span class="ace_cjk" style="width:NaNpx">据</span><span class="ace_cjk" style="width:NaNpx">。</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//                 //<span class="ace_cjk" style="width:NaNpx">比</span><span class="ace_cjk" style="width:NaNpx">如</span><span class="ace_cjk" style="width:NaNpx">说</span><span class="ace_cjk" style="width:NaNpx">，</span><span class="ace_cjk" style="width:NaNpx">在</span><span class="ace_cjk" style="width:NaNpx">人</span><span class="ace_cjk" style="width:NaNpx">员</span><span class="ace_cjk" style="width:NaNpx">管</span><span class="ace_cjk" style="width:NaNpx">理</span><span class="ace_cjk" style="width:NaNpx">系</span><span class="ace_cjk" style="width:NaNpx">统</span><span class="ace_cjk" style="width:NaNpx">中</span><span class="ace_cjk" style="width:NaNpx">，</span><span class="ace_cjk" style="width:NaNpx">你</span><span class="ace_cjk" style="width:NaNpx">删</span><span class="ace_cjk" style="width:NaNpx">除</span><span class="ace_cjk" style="width:NaNpx">一</span><span class="ace_cjk" style="width:NaNpx">个</span><span class="ace_cjk" style="width:NaNpx">人</span><span class="ace_cjk" style="width:NaNpx">员</span><span class="ace_cjk" style="width:NaNpx">，</span><span class="ace_cjk" style="width:NaNpx">你</span><span class="ace_cjk" style="width:NaNpx">既</span><span class="ace_cjk" style="width:NaNpx">需</span><span class="ace_cjk" style="width:NaNpx">要</span><span class="ace_cjk" style="width:NaNpx">删</span><span class="ace_cjk" style="width:NaNpx">除</span><span class="ace_cjk" style="width:NaNpx">人</span><span class="ace_cjk" style="width:NaNpx">员</span><span class="ace_cjk" style="width:NaNpx">的</span><span class="ace_cjk" style="width:NaNpx">基</span><span class="ace_cjk" style="width:NaNpx">本</span><span class="ace_cjk" style="width:NaNpx">资</span><span class="ace_cjk" style="width:NaNpx">料</span><span class="ace_cjk" style="width:NaNpx">，</span><span class="ace_cjk" style="width:NaNpx">也</span><span class="ace_cjk" style="width:NaNpx">要</span><span class="ace_cjk" style="width:NaNpx">删</span><span class="ace_cjk" style="width:NaNpx">除</span><span class="ace_cjk" style="width:NaNpx">和</span><span class="ace_cjk" style="width:NaNpx">该</span><span class="ace_cjk" style="width:NaNpx">人</span><span class="ace_cjk" style="width:NaNpx">员</span><span class="ace_cjk" style="width:NaNpx">相</span><span class="ace_cjk" style="width:NaNpx">关</span><span class="ace_cjk" style="width:NaNpx">的</span><span class="ace_cjk" style="width:NaNpx">信</span><span class="ace_cjk" style="width:NaNpx">息</span><span class="ace_cjk" style="width:NaNpx">，</span><span class="ace_cjk" style="width:NaNpx">如</span><span class="ace_cjk" style="width:NaNpx">信</span><span class="ace_cjk" style="width:NaNpx">箱</span><span class="ace_cjk" style="width:NaNpx">，</span><span class="ace_cjk" style="width:NaNpx">文</span><span class="ace_cjk" style="width:NaNpx">章</span><span class="ace_cjk" style="width:NaNpx">等</span><span class="ace_cjk" style="width:NaNpx">等</span><span class="ace_cjk" style="width:NaNpx">，</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//                 //<span class="ace_cjk" style="width:NaNpx">这</span><span class="ace_cjk" style="width:NaNpx">样</span><span class="ace_cjk" style="width:NaNpx">，</span><span class="ace_cjk" style="width:NaNpx">这</span><span class="ace_cjk" style="width:NaNpx">些</span><span class="ace_cjk" style="width:NaNpx">数</span><span class="ace_cjk" style="width:NaNpx">据</span><span class="ace_cjk" style="width:NaNpx">库</span><span class="ace_cjk" style="width:NaNpx">操</span><span class="ace_cjk" style="width:NaNpx">作</span><span class="ace_cjk" style="width:NaNpx">语</span><span class="ace_cjk" style="width:NaNpx">句</span><span class="ace_cjk" style="width:NaNpx">就</span><span class="ace_cjk" style="width:NaNpx">构</span><span class="ace_cjk" style="width:NaNpx">成</span><span class="ace_cjk" style="width:NaNpx">一</span><span class="ace_cjk" style="width:NaNpx">个</span><span class="ace_cjk" style="width:NaNpx">事</span><span class="ace_cjk" style="width:NaNpx">务</span><span class="ace_cjk" style="width:NaNpx">！</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//                 </span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//                 /*<span class="ace_cjk" style="width:NaNpx">一</span><span class="ace_cjk" style="width:NaNpx">般</span><span class="ace_cjk" style="width:NaNpx">来</span><span class="ace_cjk" style="width:NaNpx">说</span><span class="ace_cjk" style="width:NaNpx">，</span><span class="ace_cjk" style="width:NaNpx">事</span><span class="ace_cjk" style="width:NaNpx">务</span><span class="ace_cjk" style="width:NaNpx">是</span><span class="ace_cjk" style="width:NaNpx">必</span><span class="ace_cjk" style="width:NaNpx">须</span><span class="ace_cjk" style="width:NaNpx">满</span><span class="ace_cjk" style="width:NaNpx">足</span>4<span class="ace_cjk" style="width:NaNpx">个</span><span class="ace_cjk" style="width:NaNpx">条</span><span class="ace_cjk" style="width:NaNpx">件</span><span class="ace_cjk" style="width:NaNpx">（</span>ACID<span class="ace_cjk" style="width:NaNpx">）</span><span class="ace_cjk" style="width:NaNpx">：</span><span class="ace_cjk" style="width:NaNpx">原</span><span class="ace_cjk" style="width:NaNpx">子</span><span class="ace_cjk" style="width:NaNpx">性</span><span class="ace_cjk" style="width:NaNpx">（</span>Atomicity<span class="ace_cjk" style="width:NaNpx">，</span><span class="ace_cjk" style="width:NaNpx">或</span><span class="ace_cjk" style="width:NaNpx">称</span><span class="ace_cjk" style="width:NaNpx">不</span><span class="ace_cjk" style="width:NaNpx">可</span><span class="ace_cjk" style="width:NaNpx">分</span><span class="ace_cjk" style="width:NaNpx">割</span><span class="ace_cjk" style="width:NaNpx">性</span><span class="ace_cjk" style="width:NaNpx">）</span><span class="ace_cjk" style="width:NaNpx">、</span><span class="ace_cjk" style="width:NaNpx">一</span><span class="ace_cjk" style="width:NaNpx">致</span><span class="ace_cjk" style="width:NaNpx">性</span><span class="ace_cjk" style="width:NaNpx">（</span>Consistency<span class="ace_cjk" style="width:NaNpx">）</span><span class="ace_cjk" style="width:NaNpx">、</span><span class="ace_cjk" style="width:NaNpx">隔</span><span class="ace_cjk" style="width:NaNpx">离</span><span class="ace_cjk" style="width:NaNpx">性</span><span class="ace_cjk" style="width:NaNpx">（</span>Isolation<span class="ace_cjk" style="width:NaNpx">，</span><span class="ace_cjk" style="width:NaNpx">又</span><span class="ace_cjk" style="width:NaNpx">称</span><span class="ace_cjk" style="width:NaNpx">独</span><span class="ace_cjk" style="width:NaNpx">立</span><span class="ace_cjk" style="width:NaNpx">性</span><span class="ace_cjk" style="width:NaNpx">）</span><span class="ace_cjk" style="width:NaNpx">、</span><span class="ace_cjk" style="width:NaNpx">持</span><span class="ace_cjk" style="width:NaNpx">久</span><span class="ace_cjk" style="width:NaNpx">性</span><span class="ace_cjk" style="width:NaNpx">（</span>Durability<span class="ace_cjk" style="width:NaNpx">）</span><span class="ace_cjk" style="width:NaNpx">。</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//                 <span class="ace_cjk" style="width:NaNpx">原</span><span class="ace_cjk" style="width:NaNpx">子</span><span class="ace_cjk" style="width:NaNpx">性</span><span class="ace_cjk" style="width:NaNpx">：</span><span class="ace_cjk" style="width:NaNpx">一</span><span class="ace_cjk" style="width:NaNpx">个</span><span class="ace_cjk" style="width:NaNpx">事</span><span class="ace_cjk" style="width:NaNpx">务</span><span class="ace_cjk" style="width:NaNpx">（</span>transaction<span class="ace_cjk" style="width:NaNpx">）</span><span class="ace_cjk" style="width:NaNpx">中</span><span class="ace_cjk" style="width:NaNpx">的</span><span class="ace_cjk" style="width:NaNpx">所</span><span class="ace_cjk" style="width:NaNpx">有</span><span class="ace_cjk" style="width:NaNpx">操</span><span class="ace_cjk" style="width:NaNpx">作</span><span class="ace_cjk" style="width:NaNpx">，</span><span class="ace_cjk" style="width:NaNpx">要</span><span class="ace_cjk" style="width:NaNpx">么</span><span class="ace_cjk" style="width:NaNpx">全</span><span class="ace_cjk" style="width:NaNpx">部</span><span class="ace_cjk" style="width:NaNpx">完</span><span class="ace_cjk" style="width:NaNpx">成</span><span class="ace_cjk" style="width:NaNpx">，</span><span class="ace_cjk" style="width:NaNpx">要</span><span class="ace_cjk" style="width:NaNpx">么</span><span class="ace_cjk" style="width:NaNpx">全</span><span class="ace_cjk" style="width:NaNpx">部</span><span class="ace_cjk" style="width:NaNpx">不</span><span class="ace_cjk" style="width:NaNpx">完</span><span class="ace_cjk" style="width:NaNpx">成</span><span class="ace_cjk" style="width:NaNpx">，</span><span class="ace_cjk" style="width:NaNpx">不</span><span class="ace_cjk" style="width:NaNpx">会</span><span class="ace_cjk" style="width:NaNpx">结</span><span class="ace_cjk" style="width:NaNpx">束</span><span class="ace_cjk" style="width:NaNpx">在</span><span class="ace_cjk" style="width:NaNpx">中</span><span class="ace_cjk" style="width:NaNpx">间</span><span class="ace_cjk" style="width:NaNpx">某</span><span class="ace_cjk" style="width:NaNpx">个</span><span class="ace_cjk" style="width:NaNpx">环</span><span class="ace_cjk" style="width:NaNpx">节</span><span class="ace_cjk" style="width:NaNpx">。</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//                      <span class="ace_cjk" style="width:NaNpx">事</span><span class="ace_cjk" style="width:NaNpx">务</span><span class="ace_cjk" style="width:NaNpx">在</span><span class="ace_cjk" style="width:NaNpx">执</span><span class="ace_cjk" style="width:NaNpx">行</span><span class="ace_cjk" style="width:NaNpx">过</span><span class="ace_cjk" style="width:NaNpx">程</span><span class="ace_cjk" style="width:NaNpx">中</span><span class="ace_cjk" style="width:NaNpx">发</span><span class="ace_cjk" style="width:NaNpx">生</span><span class="ace_cjk" style="width:NaNpx">错</span><span class="ace_cjk" style="width:NaNpx">误</span><span class="ace_cjk" style="width:NaNpx">，</span><span class="ace_cjk" style="width:NaNpx">会</span><span class="ace_cjk" style="width:NaNpx">被</span><span class="ace_cjk" style="width:NaNpx">回</span><span class="ace_cjk" style="width:NaNpx">滚</span><span class="ace_cjk" style="width:NaNpx">（</span>Rollback<span class="ace_cjk" style="width:NaNpx">）</span><span class="ace_cjk" style="width:NaNpx">到</span><span class="ace_cjk" style="width:NaNpx">事</span><span class="ace_cjk" style="width:NaNpx">务</span><span class="ace_cjk" style="width:NaNpx">开</span><span class="ace_cjk" style="width:NaNpx">始</span><span class="ace_cjk" style="width:NaNpx">前</span><span class="ace_cjk" style="width:NaNpx">的</span><span class="ace_cjk" style="width:NaNpx">状</span><span class="ace_cjk" style="width:NaNpx">态</span><span class="ace_cjk" style="width:NaNpx">，</span><span class="ace_cjk" style="width:NaNpx">就</span><span class="ace_cjk" style="width:NaNpx">像</span><span class="ace_cjk" style="width:NaNpx">这</span><span class="ace_cjk" style="width:NaNpx">个</span><span class="ace_cjk" style="width:NaNpx">事</span><span class="ace_cjk" style="width:NaNpx">务</span><span class="ace_cjk" style="width:NaNpx">从</span><span class="ace_cjk" style="width:NaNpx">来</span><span class="ace_cjk" style="width:NaNpx">没</span><span class="ace_cjk" style="width:NaNpx">有</span><span class="ace_cjk" style="width:NaNpx">执</span><span class="ace_cjk" style="width:NaNpx">行</span><span class="ace_cjk" style="width:NaNpx">过</span><span class="ace_cjk" style="width:NaNpx">一</span><span class="ace_cjk" style="width:NaNpx">样</span><span class="ace_cjk" style="width:NaNpx">。</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//                 <span class="ace_cjk" style="width:NaNpx">一</span><span class="ace_cjk" style="width:NaNpx">致</span><span class="ace_cjk" style="width:NaNpx">性</span><span class="ace_cjk" style="width:NaNpx">：</span><span class="ace_cjk" style="width:NaNpx">在</span><span class="ace_cjk" style="width:NaNpx">事</span><span class="ace_cjk" style="width:NaNpx">务</span><span class="ace_cjk" style="width:NaNpx">开</span><span class="ace_cjk" style="width:NaNpx">始</span><span class="ace_cjk" style="width:NaNpx">之</span><span class="ace_cjk" style="width:NaNpx">前</span><span class="ace_cjk" style="width:NaNpx">和</span><span class="ace_cjk" style="width:NaNpx">事</span><span class="ace_cjk" style="width:NaNpx">务</span><span class="ace_cjk" style="width:NaNpx">结</span><span class="ace_cjk" style="width:NaNpx">束</span><span class="ace_cjk" style="width:NaNpx">以</span><span class="ace_cjk" style="width:NaNpx">后</span><span class="ace_cjk" style="width:NaNpx">，</span><span class="ace_cjk" style="width:NaNpx">数</span><span class="ace_cjk" style="width:NaNpx">据</span><span class="ace_cjk" style="width:NaNpx">库</span><span class="ace_cjk" style="width:NaNpx">的</span><span class="ace_cjk" style="width:NaNpx">完</span><span class="ace_cjk" style="width:NaNpx">整</span><span class="ace_cjk" style="width:NaNpx">性</span><span class="ace_cjk" style="width:NaNpx">没</span><span class="ace_cjk" style="width:NaNpx">有</span><span class="ace_cjk" style="width:NaNpx">被</span><span class="ace_cjk" style="width:NaNpx">破</span><span class="ace_cjk" style="width:NaNpx">坏</span><span class="ace_cjk" style="width:NaNpx">。</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//                      <span class="ace_cjk" style="width:NaNpx">这</span><span class="ace_cjk" style="width:NaNpx">表</span><span class="ace_cjk" style="width:NaNpx">示</span><span class="ace_cjk" style="width:NaNpx">写</span><span class="ace_cjk" style="width:NaNpx">入</span><span class="ace_cjk" style="width:NaNpx">的</span><span class="ace_cjk" style="width:NaNpx">资</span><span class="ace_cjk" style="width:NaNpx">料</span><span class="ace_cjk" style="width:NaNpx">必</span><span class="ace_cjk" style="width:NaNpx">须</span><span class="ace_cjk" style="width:NaNpx">完</span><span class="ace_cjk" style="width:NaNpx">全</span><span class="ace_cjk" style="width:NaNpx">符</span><span class="ace_cjk" style="width:NaNpx">合</span><span class="ace_cjk" style="width:NaNpx">所</span><span class="ace_cjk" style="width:NaNpx">有</span><span class="ace_cjk" style="width:NaNpx">的</span><span class="ace_cjk" style="width:NaNpx">预</span><span class="ace_cjk" style="width:NaNpx">设</span><span class="ace_cjk" style="width:NaNpx">规</span><span class="ace_cjk" style="width:NaNpx">则</span><span class="ace_cjk" style="width:NaNpx">，</span><span class="ace_cjk" style="width:NaNpx">这</span><span class="ace_cjk" style="width:NaNpx">包</span><span class="ace_cjk" style="width:NaNpx">含</span><span class="ace_cjk" style="width:NaNpx">资</span><span class="ace_cjk" style="width:NaNpx">料</span><span class="ace_cjk" style="width:NaNpx">的</span><span class="ace_cjk" style="width:NaNpx">精</span><span class="ace_cjk" style="width:NaNpx">确</span><span class="ace_cjk" style="width:NaNpx">度</span><span class="ace_cjk" style="width:NaNpx">、</span><span class="ace_cjk" style="width:NaNpx">串</span><span class="ace_cjk" style="width:NaNpx">联</span><span class="ace_cjk" style="width:NaNpx">性</span><span class="ace_cjk" style="width:NaNpx">以</span><span class="ace_cjk" style="width:NaNpx">及</span><span class="ace_cjk" style="width:NaNpx">后</span><span class="ace_cjk" style="width:NaNpx">续</span><span class="ace_cjk" style="width:NaNpx">数</span><span class="ace_cjk" style="width:NaNpx">据</span><span class="ace_cjk" style="width:NaNpx">库</span><span class="ace_cjk" style="width:NaNpx">可</span><span class="ace_cjk" style="width:NaNpx">以</span><span class="ace_cjk" style="width:NaNpx">自</span><span class="ace_cjk" style="width:NaNpx">发</span><span class="ace_cjk" style="width:NaNpx">性</span><span class="ace_cjk" style="width:NaNpx">地</span><span class="ace_cjk" style="width:NaNpx">完</span><span class="ace_cjk" style="width:NaNpx">成</span><span class="ace_cjk" style="width:NaNpx">预</span><span class="ace_cjk" style="width:NaNpx">定</span><span class="ace_cjk" style="width:NaNpx">的</span><span class="ace_cjk" style="width:NaNpx">工</span><span class="ace_cjk" style="width:NaNpx">作</span><span class="ace_cjk" style="width:NaNpx">。</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//                 <span class="ace_cjk" style="width:NaNpx">隔</span><span class="ace_cjk" style="width:NaNpx">离</span><span class="ace_cjk" style="width:NaNpx">性</span><span class="ace_cjk" style="width:NaNpx">：</span><span class="ace_cjk" style="width:NaNpx">数</span><span class="ace_cjk" style="width:NaNpx">据</span><span class="ace_cjk" style="width:NaNpx">库</span><span class="ace_cjk" style="width:NaNpx">允</span><span class="ace_cjk" style="width:NaNpx">许</span><span class="ace_cjk" style="width:NaNpx">多</span><span class="ace_cjk" style="width:NaNpx">个</span><span class="ace_cjk" style="width:NaNpx">并</span><span class="ace_cjk" style="width:NaNpx">发</span><span class="ace_cjk" style="width:NaNpx">事</span><span class="ace_cjk" style="width:NaNpx">务</span><span class="ace_cjk" style="width:NaNpx">同</span><span class="ace_cjk" style="width:NaNpx">时</span><span class="ace_cjk" style="width:NaNpx">对</span><span class="ace_cjk" style="width:NaNpx">其</span><span class="ace_cjk" style="width:NaNpx">数</span><span class="ace_cjk" style="width:NaNpx">据</span><span class="ace_cjk" style="width:NaNpx">进</span><span class="ace_cjk" style="width:NaNpx">行</span><span class="ace_cjk" style="width:NaNpx">读</span><span class="ace_cjk" style="width:NaNpx">写</span><span class="ace_cjk" style="width:NaNpx">和</span><span class="ace_cjk" style="width:NaNpx">修</span><span class="ace_cjk" style="width:NaNpx">改</span><span class="ace_cjk" style="width:NaNpx">的</span><span class="ace_cjk" style="width:NaNpx">能</span><span class="ace_cjk" style="width:NaNpx">力</span><span class="ace_cjk" style="width:NaNpx">，</span><span class="ace_cjk" style="width:NaNpx">隔</span><span class="ace_cjk" style="width:NaNpx">离</span><span class="ace_cjk" style="width:NaNpx">性</span><span class="ace_cjk" style="width:NaNpx">可</span><span class="ace_cjk" style="width:NaNpx">以</span><span class="ace_cjk" style="width:NaNpx">防</span><span class="ace_cjk" style="width:NaNpx">止</span><span class="ace_cjk" style="width:NaNpx">多</span><span class="ace_cjk" style="width:NaNpx">个</span><span class="ace_cjk" style="width:NaNpx">事</span><span class="ace_cjk" style="width:NaNpx">务</span><span class="ace_cjk" style="width:NaNpx">并</span><span class="ace_cjk" style="width:NaNpx">发</span><span class="ace_cjk" style="width:NaNpx">执</span><span class="ace_cjk" style="width:NaNpx">行</span><span class="ace_cjk" style="width:NaNpx">时</span><span class="ace_cjk" style="width:NaNpx">由</span><span class="ace_cjk" style="width:NaNpx">于</span><span class="ace_cjk" style="width:NaNpx">交</span><span class="ace_cjk" style="width:NaNpx">叉</span><span class="ace_cjk" style="width:NaNpx">执</span><span class="ace_cjk" style="width:NaNpx">行</span><span class="ace_cjk" style="width:NaNpx">而</span><span class="ace_cjk" style="width:NaNpx">导</span><span class="ace_cjk" style="width:NaNpx">致</span><span class="ace_cjk" style="width:NaNpx">数</span><span class="ace_cjk" style="width:NaNpx">据</span><span class="ace_cjk" style="width:NaNpx">的</span><span class="ace_cjk" style="width:NaNpx">不</span><span class="ace_cjk" style="width:NaNpx">一</span><span class="ace_cjk" style="width:NaNpx">致</span><span class="ace_cjk" style="width:NaNpx">。</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//                       <span class="ace_cjk" style="width:NaNpx">事</span><span class="ace_cjk" style="width:NaNpx">务</span><span class="ace_cjk" style="width:NaNpx">隔</span><span class="ace_cjk" style="width:NaNpx">离</span><span class="ace_cjk" style="width:NaNpx">分</span><span class="ace_cjk" style="width:NaNpx">为</span><span class="ace_cjk" style="width:NaNpx">不</span><span class="ace_cjk" style="width:NaNpx">同</span><span class="ace_cjk" style="width:NaNpx">级</span><span class="ace_cjk" style="width:NaNpx">别</span><span class="ace_cjk" style="width:NaNpx">，</span><span class="ace_cjk" style="width:NaNpx">包</span><span class="ace_cjk" style="width:NaNpx">括</span><span class="ace_cjk" style="width:NaNpx">读</span><span class="ace_cjk" style="width:NaNpx">未</span><span class="ace_cjk" style="width:NaNpx">提</span><span class="ace_cjk" style="width:NaNpx">交</span><span class="ace_cjk" style="width:NaNpx">（</span>Read uncommitted<span class="ace_cjk" style="width:NaNpx">）</span><span class="ace_cjk" style="width:NaNpx">、</span><span class="ace_cjk" style="width:NaNpx">读</span><span class="ace_cjk" style="width:NaNpx">提</span><span class="ace_cjk" style="width:NaNpx">交</span><span class="ace_cjk" style="width:NaNpx">（</span>read committed<span class="ace_cjk" style="width:NaNpx">）</span><span class="ace_cjk" style="width:NaNpx">、</span><span class="ace_cjk" style="width:NaNpx">可</span><span class="ace_cjk" style="width:NaNpx">重</span><span class="ace_cjk" style="width:NaNpx">复</span><span class="ace_cjk" style="width:NaNpx">读</span><span class="ace_cjk" style="width:NaNpx">（</span>repeatable read<span class="ace_cjk" style="width:NaNpx">）</span><span class="ace_cjk" style="width:NaNpx">和</span><span class="ace_cjk" style="width:NaNpx">串</span><span class="ace_cjk" style="width:NaNpx">行</span><span class="ace_cjk" style="width:NaNpx">化</span><span class="ace_cjk" style="width:NaNpx">（</span>Serializable<span class="ace_cjk" style="width:NaNpx">）</span><span class="ace_cjk" style="width:NaNpx">。</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//                 <span class="ace_cjk" style="width:NaNpx">持</span><span class="ace_cjk" style="width:NaNpx">久</span><span class="ace_cjk" style="width:NaNpx">性</span><span class="ace_cjk" style="width:NaNpx">：</span><span class="ace_cjk" style="width:NaNpx">事</span><span class="ace_cjk" style="width:NaNpx">务</span><span class="ace_cjk" style="width:NaNpx">处</span><span class="ace_cjk" style="width:NaNpx">理</span><span class="ace_cjk" style="width:NaNpx">结</span><span class="ace_cjk" style="width:NaNpx">束</span><span class="ace_cjk" style="width:NaNpx">后</span><span class="ace_cjk" style="width:NaNpx">，</span><span class="ace_cjk" style="width:NaNpx">对</span><span class="ace_cjk" style="width:NaNpx">数</span><span class="ace_cjk" style="width:NaNpx">据</span><span class="ace_cjk" style="width:NaNpx">的</span><span class="ace_cjk" style="width:NaNpx">修</span><span class="ace_cjk" style="width:NaNpx">改</span><span class="ace_cjk" style="width:NaNpx">就</span><span class="ace_cjk" style="width:NaNpx">是</span><span class="ace_cjk" style="width:NaNpx">永</span><span class="ace_cjk" style="width:NaNpx">久</span><span class="ace_cjk" style="width:NaNpx">的</span><span class="ace_cjk" style="width:NaNpx">，</span><span class="ace_cjk" style="width:NaNpx">即</span><span class="ace_cjk" style="width:NaNpx">便</span><span class="ace_cjk" style="width:NaNpx">系</span><span class="ace_cjk" style="width:NaNpx">统</span><span class="ace_cjk" style="width:NaNpx">故</span><span class="ace_cjk" style="width:NaNpx">障</span><span class="ace_cjk" style="width:NaNpx">也</span><span class="ace_cjk" style="width:NaNpx">不</span><span class="ace_cjk" style="width:NaNpx">会</span><span class="ace_cjk" style="width:NaNpx">丢</span><span class="ace_cjk" style="width:NaNpx">失</span><span class="ace_cjk" style="width:NaNpx">。</span>*/</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//                 </span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//                 /*a<span class="ace_cjk" style="width:NaNpx">少</span>50<span class="ace_cjk" style="width:NaNpx">，</span>b<span class="ace_cjk" style="width:NaNpx">多</span>50*/    //<span class="ace_cjk" style="width:NaNpx">数</span><span class="ace_cjk" style="width:NaNpx">据</span><span class="ace_cjk" style="width:NaNpx">的</span><span class="ace_cjk" style="width:NaNpx">完</span><span class="ace_cjk" style="width:NaNpx">整</span><span class="ace_cjk" style="width:NaNpx">性</span><span class="ace_cjk" style="width:NaNpx">和</span><span class="ace_cjk" style="width:NaNpx">统</span><span class="ace_cjk" style="width:NaNpx">一</span><span class="ace_cjk" style="width:NaNpx">性</span>,<span class="ace_cjk" style="width:NaNpx">事</span><span class="ace_cjk" style="width:NaNpx">务</span><span class="ace_cjk" style="width:NaNpx">回</span><span class="ace_cjk" style="width:NaNpx">滚</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//                 </span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//                 //<span class="ace_cjk" style="width:NaNpx">创</span><span class="ace_cjk" style="width:NaNpx">建</span><span class="ace_cjk" style="width:NaNpx">事</span><span class="ace_cjk" style="width:NaNpx">务</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//                 </span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//                 //<span class="ace_cjk" style="width:NaNpx">方</span><span class="ace_cjk" style="width:NaNpx">法</span><span class="ace_cjk" style="width:NaNpx">一</span><span class="ace_cjk" style="width:NaNpx">：</span><span class="ace_cjk" style="width:NaNpx">直</span><span class="ace_cjk" style="width:NaNpx">接</span><span class="ace_cjk" style="width:NaNpx">创</span><span class="ace_cjk" style="width:NaNpx">建</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//                 {</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//                     transaction = session.BeginTransaction();</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//                     //<span class="ace_cjk" style="width:NaNpx">进</span><span class="ace_cjk" style="width:NaNpx">行</span><span class="ace_cjk" style="width:NaNpx">操</span><span class="ace_cjk" style="width:NaNpx">作</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//                     User user01 = new User()</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//                     {</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//                         Username = "dk01",</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//                         Password = "123",</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//                         RegisterDate = DateTime.Now</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//                     };</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//                     User user02 = new User()</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//                     {</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//                         Username = "dk01",</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//                         Password = "1989",</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//                         RegisterDate = DateTime.Now</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//                     };</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//                     session.Save(user01);</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//                     session.Save(user02);</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//                     //<span class="ace_cjk" style="width:NaNpx">事</span><span class="ace_cjk" style="width:NaNpx">务</span><span class="ace_cjk" style="width:NaNpx">提</span><span class="ace_cjk" style="width:NaNpx">交</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//                     transaction.Commit();</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//                     //<span class="ace_cjk" style="width:NaNpx">事</span><span class="ace_cjk" style="width:NaNpx">务</span><span class="ace_cjk" style="width:NaNpx">关</span><span class="ace_cjk" style="width:NaNpx">闭</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//                 }</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//                 </span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//             }</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//             Console.WriteLine("<span class="ace_cjk" style="width:NaNpx">已</span><span class="ace_cjk" style="width:NaNpx">经</span><span class="ace_cjk" style="width:NaNpx">初</span><span class="ace_cjk" style="width:NaNpx">步</span><span class="ace_cjk" style="width:NaNpx">解</span><span class="ace_cjk" style="width:NaNpx">析</span><span class="ace_cjk" style="width:NaNpx">了</span><span class="ace_cjk" style="width:NaNpx">！</span>");</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//             Console.ReadKey();</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//         }</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//         catch (Exception e)</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//         {</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//             Console.WriteLine(e);</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//         }</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//         finally</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//         {</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//             transaction?.Dispose();//<span class="ace_cjk" style="width:NaNpx">事</span><span class="ace_cjk" style="width:NaNpx">务</span><span class="ace_cjk" style="width:NaNpx">关</span><span class="ace_cjk" style="width:NaNpx">闭</span>/<span class="ace_cjk" style="width:NaNpx">释</span><span class="ace_cjk" style="width:NaNpx">放</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//             session?.Close();</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//             if (sessionFactory != null)</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//             {</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//                 sessionFactory.Close();</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//             }</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//         }</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//<span class="ace_cjk" style="width:NaNpx">插</span><span class="ace_cjk" style="width:NaNpx">入</span>/<span class="ace_cjk" style="width:NaNpx">修</span><span class="ace_cjk" style="width:NaNpx">改</span><span class="ace_cjk" style="width:NaNpx">操</span><span class="ace_cjk" style="width:NaNpx">作</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">User</span> <span class="ace_identifier">user03</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_keyword">new</span> <span class="ace_identifier">User</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">Id</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_constant ace_numeric">4</span><span class="ace_punctuation ace_operator">,</span> <span class="ace_comment">//<span class="ace_cjk" style="width:NaNpx">一</span><span class="ace_cjk" style="width:NaNpx">般</span><span class="ace_cjk" style="width:NaNpx">情</span><span class="ace_cjk" style="width:NaNpx">况</span><span class="ace_cjk" style="width:NaNpx">下</span><span class="ace_cjk" style="width:NaNpx">，</span><span class="ace_cjk" style="width:NaNpx">客</span><span class="ace_cjk" style="width:NaNpx">户</span><span class="ace_cjk" style="width:NaNpx">端</span><span class="ace_cjk" style="width:NaNpx">不</span><span class="ace_cjk" style="width:NaNpx">知</span><span class="ace_cjk" style="width:NaNpx">道</span>id</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">Username</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_string ace_start">"</span><span class="ace_string">jk123</span><span class="ace_string ace_end">"</span><span class="ace_punctuation ace_operator">,</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">Password</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_string ace_start">"</span><span class="ace_string">123</span><span class="ace_string ace_end">"</span><span class="ace_punctuation ace_operator">,</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">RegisterDate</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_identifier">DateTime</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">Now</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_paren ace_rparen">}</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">// UserManager.Instance.Add(user03);</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">UserManager</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">Instance</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">Update</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">user03</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//<span class="ace_cjk" style="width:NaNpx">查</span><span class="ace_cjk" style="width:NaNpx">询</span><span class="ace_cjk" style="width:NaNpx">操</span><span class="ace_cjk" style="width:NaNpx">作</span><span class="ace_cjk" style="width:NaNpx">，</span><span class="ace_cjk" style="width:NaNpx">根</span><span class="ace_cjk" style="width:NaNpx">据</span>id<span class="ace_cjk" style="width:NaNpx">查</span><span class="ace_cjk" style="width:NaNpx">询</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//User user = UserManager.Instance.GetById(19);</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//Console.WriteLine(user.Id);</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//<span class="ace_cjk" style="width:NaNpx">查</span><span class="ace_cjk" style="width:NaNpx">询</span><span class="ace_cjk" style="width:NaNpx">操</span><span class="ace_cjk" style="width:NaNpx">作</span><span class="ace_cjk" style="width:NaNpx">，</span><span class="ace_cjk" style="width:NaNpx">根</span><span class="ace_cjk" style="width:NaNpx">据</span><span class="ace_cjk" style="width:NaNpx">用</span><span class="ace_cjk" style="width:NaNpx">户</span><span class="ace_cjk" style="width:NaNpx">名</span><span class="ace_cjk" style="width:NaNpx">查</span><span class="ace_cjk" style="width:NaNpx">询</span><span class="ace_cjk" style="width:NaNpx">，</span><span class="ace_cjk" style="width:NaNpx">利</span><span class="ace_cjk" style="width:NaNpx">用</span><span class="ace_cjk" style="width:NaNpx">了</span>CreateCriteria<span class="ace_cjk" style="width:NaNpx">查</span><span class="ace_cjk" style="width:NaNpx">询</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">// User user = UserManager.Instance.GetByUserName("jk123"); //<span class="ace_cjk" style="width:NaNpx">通</span><span class="ace_cjk" style="width:NaNpx">过</span><span class="ace_cjk" style="width:NaNpx">用</span><span class="ace_cjk" style="width:NaNpx">户</span><span class="ace_cjk" style="width:NaNpx">名</span><span class="ace_cjk" style="width:NaNpx">获</span><span class="ace_cjk" style="width:NaNpx">取</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">// Console.WriteLine(user.Username);</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">// Console.WriteLine(user.Id);</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">// Console.WriteLine(user.Password);</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//<span class="ace_cjk" style="width:NaNpx">查</span><span class="ace_cjk" style="width:NaNpx">询</span><span class="ace_cjk" style="width:NaNpx">操</span><span class="ace_cjk" style="width:NaNpx">作</span><span class="ace_cjk" style="width:NaNpx">，</span><span class="ace_cjk" style="width:NaNpx">（</span><span class="ace_cjk" style="width:NaNpx">集</span><span class="ace_cjk" style="width:NaNpx">合</span><span class="ace_cjk" style="width:NaNpx">查</span><span class="ace_cjk" style="width:NaNpx">询</span><span class="ace_cjk" style="width:NaNpx">）</span> <span class="ace_cjk" style="width:NaNpx">获</span><span class="ace_cjk" style="width:NaNpx">取</span><span class="ace_cjk" style="width:NaNpx">所</span><span class="ace_cjk" style="width:NaNpx">有</span><span class="ace_cjk" style="width:NaNpx">的</span><span class="ace_cjk" style="width:NaNpx">用</span><span class="ace_cjk" style="width:NaNpx">户</span><span class="ace_cjk" style="width:NaNpx">信</span><span class="ace_cjk" style="width:NaNpx">息</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">// ICollection&lt;User&gt; allUsers = UserManager.Instance.GetAllUsers();</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">// foreach (var u in allUsers)</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">// {</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//     Console.WriteLine("<span class="ace_cjk" style="width:NaNpx">用</span><span class="ace_cjk" style="width:NaNpx">户</span>Id<span class="ace_cjk" style="width:NaNpx">为</span><span class="ace_cjk" style="width:NaNpx">：</span>{0},  <span class="ace_cjk" style="width:NaNpx">用</span><span class="ace_cjk" style="width:NaNpx">户</span><span class="ace_cjk" style="width:NaNpx">名</span><span class="ace_cjk" style="width:NaNpx">为</span><span class="ace_cjk" style="width:NaNpx">：</span>{1},  <span class="ace_cjk" style="width:NaNpx">用</span><span class="ace_cjk" style="width:NaNpx">户</span><span class="ace_cjk" style="width:NaNpx">密</span><span class="ace_cjk" style="width:NaNpx">码</span><span class="ace_cjk" style="width:NaNpx">为</span>:{2},  <span class="ace_cjk" style="width:NaNpx">用</span><span class="ace_cjk" style="width:NaNpx">户</span><span class="ace_cjk" style="width:NaNpx">注</span><span class="ace_cjk" style="width:NaNpx">册</span><span class="ace_cjk" style="width:NaNpx">日</span><span class="ace_cjk" style="width:NaNpx">期</span><span class="ace_cjk" style="width:NaNpx">为</span><span class="ace_cjk" style="width:NaNpx">：</span>{3}", u.Id, u.Username, u.Password,</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">//         u.RegisterDate);</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_comment">// }</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_keyword">bool</span> <span class="ace_identifier">b01</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_identifier">UserManager</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">Instance</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">VerifyUser</span><span class="ace_paren ace_lparen">(</span><span class="ace_string ace_start">"</span><span class="ace_string">dk</span><span class="ace_string ace_end">"</span><span class="ace_punctuation ace_operator">,</span><span class="ace_string ace_start">"</span><span class="ace_string">123</span><span class="ace_string ace_end">"</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">Console</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">WriteLine</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">b01</span> <span class="ace_punctuation ace_operator">?</span> <span class="ace_string ace_start">"</span><span class="ace_string"><span class="ace_cjk" style="width:NaNpx">用</span><span class="ace_cjk" style="width:NaNpx">户</span><span class="ace_cjk" style="width:NaNpx">名</span><span class="ace_cjk" style="width:NaNpx">和</span><span class="ace_cjk" style="width:NaNpx">密</span><span class="ace_cjk" style="width:NaNpx">码</span><span class="ace_cjk" style="width:NaNpx">正</span><span class="ace_cjk" style="width:NaNpx">确</span><span class="ace_cjk" style="width:NaNpx">！</span><span class="ace_cjk" style="width:NaNpx">验</span><span class="ace_cjk" style="width:NaNpx">证</span><span class="ace_cjk" style="width:NaNpx">成</span><span class="ace_cjk" style="width:NaNpx">功</span><span class="ace_cjk" style="width:NaNpx">！</span></span><span class="ace_string ace_end">"</span> <span class="ace_punctuation ace_operator">:</span> <span class="ace_string ace_start">"</span><span class="ace_string"><span class="ace_cjk" style="width:NaNpx">用</span><span class="ace_cjk" style="width:NaNpx">户</span><span class="ace_cjk" style="width:NaNpx">名</span><span class="ace_cjk" style="width:NaNpx">或</span><span class="ace_cjk" style="width:NaNpx">密</span><span class="ace_cjk" style="width:NaNpx">码</span><span class="ace_cjk" style="width:NaNpx">错</span><span class="ace_cjk" style="width:NaNpx">误</span><span class="ace_cjk" style="width:NaNpx">！</span><span class="ace_cjk" style="width:NaNpx">请</span><span class="ace_cjk" style="width:NaNpx">重</span><span class="ace_cjk" style="width:NaNpx">新</span><span class="ace_cjk" style="width:NaNpx">检</span><span class="ace_cjk" style="width:NaNpx">查</span><span class="ace_cjk" style="width:NaNpx">！</span></span><span class="ace_string ace_end">"</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_keyword">bool</span> <span class="ace_identifier">b02</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_identifier">UserManager</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">Instance</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">VerifyUser</span><span class="ace_paren ace_lparen">(</span><span class="ace_string ace_start">"</span><span class="ace_string">dk</span><span class="ace_string ace_end">"</span><span class="ace_punctuation ace_operator">,</span><span class="ace_string ace_start">"</span><span class="ace_string">1231</span><span class="ace_string ace_end">"</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">Console</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">WriteLine</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">b02</span> <span class="ace_punctuation ace_operator">?</span> <span class="ace_string ace_start">"</span><span class="ace_string"><span class="ace_cjk" style="width:NaNpx">用</span><span class="ace_cjk" style="width:NaNpx">户</span><span class="ace_cjk" style="width:NaNpx">名</span><span class="ace_cjk" style="width:NaNpx">和</span><span class="ace_cjk" style="width:NaNpx">密</span><span class="ace_cjk" style="width:NaNpx">码</span><span class="ace_cjk" style="width:NaNpx">正</span><span class="ace_cjk" style="width:NaNpx">确</span><span class="ace_cjk" style="width:NaNpx">！</span><span class="ace_cjk" style="width:NaNpx">验</span><span class="ace_cjk" style="width:NaNpx">证</span><span class="ace_cjk" style="width:NaNpx">成</span><span class="ace_cjk" style="width:NaNpx">功</span><span class="ace_cjk" style="width:NaNpx">！</span></span><span class="ace_string ace_end">"</span> <span class="ace_punctuation ace_operator">:</span> <span class="ace_string ace_start">"</span><span class="ace_string"><span class="ace_cjk" style="width:NaNpx">用</span><span class="ace_cjk" style="width:NaNpx">户</span><span class="ace_cjk" style="width:NaNpx">名</span><span class="ace_cjk" style="width:NaNpx">或</span><span class="ace_cjk" style="width:NaNpx">密</span><span class="ace_cjk" style="width:NaNpx">码</span><span class="ace_cjk" style="width:NaNpx">错</span><span class="ace_cjk" style="width:NaNpx">误</span><span class="ace_cjk" style="width:NaNpx">！</span><span class="ace_cjk" style="width:NaNpx">请</span><span class="ace_cjk" style="width:NaNpx">重</span><span class="ace_cjk" style="width:NaNpx">新</span><span class="ace_cjk" style="width:NaNpx">检</span><span class="ace_cjk" style="width:NaNpx">查</span><span class="ace_cjk" style="width:NaNpx">！</span></span><span class="ace_string ace_end">"</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">Console</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">WriteLine</span><span class="ace_paren ace_lparen">(</span><span class="ace_string ace_start">"</span><span class="ace_string"><span class="ace_cjk" style="width:NaNpx">数</span><span class="ace_cjk" style="width:NaNpx">据</span><span class="ace_cjk" style="width:NaNpx">库</span><span class="ace_cjk" style="width:NaNpx">查</span><span class="ace_cjk" style="width:NaNpx">询</span><span class="ace_cjk" style="width:NaNpx">完</span><span class="ace_cjk" style="width:NaNpx">成</span><span class="ace_cjk" style="width:NaNpx">！</span></span><span class="ace_string ace_end">"</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span> 
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span>
</div></div></div></div><div class="cell text-cell"><b></b></div><div class="cell text-cell"><div><br></div></div></div>
      <script>document.body.onkeyup = function(e) {
if (e.keyCode === 39) window.location.href = 'C#高级进阶教程_12_异步和多线程（委托的异步使用）.html';
}</script>
    </body>
    </html>
  